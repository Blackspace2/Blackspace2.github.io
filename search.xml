<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>å•åƒç©ºé—´åæ–¹äº¤ä¼š</title>
    <url>/2025/01/18/%E5%8D%95%E5%83%8F%E7%A9%BA%E9%97%B4%E5%90%8E%E6%96%B9%E4%BA%A4%E4%BC%9A/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><span id="more"></span>
<h2 id="æ€æƒ³">1. æ€æƒ³</h2>
<p>å•åƒåæ–¹äº¤ä¼šçš„åŸºæœ¬æ€æƒ³æ˜¯<strong>è‡³å°‘</strong>åˆ©ç”¨ä¸‰ä¸ªå·²çŸ¥åœ°é¢æ§åˆ¶ç‚¹çš„åæ ‡
<span class="math inline">\(A(X_A,Y_A,Z_A)\)</span>ï¼Œ<span
class="math inline">\(B(X_B,Y_B,Z_B)\)</span>ï¼Œ<span
class="math inline">\(C(X_C,Y_C,Z_C)\)</span>
ï¼Œä¸å½±åƒä¸Šå¯¹åº”çš„ä¸‰ä¸ªåƒç‚¹çš„å½±åƒåæ ‡ <span
class="math inline">\(a(x_a,y_a)\)</span>ï¼Œ<span
class="math inline">\(b(x_b,y_b)\)</span>ï¼Œ<span
class="math inline">\(c(x_c,y_c)\)</span>
ï¼Œå†æ ¹æ®å…±çº¿æ–¹ç¨‹ï¼Œåæ±‚è¯¥åƒç‰‡çš„å¤–æ–¹ä½å…ƒç´  <span
class="math inline">\(X_s,Y_s,Z_s,\varphi,\omega,\kappa\)</span>ã€‚è¿™ç§è§£æ³•æ˜¯ä»¥å•å¼ åƒç‰‡ä¸ºåŸºç¡€ï¼Œæ‰€ä»¥ä¹Ÿç§°åšå•åƒç©ºé—´åæ–¹äº¤ä¼šã€‚</p>
<h2 id="æ¨å¯¼">2. æ¨å¯¼</h2>
<h3 id="åŸºæœ¬å…³ç³»å¼">2.1. åŸºæœ¬å…³ç³»å¼</h3>
<p>å…±çº¿æ–¹ç¨‹ï¼š <span class="math display">\[
\begin{array}{c}
x=-f\frac{a_1\left( X-X_s \right) +b_1\left( Y-Y_s \right) +c_1\left(
Z-Z_s \right)}{a_3\left( X-X_s \right) +b_3\left( Y-Y_s \right)
+c_3\left( Z-Z_s \right)} \\
y=-f\frac{a_2\left( X-X_s \right) +b_2\left( Y-Y_s \right) +c_2\left(
Z-Z_s \right)}{a_3\left( X-X_s \right) +b_3\left( Y-Y_s \right)
+c_3\left( Z-Z_s \right)} \\
\end{array}
\]</span></p>
<p>ä¸ºäº†æ–¹ä¾¿è®¡ç®—ï¼Œéœ€è¦æŠŠéçº¿æ€§çš„å…±çº¿æ–¹ç¨‹çº¿æ€§åŒ–ã€‚<span
class="math inline">\(x,y\)</span>
æ˜¯å…³äºå…­ä¸ªå¤–æ–¹ä½å…ƒç´ çš„å¤šå…ƒå‡½æ•°ï¼Œè¿›è¡Œä¸€æ¬¡æ³°å‹’å±•å¼€ï¼š <span
class="math display">\[\label{å…±çº¿æ–¹ç¨‹}
\begin{array}{c}
x = \tilde{x} + \frac{\partial x}{\partial X_s}dX_s + \frac{\partial
x}{\partial Y_s}dY_s+\frac{\partial x}{\partial Z_s}dZ_s+\frac{\partial
x}{\partial \varphi}d\varphi +\frac{\partial x}{\partial \omega}d\omega
+\frac{\partial x}{\partial \kappa}d\kappa  \\
y = \tilde{y} +\frac{\partial y}{\partial X_s}dX_s+\frac{\partial
y}{\partial Y_s}dY_s+\frac{\partial y}{\partial Z_s}dZ_s+\frac{\partial
y}{\partial \varphi}d\varphi +\frac{\partial y}{\partial \omega}d\omega
+\frac{\partial y}{\partial \kappa}d\kappa
\end{array}
\]</span> <span class="math inline">\(\tilde{x},\tilde{y}\)</span>
æ˜¯å‡½æ•°çš„è¿‘ä¼¼å€¼ï¼Œæ˜¯æŠŠå¤–æ–¹ä½å…ƒç´ çš„åˆå€¼ <span
class="math inline">\(X_{s0},Y_{s0},Z_{s0},\varphi_0,\omega_0,\kappa_0\)</span>
å¸¦å…¥å…±çº¿æ–¹ç¨‹ä¸­å¾—åˆ°çš„ç»“æœï¼›<br />
<span
class="math inline">\(dX_s,dY_x,dZ_s,d\varphi_,d\omega,d\kappa\)</span>
æ˜¯å¯¹åº”å¤–æ–¹ä½å…ƒç´ è¿‘ä¼¼å€¼çš„æ”¹æ­£æ•°ï¼ˆä¹Ÿå°±æ˜¯å¢é‡ï¼‰ï¼›<br />
<span class="math inline">\(\frac{\partial x}{\partial
X_s},\dots,\frac{\partial y}{\partial \kappa}\)</span>
ä¸ºåå¯¼æ•°ï¼Œæ˜¯å¤–æ–¹ä½å…ƒç´ æ”¹æ­£æ•°çš„ç³»æ•°ã€‚</p>
<p>ä¸ºäº†æ–¹ä¾¿è¡¨ç¤ºï¼Œå¼ <span
class="math inline">\(\eqref{å…±çº¿æ–¹ç¨‹}\)</span> è®°ä¸ºï¼š <span
class="math display">\[\label{å…±çº¿æ–¹ç¨‹ç®€åŒ–}
\begin{array}{c}
x = \tilde{x} + a_{11}\ dX_s + a_{12}\ dY_s+a_{13}\ dZ_s+a_{14}\
d\varphi +a_{15}\ d\omega +a_{16}\ d\kappa= \tilde{x} + dx  \\
y = \tilde{y} +a_{21}\ dX_s+a_{22}\ dY_s+a_{23}\ dZ_s+a_{24}\ d\varphi
+a_{25}\ d\omega +a_{26}\ d\kappa=\tilde{y} + dy
\end{array}
\]</span> <span class="math inline">\(dx,dy\)</span>
è¡¨ç¤ºè¿‘ä¼¼å€¼çš„æ”¹æ­£å€¼ã€‚</p>
<p>å› ä¸ºä¸Šè¿°è¿‘ä¼¼æ˜¯ä¸€é˜¶çš„ï¼Œç»“æœè¾ƒä¸ºç²—ç•¥ï¼Œæ‰€ä»¥éœ€è¦ä¸æ–­è¿­ä»£è¶‹è¿‘ï¼Œç›´åˆ°æ”¹æ­£å€¼å°äºæŸä¸€é˜ˆå€¼ã€‚<br />
å¯¹äºä¸€ä¸ªæ§åˆ¶ç‚¹å°±èƒ½ç”±å…±çº¿æ–¹ç¨‹åˆ—å†™ä¸¤ä¸ªå¼å­ï¼Œæ‰€ä»¥ä¸€ä¸ªåƒç‰‡ä¸­æœ‰ä¸‰ä¸ªç‚¹å°±èƒ½åˆ—å‡ºå…­ä¸ªæ–¹ç¨‹ï¼Œæ±‚å‡ºå…­ä¸ªå¤–æ–¹ä½å…ƒç´ çš„æ”¹æ­£å€¼ã€‚</p>
<h3 id="è¯¯å·®æ–¹ç¨‹ä¸æ³•æ–¹ç¨‹">2.2. è¯¯å·®æ–¹ç¨‹ä¸æ³•æ–¹ç¨‹</h3>
<p>ä¸ºäº†æé«˜è§£ç®—å¤–æ–¹ä½å…ƒç´ çš„ç²¾åº¦ï¼Œå¸¸æœ‰å¤šä½™è§‚æµ‹æ–¹ç¨‹ã€‚åœ¨ç©ºé—´åæ–¹äº¤ä¼šä¸­ï¼Œé€šå¸¸æ˜¯åœ¨åƒç‰‡çš„å››ä¸ªè§’ä¸Šé€‰å–å››ä¸ªæˆ–è€…æ›´å¤šçš„åœ°é¢æ§åˆ¶ç‚¹ï¼Œå› æ­¤è¦ç”¨æœ€å°äºŒä¹˜æ³•å¹³å·®è®¡ç®—ã€‚<br />
<strong>è®¡ç®—ä¸­ï¼Œé€šå¸¸å°†æ§åˆ¶ç‚¹çš„åœ°é¢åæ ‡è§†ä¸ºçœŸå€¼ï¼Œè€ŒæŠŠç›¸åº”çš„åƒç‚¹åæ ‡è§†ä¸ºè§‚æµ‹å€¼</strong>ï¼ŒåŠ å…¥ç›¸åº”çš„æ”¹æ­£æ•°
<span class="math inline">\(v_x,v_y\)</span>ï¼ŒæŒ‰ç…§
<code>è§‚æµ‹å€¼ + è§‚æµ‹å€¼æ”¹æ­£æ•° = è¿‘ä¼¼å€¼ + è¿‘ä¼¼å€¼æ”¹æ­£æ•°</code>
çš„æ”¹æ­£åŸåˆ™ï¼Œå¾—ï¼š <span class="math display">\[
\begin{array}{c}
x+v_x=\tilde{x}+dx \\
y+v_y=\tilde{y}+dy
\end{array}
\Longrightarrow
\begin{array}{c}
v_x=\tilde{x}+dx-x \\
v_y=\tilde{y}+dy-y
\end{array}
\]</span> è¿™é‡Œ <span class="math inline">\(v_x,v_y\)</span>
çš„æ„ä¹‰å°±æ¯”è¾ƒæ˜æ˜¾äº†ï¼Œä»£è¡¨ è¿‘ä¼¼å€¼ç»è¿‡æ”¹æ­£åä¸çœŸå®å€¼ä¹‹é—´çš„è¯¯å·®ã€‚</p>
<p>ç»“åˆå¼ <span
class="math inline">\(\eqref{å…±çº¿æ–¹ç¨‹ç®€åŒ–}\)</span>ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨çŸ©é˜µå½¢å¼è¡¨ç¤ºè¿™ä¸ªæ–¹ç¨‹ç»„
<span class="math display">\[
V=AX-l
\]</span> å…¶ä¸­ <span class="math display">\[
\begin{equation*}
\begin{aligned}
V&amp;=\left[v_x, v_y\right]^T \in\mathbb{R}^{2\times 1} \\\\
A&amp;=\begin{bmatrix}
a_{11} &amp; a_{12} &amp; a_{13} &amp; a_{14} &amp; a_{15} &amp; a_{16}
\\
a_{21} &amp; a_{22} &amp; a_{23} &amp; a_{24} &amp; a_{25} &amp; a_{26}
\end{bmatrix} \in\mathbb{R}^{2\times 6} \\\\
X&amp;=\left[dX_s,dY_s,dZ_s,d\varphi,d\omega,d\kappa\right]^T
\in\mathbb{R}^{6\times 1} \\\\
l&amp;=\left[l_x,l_y\right]^T=\left[x-\tilde{x}, y-\tilde{y}\right]^T
\in\mathbb{R}^{2\times 1}
\end{aligned}
\end{equation*}
\]</span> ä¸Šé¢åªæ˜¯ä¸€ä¸ªæ§åˆ¶ç‚¹çš„å½¢å¼ï¼Œå½“å­˜åœ¨ <span
class="math inline">\(n\)</span> ä¸ªæ§åˆ¶ç‚¹çš„æ—¶å€™ï¼Œåˆ™æœ‰ï¼š <span
class="math display">\[\label{è¯¯å·®æ–¹ç¨‹}
V=AX-L
\]</span> å…¶ä¸­ <span class="math display">\[
\begin{equation*}
\begin{aligned}
V&amp;=\left[V_1^T , V_2^T,\dots,V_n^T\right]^T \in \mathbb{R}^{2n\times
1} \\\\
A&amp;=\left[A_1^T,A_2^T,\dots,A_n^T \right] \in\mathbb{R}^{2n\times 6}
\\\\
X&amp;=\left[dX_s,dY_s,dZ_s,d\varphi,d\omega,d\kappa\right]^T
\in\mathbb{R}^{6\times 1} \\\\
l&amp;=\left[l_1^T,l_2^T,\dots,l_n^T \right]^T \in\mathbb{R}^{2n\times
1}
\end{aligned}
\end{equation*}
\]</span> æ³¨æ„çŸ©é˜µçš„å¤§å°ï¼Œå†™ä»£ç çš„æ—¶å€™è¦ç”¨åˆ°ã€‚</p>
<p>æ ¹æ®æœ€å°äºŒä¹˜é—´æ¥å¹³å·®åŸç†ï¼Œå¯åˆ—å‡ºæ³•æ–¹ç¨‹ï¼š <span
class="math display">\[
A^T P A X=A^T L
\]</span> å…¶ä¸­ï¼Œ<span class="math inline">\(P\)</span>
ä¸ºåƒç‚¹è§‚æµ‹å€¼çš„æƒå€¼çŸ©é˜µï¼Œè¡¨ç¤ºè§‚æµ‹å€¼æµ‹é‡çš„ç›¸å¯¹ç²¾åº¦ï¼Œä¸€èˆ¬è®¤ä¸ºæ˜¯ç­‰ç²¾åº¦æµ‹é‡ï¼Œæ•…å–
<span class="math inline">\(P\)</span> ä¸ºå•ä½é˜µï¼Œå› æ­¤å¯è§£å¾—ï¼š <span
class="math display">\[\label{å°é—­è§£}
X=(A^T A)^{-1}A^T L
\]</span> ä»è€Œæ±‚å¾—å¤–æ–¹ä½å…ƒç´ è¿‘ä¼¼å€¼çš„æ”¹æ­£æ•° <span
class="math inline">\(dX_s,dY_s,dZ_s,d\varphi,d\omega,d\kappa\)</span>
ã€‚</p>
<details class="note info"><summary><p>ä¸€äº›è§£é‡Š</p>
</summary>
<p>è¿™é‡Œçš„è®¡ç®—è¿‡ç¨‹å…¶å®å°±æ˜¯å¾ˆå¸¸è§çš„çº¿æ€§æ¨¡å‹ï¼Œæœ€å°åŒ–è¯¯å·®å³ <span
class="math display">\[\nonumber X=arg\
\underset{X}{min}\|V^TV\|_{2}^{2}\]</span>
è¿™æ˜¯ä¸€ä¸ªç»å…¸çš„å‡¸ä¼˜åŒ–é—®é¢˜ï¼Œæ±‚åå¯¼ï¼Œä»¤åå¯¼ç­‰äº 0 å³å¯ã€‚</p>

</details>
<p>æ ¹æ®ä¸Šé¢çš„å†…å®¹ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°ç¬¬ <span class="math inline">\(i\)</span>
æ¬¡è®¡ç®—çš„å¤–æ–¹ä½å…ƒç´ çš„æ”¹æ­£å€¼ <span
class="math inline">\(X_i\)</span>ï¼Œç›´åˆ°ç¬¬ <span
class="math inline">\(k\)</span> æ¬¡æ”¶æ•›çš„æ—¶ï¼Œå¾—åˆ°æœ€åçš„å¤–æ–¹ä½å…ƒç´ ï¼š
<span class="math display">\[
\begin{equation*}
\begin{aligned}
X_s &amp;= X_{s0}+dX_{s1}+dX_{s2}+\dots+dX_{sk} \\
Y_s &amp;= Y_{s0}+dY_{s1}+dY_{s2}+\dots+dY_{sk} \\
Z_s &amp;= Z_{s0}+dZ_{s1}+dZ_{s2}+\dots+dZ_{sk} \\
\varphi &amp;= \varphi_0 + d\varphi_1 + d\varphi_2+\dots+d\varphi_k \\
\omega &amp;= \omega_0 + d\omega_1+d\omega_2 + \dots+d\omega_k \\
\kappa &amp;= \kappa_0+d\kappa_1+d\kappa_2+\dots+d\kappa_k
\end{aligned}
\end{equation*}
\]</span></p>
<p>å³ <span class="math display">\[
X = X_0 + X_1 + X_2 +\dots+X_k
\]</span></p>
<p>è§‚å¯Ÿå¼ <span class="math inline">\(\eqref{å°é—­è§£}\)</span>
å¯çŸ¥ï¼Œç›®å‰ä»… <span class="math inline">\(A\)</span> æœªçŸ¥ï¼Œä¸‹é¢å¯¹ <span
class="math inline">\(A\)</span> è¿›è¡Œæ±‚è§£ã€‚ <details class="note info"><summary><p>æ±‚è§£ <span class="math inline">\(A\)</span></p>
</summary>
<p>ä¸ºä¹¦å†™æ–¹ä¾¿ï¼Œä»¤å…±çº¿æ–¹ç¨‹ä¸­çš„åˆ†å­ã€åˆ†æ¯å¦‚ä¸‹ï¼š <span
class="math display">\[\begin{equation}\label{å…±çº¿æ–¹ç¨‹åˆ†å­åˆ†æ¯}
\begin{aligned}
\overline{X} = a_1\left( X-X_s \right) +b_1\left( Y-Y_s \right)
+c_1\left( Z-Z_s \right) \\
\overline{Y} = a_2\left( X-X_s \right) +b_2\left( Y-Y_s \right)
+c_2\left( Z-Z_s \right) \\
\overline{Z} = a_3\left( X-X_s \right) +b_3\left( Y-Y_s \right)
+c_3\left( Z-Z_s \right) \\
\end{aligned}
\end{equation}
\]</span></p>
<p>ç”± <span class="math inline">\(\eqref{å…±çº¿æ–¹ç¨‹}\)</span> å’Œ <span
class="math inline">\(\eqref{å…±çº¿æ–¹ç¨‹ç®€åŒ–}\)</span> å¯çŸ¥ <span
class="math display">\[
\begin{equation*}
\begin{aligned}
a_{11} = \frac{\partial x}{\partial X_s} &amp;= \frac{\partial
\left(-f\frac{\overline{X}}{\overline{Z}}\right)}{\partial X_s} &amp;
åˆ†å¼æ±‚å¯¼\\
&amp;=-f \frac{\frac{\partial \overline{X}}{\partial X_s}\overline{Z} -
\overline{X}\frac{\partial \overline{Z}}{\partial X_s}}{\overline{Z}^2}
&amp;x=-f\frac{\overline{X}}{\overline{Z}}\\
&amp;=-f\left(-\frac{a_1}{\overline{Z}} - \frac{1}{f\overline{Z}}x
a_3\right) \\
&amp;=\frac{1}{\overline{Z}}\left(a_1 f + a_3 x\right)
\end{aligned}
\end{equation*}
\]</span></p>
<p>åŒç†å¯å¾— <span class="math display">\[
\begin{align}
&amp;
\begin{cases}\label{å¯¹XYZåå¯¼}
a_{11}=\frac{\partial x}{\partial X_{s}}=\frac{1}{\overline{Z}}(a_{1}f +
a_{3}x)\\\\
a_{12}=\frac{\partial x}{\partial Y_{s}}=\frac{1}{\overline{Z}}(b_{1}f +
b_{3}x)\\\\
a_{13}=\frac{\partial x}{\partial Z_{s}}=\frac{1}{\overline{Z}}(c_{1}f +
c_{3}x)\\\\
a_{21}=\frac{\partial y}{\partial X_{s}}=\frac{1}{\overline{Z}}(a_{2}f +
a_{3}y)\\\\
a_{22}=\frac{\partial y}{\partial Y_{s}}=\frac{1}{\overline{Z}}(b_{2}f +
b_{3}y)\\\\
a_{23}=\frac{\partial y}{\partial Z_{s}}=\frac{1}{\overline{Z}}(c_{2}f +
c_{3}y)
\end{cases}
\\\nonumber \\
&amp;
\begin{cases}\label{å¯¹è§’åº¦åå¯¼}
a_{14}=\frac{\partial x}{\partial
\varphi}=-\frac{f}{(\overline{Z})^{2}}(\frac{\partial
\overline{X}}{\partial \varphi}\overline{Z}-\frac{\partial
\overline{Z}}{\partial \varphi}\overline{X})\\\\
a_{15}=\frac{\partial x}{\partial
\omega}=-\frac{f}{(\overline{Z})^{2}}(\frac{\partial
\overline{X}}{\partial \omega}\overline{Z}-\frac{\partial
\overline{Z}}{\partial \omega}\overline{X})\\\\
a_{16}=\frac{\partial x}{\partial
\kappa}=-\frac{f}{(\overline{Z})^{2}}(\frac{\partial
\overline{X}}{\partial \kappa}\overline{Z}-\frac{\partial
\overline{Z}}{\partial \kappa}\overline{X})\\\\
a_{24}=\frac{\partial y}{\partial
\varphi}=-\frac{f}{(\overline{Z})^{2}}(\frac{\partial
\overline{Y}}{\partial \varphi}\overline{Z}-\frac{\partial
\overline{Z}}{\partial \varphi}\overline{Y})\\\\
a_{25}=\frac{\partial y}{\partial
\omega}=-\frac{f}{(\overline{Z})^{2}}(\frac{\partial
\overline{Y}}{\partial \omega}\overline{Z}-\frac{\partial
\overline{Z}}{\partial \omega}\overline{Y})\\\\
a_{26}=\frac{\partial y}{\partial
\kappa}=-\frac{f}{(\overline{Z})^{2}}(\frac{\partial
\overline{Y}}{\partial \kappa}\overline{Z}-\frac{\partial
\overline{Z}}{\partial \kappa}\overline{Y})
\end{cases}
\end{align}
\]</span></p>
<p>ç”±å¼ <span class="math inline">\(\eqref{å…±çº¿æ–¹ç¨‹åˆ†å­åˆ†æ¯}\)</span>
å¯çŸ¥ <span class="math display">\[
\begin{aligned}
\left[ \begin{array}{c}
\overline{X} \\
\overline{Y} \\
\overline{Z} \\
\end{array} \right]
&amp;=\left[\begin{array}{c}
a_1 &amp; a_2 &amp; a_3 \\
b_1 &amp; b_2 &amp; b_3 \\
c_1 &amp; c_2 &amp; c_3 \\
\end{array}\right]
\left[\begin{array}{c}
X-X_s\\
Y-Y_s\\
Z-Z_s
\end{array}\right]
=R^T\left[\begin{array}{c}
X-X_s\\
Y-Y_s\\
Z-Z_s
\end{array}\right] \\
&amp;=R_{\kappa}^T R_{\omega}^T R_{\varphi}^T \left[\begin{array}{c}
X-X_s\\
Y-Y_s\\
Z-Z_s
\end{array}\right]
=R_{\kappa}^{-1} R_{\omega}^{-1} R_{\varphi}^{-1} \left[\begin{array}{c}
X-X_s\\
Y-Y_s\\
Z-Z_s
\end{array}\right]
\end{aligned}
\]</span></p>
<p>æ‰€ä»¥ <span class="math display">\[
\begin{equation}
\begin{aligned}
\frac{\partial}{\partial \varphi}
\begin{bmatrix}
\overline{X} \\
\overline{Y} \\
\overline{Z}
\end{bmatrix}
&amp;= R_{\kappa}^{-1} R_{\omega}^{-1} \frac{\partial
R_{\varphi}^{-1}}{\partial \varphi}
\begin{bmatrix}
X - X_{s} \\
Y - Y_{s} \\
Z - Z_{s}
\end{bmatrix}\\
&amp;= R_{\kappa}^{-1} R_{\omega}^{-1} R_{\varphi}^{-1} R_{\varphi}
\frac{\partial R_{\varphi}^{-1}}{\partial \varphi}
\begin{bmatrix}
X - X_{s} \\
Y - Y_{s} \\
Z - Z_{s}
\end{bmatrix}\\
&amp;= R^{-1} R_{\varphi} \frac{\partial R_{\varphi}^{-1}}{\partial
\varphi}
\begin{bmatrix}
X - X_{s} \\
Y - Y_{s} \\
Z - Z_{s}
\end{bmatrix}
\end{aligned}
\end{equation}
\]</span></p>
<p>è€Œ <span class="math display">\[
R_{\varphi}^{-1} = R_{\varphi}^{\mathrm{T}}
=\begin{bmatrix}
\cos\varphi &amp; 0 &amp; \sin\varphi \\
0 &amp; 1 &amp; 0 \\
-\sin\varphi &amp; 0 &amp; \cos\varphi
\end{bmatrix}
\]</span> åˆ™ <span class="math display">\[
R_{\varphi} \frac{\partial R_{\varphi}^{-1}}{\partial \varphi}
=\begin{bmatrix}
\cos\varphi &amp; 0 &amp; -\sin\varphi \\
0 &amp; 1 &amp; 0 \\
\sin\varphi &amp; 0 &amp; \cos\varphi
\end{bmatrix}
\begin{bmatrix}
-\sin\varphi &amp; 0 &amp; \cos\varphi \\
0 &amp; 0 &amp; 0 \\
-\cos\varphi &amp; 0 &amp; -\sin\varphi
\end{bmatrix}
=\begin{bmatrix}
0 &amp; 0 &amp; 1 \\
0 &amp; 0 &amp; 0 \\
-1 &amp; 0 &amp; 0
\end{bmatrix}
\]</span></p>
<p>ä»£å…¥ä¸Šå¼ï¼Œå¾—ï¼š <span class="math display">\[
\begin{equation}\label{varphiåå¯¼}
\begin{aligned}
\frac{\partial}{\partial \varphi}
\begin{bmatrix}
\overline{X} \\
\overline{Y} \\
\overline{Z}
\end{bmatrix}
&amp;=\begin{bmatrix}
a_{1} &amp; b_{1} &amp; c_{1} \\
a_{2} &amp; b_{2} &amp; c_{2} \\
a_{3} &amp; b_{3} &amp; c_{3}
\end{bmatrix}
\begin{bmatrix}
0 &amp; 0 &amp; 1 \\
0 &amp; 0 &amp; 0 \\
-1 &amp; 0 &amp; 0
\end{bmatrix}
\begin{bmatrix}
X - X_{s} \\
Y - Y_{s} \\
Z - Z_{s}
\end{bmatrix}\\
&amp;=\begin{bmatrix}
a_{1} &amp; b_{1} &amp; c_{1} \\
a_{2} &amp; b_{2} &amp; c_{2} \\
a_{3} &amp; b_{3} &amp; c_{3}
\end{bmatrix}
\begin{bmatrix}
0 &amp; 0 &amp; 1 \\
0 &amp; 0 &amp; 0 \\
-1 &amp; 0 &amp; 0
\end{bmatrix}
\begin{bmatrix}
a_{1} &amp; a_{2} &amp; a_{3} \\
b_{1} &amp; b_{2} &amp; b_{3} \\
c_{1} &amp; c_{2} &amp; c_{3}
\end{bmatrix}
\begin{bmatrix}
\overline{X} \\
\overline{Y} \\
\overline{Z}
\end{bmatrix}\\
&amp;=\begin{bmatrix}
0 &amp; -b_{3} &amp; b_{2} \\
b_{3} &amp; 0 &amp; -b_{1} \\
-b_{2} &amp; b_{1} &amp; 0
\end{bmatrix}
\begin{bmatrix}
\overline{X} \\
\overline{Y} \\
\overline{Z}
\end{bmatrix}
\end{aligned}
\end{equation}
\]</span> æŒ‰ç›¸ä»¿çš„æ–¹æ³•ï¼Œå¾—ï¼š <span class="math display">\[
\begin{equation}\label{omegaåå¯¼}
\begin{aligned}
    \frac{\partial}{\partial \omega}
    \begin{bmatrix}
    \overline{X} \\
    \overline{Y} \\
    \overline{Z}
    \end{bmatrix}
    &amp;= R_{\kappa}^{-1} \frac{\partial R_{\omega}^{-1}}{\partial
\omega} R_{\varphi}^{-1}
    \begin{bmatrix}
    X - X_{s} \\
    Y - Y_{s} \\
    Z - Z_{s}
    \end{bmatrix}\\
    &amp;= R_{\kappa}^{-1} \frac{\partial R_{\omega}^{-1}}{\partial
\omega} R_{\omega} R_{\kappa} R_{\kappa}^{-1} R_{\omega}^{-1}
R_{\varphi}^{-1}
    \begin{bmatrix}
    X - X_{s} \\
    Y - Y_{s} \\
    Z - Z_{s}
    \end{bmatrix}\\
    &amp;=R_{\kappa}^{-1}
    \begin{bmatrix}
    0 &amp; 0 &amp; 0 \\
    0 &amp; 0 &amp; 1 \\
    0 &amp; -1 &amp; 0
    \end{bmatrix}
    R_{\kappa}R^{-1}
    \begin{bmatrix}
    X - X_{s} \\
    Y - Y_{s} \\
    Z - Z_{s}
    \end{bmatrix}\\
    &amp;=\begin{bmatrix}
    \overline{Z}\sin\kappa \\
    \overline{Z}\cos\kappa \\
    -\overline{X}\sin\kappa - Y\cos\kappa
    \end{bmatrix}
\end{aligned}
\end{equation}
\]</span></p>
<p><span class="math display">\[
\begin{equation}\label{kappaåå¯¼}
\begin{aligned}
    \frac{\partial}{\partial \kappa}
    \begin{bmatrix}
    \overline{X} \\
    \overline{Y} \\
    \overline{Z}
    \end{bmatrix}
    &amp;=\frac{\partial R_{\kappa}^{-1}}{\partial
\kappa}R_{\kappa}R_{\kappa}^{-1}R_{\omega}^{-1}R_{\varphi}^{-1}
    \begin{bmatrix}
    X - X_{s} \\
    Y - Y_{s} \\
    Z - Z_{s}
    \end{bmatrix}\\
    &amp;=\begin{bmatrix}
    0 &amp; 1 &amp; 0 \\
    -1 &amp; 0 &amp; 0 \\
    0 &amp; 0 &amp; 0
    \end{bmatrix}
    \begin{bmatrix}
    a_{1} &amp; b_{1} &amp; c_{1} \\
    a_{2} &amp; b_{2} &amp; c_{2} \\
    a_{3} &amp; b_{3} &amp; c_{3}
    \end{bmatrix}
    \begin{bmatrix}
    X - X_{s} \\
    Y - Y_{s} \\
    Z - Z_{s}
    \end{bmatrix}\\
    &amp;=\begin{bmatrix}
    \overline{Y} \\
    -\overline{X} \\
    0
    \end{bmatrix}
\end{aligned}
\end{equation}
\]</span></p>
<p>å°† <span class="math inline">\(\eqref{varphiåå¯¼} \eqref{omegaåå¯¼}
\eqref{kappaåå¯¼}\)</span> å¸¦å…¥ <span
class="math inline">\(\eqref{å¯¹è§’åº¦åå¯¼}\)</span>ï¼Œæ•´ç†å¾—ï¼š <span
class="math display">\[
\begin{equation}\label{å¯¹è§’åº¦åå¯¼åŒ–ç®€}
\begin{aligned}
a_{14} &amp;= y\sin\omega - \left[\frac{x}{f}(x\cos\kappa - y\sin\kappa)
+ f\cos\kappa\right]\cos\omega\\
a_{15} &amp;= -f\sin\kappa - \frac{x}{f}(x\sin\kappa + y\cos\kappa)\\
a_{16} &amp;= y\\
a_{24} &amp;= -x\sin\omega - \left[\frac{y}{f}(x\cos\kappa -
y\sin\kappa) - f\sin\kappa\right]\cos\omega\\
a_{25} &amp;= -f\cos\kappa - \frac{y}{f}(x\sin\kappa + y\cos\kappa)\\
a_{26} &amp;= -x
\end{aligned}
\end{equation}
\]</span></p>

</details></p>
<p>åœ¨<strong>ç«–ç›´æ‘„å½±</strong>æƒ…å†µä¸‹ï¼Œè§’å…ƒç´ éƒ½æ˜¯å°è§’<span
class="math inline">\((\lt 3Â°)\)</span>ï¼Œå¯ç”¨ <span
class="math inline">\(\varphi=\omega=\kappa=0\)</span> åŠ <span
class="math inline">\(Z-Z_s=-H\)</span> ä»£æ›¿ï¼Œå¾—åˆ°å„ç³»æ•°çš„è¿‘ä¼¼å€¼ï¼š <span
class="math display">\[
\begin{equation}
\begin{aligned}
a_{11} &amp;= -\frac{f}{H} &amp; a_{12} &amp;= 0 &amp; a_{13} &amp;=
-\frac{x}{H}\\
a_{14} &amp;= -f\left(1 + \frac{x^2}{f^2}\right) &amp; a_{15} &amp;=
-\frac{xy}{f} &amp; a_{16} &amp;= y\\
a_{21} &amp;= 0 &amp; a_{22} &amp;= -\frac{f}{H} &amp; a_{23} &amp;=
-\frac{y}{H}\\
a_{24} &amp;= -\frac{xy}{f} &amp; a_{25} &amp;= -f\left(1 +
\frac{y^2}{f^2}\right) &amp; a_{26} &amp;= -x
\end{aligned}
\end{equation}
\]</span></p>
<h2 id="è§£ç®—æ­¥éª¤">3. è§£ç®—æ­¥éª¤</h2>
<p>ç»¼ä¸Šæ‰€è¿°ï¼Œç©ºé—´åæ–¹äº¤ä¼šçš„æ±‚è§£è¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<ol type="1">
<li>è·å–å·²çŸ¥æ•°æ®ï¼šä»æ‘„å½±èµ„æ–™ä¸­æŸ¥å–åƒç‰‡æ¯”ä¾‹å°º<span
class="math inline">\(1/m\)</span>ï¼Œå¹³å‡èˆªé«˜ï¼Œå†…æ–¹å…ƒç´ <span
class="math inline">\(x_0\)</span>ã€<span
class="math inline">\(y_0\)</span>ã€<span
class="math inline">\(f\)</span>ï¼›ä»å¤–ä¸šæµ‹é‡æˆæœä¸­ï¼Œè·å–æ§åˆ¶ç‚¹çš„åœ°é¢æµ‹é‡åæ ‡<span
class="math inline">\(X_t\)</span>ã€<span
class="math inline">\(Y_t\)</span>ã€<span
class="math inline">\(Z_t\)</span>ï¼Œå¹¶è½¬åŒ–æˆåœ°é¢æ‘„å½±æµ‹é‡åæ ‡<span
class="math inline">\(X\)</span>ã€<span
class="math inline">\(Y\)</span>ã€<span
class="math inline">\(Z\)</span>ã€‚</li>
<li>é‡æµ‹æ§åˆ¶ç‚¹çš„åƒç‚¹åæ ‡ï¼šå°†æ§åˆ¶ç‚¹æ ‡åˆºåœ¨åƒç‰‡ä¸Šï¼Œåˆ©ç”¨ç«‹ä½“åæ ‡é‡æµ‹ä»ªé‡æµ‹æ§åˆ¶ç‚¹çš„åƒæ¡†æ ‡åæ ‡ï¼Œå¹¶ç»åƒç‚¹åæ ‡æ”¹æ­£ï¼Œå¾—åˆ°åƒç‚¹åæ ‡<span
class="math inline">\(x\)</span>ã€<span
class="math inline">\(y\)</span>ã€‚</li>
<li>ç¡®å®šæœªçŸ¥æ•°çš„åˆå§‹å€¼ï¼šåœ¨ç«–ç›´æ‘„å½±æƒ…å†µä¸‹ï¼Œè§’å…ƒç´ çš„åˆå§‹å€¼ä¸º<span
class="math inline">\(0\)</span>ï¼Œå³<span
class="math inline">\(\varphi_0 = \omega_0 = \kappa_0 =
0\)</span>ï¼›çº¿å…ƒç´ ä¸­ï¼Œ<span class="math inline">\(Z_{s0} = H =
mf\)</span>ï¼Œ<span class="math inline">\(X_{s0}\)</span>ã€<span
class="math inline">\(Y_{s0}\)</span>çš„å–å€¼å¯ç”¨å››ä¸ªè§’ä¸Šæ§åˆ¶ç‚¹åæ ‡çš„å¹³å‡å€¼ï¼Œå³ï¼š<span
class="math inline">\(X_{s0} = \frac{1}{4} \sum_{i = 1}^{4}
X_i\)</span>ï¼Œ<span class="math inline">\(Y_{s0} = \frac{1}{4} \sum_{i =
1}^{4} Y_i\)</span>ã€‚</li>
<li>è®¡ç®—æ—‹è½¬çŸ©é˜µ<span
class="math inline">\(R\)</span>ï¼šåˆ©ç”¨è§’å…ƒç´ çš„è¿‘ä¼¼å€¼è®¡ç®—æ–¹å‘ä½™å¼¦å€¼ï¼Œç»„æˆ<span
class="math inline">\(R\)</span>é˜µã€‚</li>
<li>é€ç‚¹è®¡ç®—åƒç‚¹åæ ‡çš„è¿‘ä¼¼å€¼ï¼šåˆ©ç”¨æœªçŸ¥æ•°çš„è¿‘ä¼¼å€¼æŒ‰å…±çº¿æ–¹ç¨‹å¼è®¡ç®—æ§åˆ¶ç‚¹åƒç‚¹åæ ‡çš„è¿‘ä¼¼å€¼<span
class="math inline">\(\tilde{x}\)</span>ã€<span
class="math inline">\(\tilde{y}\)</span>ã€‚</li>
<li>ç»„æˆè¯¯å·®æ–¹ç¨‹å¼ï¼šæŒ‰å¼ <span
class="math inline">\(\eqref{å¯¹XYZåå¯¼}\eqref{å¯¹è§’åº¦åå¯¼åŒ–ç®€}\eqref{è¯¯å·®æ–¹ç¨‹}\)</span>
é€ç‚¹è®¡ç®—è¯¯å·®æ–¹ç¨‹å¼çš„ç³»æ•°å’Œå¸¸æ•°é¡¹ã€‚</li>
<li>ç»„æˆæ³•æ–¹ç¨‹å¼ï¼šè®¡ç®—æ³•æ–¹ç¨‹çš„ç³»æ•°çŸ©é˜µ<span
class="math inline">\(A^{\mathrm{T}}A\)</span>ä¸å¸¸æ•°é¡¹<span
class="math inline">\(A^{\mathrm{T}}L\)</span>ã€‚</li>
<li>è§£æ±‚å¤–æ–¹ä½å…ƒç´ ï¼šæ ¹æ®æ³•æ–¹ç¨‹ï¼ŒæŒ‰å¼<span
class="math inline">\(\eqref{å°é—­è§£}\)</span>è§£æ±‚å¤–æ–¹ä½å…ƒç´ æ”¹æ­£æ•°ï¼Œå¹¶ä¸ç›¸åº”çš„è¿‘ä¼¼å€¼æ±‚å’Œï¼Œå¾—åˆ°å¤–æ–¹ä½å…ƒç´ æ–°çš„è¿‘ä¼¼å€¼ã€‚</li>
<li>æ£€æŸ¥è®¡ç®—æ˜¯å¦æ”¶æ•›ï¼šå°†æ±‚å¾—çš„å¤–æ–¹ä½å…ƒç´ çš„æ”¹æ­£æ•°ä¸è§„å®šçš„é™å·®æ¯”è¾ƒï¼Œå°äºé™å·®åˆ™è®¡ç®—ç»ˆæ­¢ï¼Œå¦åˆ™ç”¨æ–°çš„è¿‘ä¼¼å€¼é‡å¤ç¬¬4è‡³ç¬¬8æ­¥éª¤çš„è®¡ç®—ï¼Œç›´åˆ°æ»¡è¶³è¦æ±‚ä¸ºæ­¢ã€‚</li>
</ol>
<h2 id="ç²¾åº¦">4. ç²¾åº¦</h2>
<p>ç”±å¹³å·®ç†è®ºå¯çŸ¥ï¼Œæ³•æ–¹ç¨‹ç³»æ•°çš„é€†çŸ©é˜µ <span
class="math inline">\((A^{\mathrm{T}}A)^{-1}\)</span>
ç­‰äºæœªçŸ¥æ•°çš„åå› æ•°é˜µ <span
class="math inline">\(Q_{x}\)</span>ï¼Œå› æ­¤å¯æŒ‰ä¸‹å¼è®¡ç®—æœªçŸ¥æ•°çš„ä¸­è¯¯å·®ï¼š
<span class="math display">\[
m_{i}=m_{0} \cdot \sqrt{Q_{ii}}
\]</span> å¼ä¸­ï¼Œ<span class="math inline">\(i\)</span>
è¡¨ç¤ºç›¸åº”çš„æœªçŸ¥æ•°ï¼Œ<span class="math inline">\(Q_{ii}\)</span> ä¸º <span
class="math inline">\(Q_{x}\)</span> é˜µä¸­çš„ä¸»å¯¹è§’çº¿å…ƒç´ ï¼Œ<span
class="math inline">\(m_{0}\)</span> ç§°ä¸ºå•ä½æƒä¸­è¯¯å·®ï¼Œè®¡ç®—å…¬å¼ä¸ºï¼š
<span class="math display">\[
m_{0}=\pm\sqrt{\frac{\|V^TV\|_{2}^{2}}{2n - 6}}
\]</span> è¿™é‡Œï¼Œ<span class="math inline">\(n\)</span>
è¡¨ç¤ºæ§åˆ¶ç‚¹çš„æ€»æ•°ã€‚</p>
<h2 id="python-å®ç°">5. python å®ç°</h2>
<p>ä»¥ <a href="#reference1">[1]</a> çš„è¯¾åé¢˜ä¸ºä¾‹</p>
<p>ç›®å½•ç»“æ„ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€mian.py</span><br><span class="line">â”œâ”€data.txt</span><br><span class="line">â”œâ”€result.txt</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><figcaption><span>main.py</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> numpy <span class="keyword">import</span> cos, sin</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_data</span>(<span class="params">path</span>):</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(path, <span class="string">&quot;r&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        raw_data = f.read()</span><br><span class="line">        <span class="comment"># print(raw_data)</span></span><br><span class="line">    raw_data = raw_data.split(<span class="string">&quot;\n&quot;</span>)</span><br><span class="line">    data = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="built_in">len</span>(raw_data)):</span><br><span class="line">        tmp = [np.float64(it) <span class="keyword">for</span> it <span class="keyword">in</span> raw_data[i].split()]</span><br><span class="line">        data.extend([tmp])</span><br><span class="line">    <span class="keyword">return</span> np.array(data)[:, <span class="number">1</span>:]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">data_path = <span class="string">&quot;data.txt&quot;</span></span><br><span class="line">save_path = <span class="string">&quot;result.txt&quot;</span></span><br><span class="line"></span><br><span class="line">m = <span class="number">4_0000</span>  <span class="comment"># æ¯”ä¾‹å°º 1/m</span></span><br><span class="line">f = <span class="number">0.15324</span>  <span class="comment"># ä¸»è·</span></span><br><span class="line">x0, y0 = <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">phi, omega, kappa = <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>  <span class="comment"># ä¿¯ä»°è§’ã€æ¨ªæ‘‡è§’å’Œåèˆªè§’</span></span><br><span class="line"></span><br><span class="line">data = get_data(data_path)  <span class="comment"># åƒåæ ‡å’Œåœ°é¢åæ ‡æ•°æ®</span></span><br><span class="line">n_points = data.shape[<span class="number">0</span>]  <span class="comment"># æ§åˆ¶ç‚¹çš„ä¸ªæ•°</span></span><br><span class="line">img_coord = data[:, :<span class="number">2</span>] / <span class="number">1000</span>  <span class="comment"># åƒç‚¹åæ ‡ï¼Œé™¤ä»¥ 1000 å°†å•ä½æ¢ç®—ä¸º m</span></span><br><span class="line">ground_coord = data[:, <span class="number">2</span>:]  <span class="comment"># åœ°é¢åæ ‡</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Xs = np.mean(ground_coord[:, <span class="number">0</span>])</span><br><span class="line">Ys = np.mean(ground_coord[:, <span class="number">1</span>])</span><br><span class="line">Zs = m * f</span><br><span class="line"><span class="comment"># print(f&quot;å¤–æ–¹ä½å…ƒç´ åˆå§‹å€¼ï¼š&#123;Xs,Ys,Zs,phi,omega,kappa&#125;&quot;)</span></span><br><span class="line"></span><br><span class="line">R = np.zeros((<span class="number">3</span>, <span class="number">3</span>))  <span class="comment"># æ—‹è½¬çŸ©é˜µ</span></span><br><span class="line">x = y = np.zeros((n_points, <span class="number">1</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># V = AX - L</span></span><br><span class="line">V = L = np.zeros((<span class="number">2</span> * n_points, <span class="number">1</span>))</span><br><span class="line">A = np.zeros((<span class="number">2</span> * n_points, <span class="number">6</span>))</span><br><span class="line">X = np.zeros((<span class="number">6</span>, <span class="number">1</span>))</span><br><span class="line"></span><br><span class="line">n_iter, MAX_ITER = <span class="number">0</span>, <span class="number">150</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    a1 = R[<span class="number">0</span>, <span class="number">0</span>] = cos(phi) * cos(kappa) - sin(phi) * sin(omega) * sin(kappa)</span><br><span class="line">    a2 = R[<span class="number">0</span>, <span class="number">1</span>] = (-<span class="number">1.0</span>) * cos(phi) * sin(kappa) - sin(phi) * sin(omega) * cos(kappa)</span><br><span class="line">    a3 = R[<span class="number">0</span>, <span class="number">2</span>] = (-<span class="number">1.0</span>) * sin(phi) * cos(omega)</span><br><span class="line">    b1 = R[<span class="number">1</span>, <span class="number">0</span>] = cos(omega) * sin(kappa)</span><br><span class="line">    b2 = R[<span class="number">1</span>, <span class="number">1</span>] = cos(omega) * cos(kappa)</span><br><span class="line">    b3 = R[<span class="number">1</span>, <span class="number">2</span>] = (-<span class="number">1.0</span>) * sin(omega)</span><br><span class="line">    c1 = R[<span class="number">2</span>, <span class="number">0</span>] = sin(phi) * cos(kappa) + cos(phi) * sin(omega) * sin(kappa)</span><br><span class="line">    c2 = R[<span class="number">2</span>, <span class="number">1</span>] = (-<span class="number">1.0</span>) * sin(phi) * sin(kappa) + cos(phi) * sin(omega) * cos(kappa)</span><br><span class="line">    c3 = R[<span class="number">2</span>, <span class="number">2</span>] = cos(phi) * cos(omega)</span><br><span class="line"></span><br><span class="line">    X_bar = a1 * (ground_coord[:, <span class="number">0</span>] - Xs) + b1 * (ground_coord[:, <span class="number">1</span>] - Ys) + c1 * (ground_coord[:, <span class="number">2</span>] - Zs)</span><br><span class="line">    Y_bar = a2 * (ground_coord[:, <span class="number">0</span>] - Xs) + b2 * (ground_coord[:, <span class="number">1</span>] - Ys) + c2 * (ground_coord[:, <span class="number">2</span>] - Zs)</span><br><span class="line">    Z_bar = a3 * (ground_coord[:, <span class="number">0</span>] - Xs) + b3 * (ground_coord[:, <span class="number">1</span>] - Ys) + c3 * (ground_coord[:, <span class="number">2</span>] - Zs)</span><br><span class="line"></span><br><span class="line">    x = (-<span class="number">1.0</span>) * f * X_bar / Z_bar</span><br><span class="line">    y = (-<span class="number">1.0</span>) * f * Y_bar / Z_bar</span><br><span class="line"></span><br><span class="line">    L = (img_coord - np.array((x, y)).T).flatten()</span><br><span class="line">    H = Zs - ground_coord[:, <span class="number">2</span>]</span><br><span class="line"></span><br><span class="line">    A[::<span class="number">2</span>, <span class="number">0</span>] = (-<span class="number">1.0</span>) * f / H</span><br><span class="line">    A[::<span class="number">2</span>, <span class="number">1</span>] = <span class="number">0</span></span><br><span class="line">    A[::<span class="number">2</span>, <span class="number">2</span>] = (-<span class="number">1.0</span>) * x / H</span><br><span class="line">    A[::<span class="number">2</span>, <span class="number">3</span>] = (-<span class="number">1.0</span>) * f * (<span class="number">1</span> + x**<span class="number">2</span> / f**<span class="number">2</span>)</span><br><span class="line">    A[::<span class="number">2</span>, <span class="number">4</span>] = (-<span class="number">1.0</span>) * x * y / f</span><br><span class="line">    A[::<span class="number">2</span>, <span class="number">5</span>] = y</span><br><span class="line"></span><br><span class="line">    A[<span class="number">1</span>::<span class="number">2</span>, <span class="number">0</span>] = <span class="number">0</span></span><br><span class="line">    A[<span class="number">1</span>::<span class="number">2</span>, <span class="number">1</span>] = (-<span class="number">1.0</span>) * f / H</span><br><span class="line">    A[<span class="number">1</span>::<span class="number">2</span>, <span class="number">2</span>] = (-<span class="number">1.0</span>) * y / H</span><br><span class="line">    A[<span class="number">1</span>::<span class="number">2</span>, <span class="number">3</span>] = (-<span class="number">1.0</span>) * x * y / f</span><br><span class="line">    A[<span class="number">1</span>::<span class="number">2</span>, <span class="number">4</span>] = (-<span class="number">1.0</span>) * f * (<span class="number">1</span> + y**<span class="number">2</span> / f**<span class="number">2</span>)</span><br><span class="line">    A[<span class="number">1</span>::<span class="number">2</span>, <span class="number">5</span>] = (-<span class="number">1.0</span>) * x</span><br><span class="line"></span><br><span class="line">    ATA_inv = np.linalg.inv(A.T @ A)</span><br><span class="line">    X = ATA_inv @ A.T @ L</span><br><span class="line"></span><br><span class="line">    Xs += X[<span class="number">0</span>]</span><br><span class="line">    Ys += X[<span class="number">1</span>]</span><br><span class="line">    Zs += X[<span class="number">2</span>]</span><br><span class="line">    phi += X[<span class="number">3</span>]</span><br><span class="line">    omega += X[<span class="number">4</span>]</span><br><span class="line">    kappa += X[<span class="number">5</span>]</span><br><span class="line"></span><br><span class="line">    n_iter += <span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> (X[<span class="number">3</span>] &lt; <span class="number">1e-6</span> <span class="keyword">and</span> X[<span class="number">4</span>] &lt; <span class="number">1e-6</span> <span class="keyword">and</span> X[<span class="number">5</span>] &lt; <span class="number">1e-6</span>) <span class="keyword">or</span> (n_iter &gt; MAX_ITER):</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># print(&quot;è¿­ä»£æ¬¡æ•°:%0.f\n&quot; % n_iter)</span></span><br><span class="line"></span><br><span class="line">R[<span class="number">0</span>, <span class="number">0</span>] = cos(phi) * cos(kappa) - sin(phi) * sin(omega) * sin(kappa)</span><br><span class="line">R[<span class="number">0</span>, <span class="number">1</span>] = (-<span class="number">1.0</span>) * cos(phi) * sin(kappa) - sin(phi) * sin(omega) * cos(kappa)</span><br><span class="line">R[<span class="number">0</span>, <span class="number">2</span>] = (-<span class="number">1.0</span>) * sin(phi) * cos(omega)</span><br><span class="line">R[<span class="number">1</span>, <span class="number">0</span>] = cos(omega) * sin(kappa)</span><br><span class="line">R[<span class="number">1</span>, <span class="number">1</span>] = cos(omega) * cos(kappa)</span><br><span class="line">R[<span class="number">1</span>, <span class="number">2</span>] = (-<span class="number">1.0</span>) * sin(omega)</span><br><span class="line">R[<span class="number">2</span>, <span class="number">0</span>] = sin(phi) * cos(kappa) + cos(phi) * sin(omega) * sin(kappa)</span><br><span class="line">R[<span class="number">2</span>, <span class="number">1</span>] = (-<span class="number">1.0</span>) * sin(phi) * sin(kappa) + cos(phi) * sin(omega) * cos(kappa)</span><br><span class="line">R[<span class="number">2</span>, <span class="number">2</span>] = cos(phi) * cos(omega)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç²¾åº¦è®¡ç®—</span></span><br><span class="line">V = A @ X - L</span><br><span class="line">VV = np.<span class="built_in">sum</span>(np.linalg.norm(V, <span class="built_in">ord</span>=<span class="number">2</span>) ** <span class="number">2</span>)</span><br><span class="line">m0 = np.sqrt(VV / (<span class="number">2</span> * n_points - <span class="number">6</span>))</span><br><span class="line">Qx = ATA_inv.diagonal()</span><br><span class="line">m = m0 * np.sqrt(Qx)</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(save_path, <span class="string">&quot;w&quot;</span>, encoding=<span class="string">&quot;utf-8&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.writelines(<span class="string">&quot;å¤–æ–¹ä½å…ƒç´ åŠå…¶ç²¾åº¦ï¼š \n&quot;</span>)</span><br><span class="line">    f.writelines(<span class="string">f&quot;Xs:<span class="subst">&#123;Xs:<span class="number">.6</span>f&#125;</span>  m:Â±<span class="subst">&#123;m[<span class="number">0</span>]:<span class="number">.6</span>f&#125;</span>\n&quot;</span>)</span><br><span class="line">    f.writelines(<span class="string">f&quot;Ys:<span class="subst">&#123;Ys:<span class="number">.6</span>f&#125;</span>  m:Â±<span class="subst">&#123;m[<span class="number">1</span>]:<span class="number">.6</span>f&#125;</span>\n&quot;</span>)</span><br><span class="line">    f.writelines(<span class="string">f&quot;Zs:<span class="subst">&#123;Zs:<span class="number">.6</span>f&#125;</span>  m:Â±<span class="subst">&#123;m[<span class="number">2</span>]:<span class="number">.6</span>f&#125;</span>\n&quot;</span>)</span><br><span class="line">    f.writelines(<span class="string">f&quot;phi:<span class="subst">&#123;phi:<span class="number">.6</span>f&#125;</span>  m:Â±<span class="subst">&#123;m[<span class="number">3</span>]:<span class="number">.6</span>f&#125;</span>\n&quot;</span>)</span><br><span class="line">    f.writelines(<span class="string">f&quot;omega:<span class="subst">&#123;omega:<span class="number">.6</span>f&#125;</span>  m:Â±<span class="subst">&#123;m[<span class="number">4</span>]:<span class="number">.6</span>f&#125;</span>\n&quot;</span>)</span><br><span class="line">    f.writelines(<span class="string">f&quot;kappa:<span class="subst">&#123;kappa:<span class="number">.6</span>f&#125;</span>  m:Â±<span class="subst">&#123;m[<span class="number">5</span>]:<span class="number">.6</span>f&#125;</span>\n&quot;</span>)</span><br><span class="line">    f.writelines(<span class="string">&quot;\næ—‹è½¬çŸ©é˜µï¼š\n&quot;</span>)</span><br><span class="line">    f.write(<span class="string">f&quot;<span class="subst">&#123;R&#125;</span>&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><figcaption><span>data.txt</span></figcaption><table><tr><td class="code"><pre><span class="line">NO.            x(mm)          y(mm)          X(m)           Y(m)           Z(m)</span><br><span class="line">1              -86.15         -68.99         36589.41       25273.32       2195.17</span><br><span class="line">2              -53.40         82.21          37631.08       31324.51       728.69         </span><br><span class="line">3              -14.78         -76.63         39100.97       24934.98       2386.50</span><br><span class="line">4              10.46          64.43          40426.54       30319.81       757.31</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><figcaption><span>result.txt</span></figcaption><table><tr><td class="code"><pre><span class="line">å¤–æ–¹ä½å…ƒç´ åŠå…¶ç²¾åº¦ï¼š </span><br><span class="line">Xs:39795.443401  m:Â±1.125402</span><br><span class="line">Ys:27476.464840  m:Â±1.243674</span><br><span class="line">Zs:7572.688331  m:Â±0.483771</span><br><span class="line">phi:-0.003986  m:Â±0.000182</span><br><span class="line">omega:0.002114  m:Â±0.000160</span><br><span class="line">kappa:-0.067578  m:Â±0.000072</span><br><span class="line"></span><br><span class="line">æ—‹è½¬çŸ©é˜µï¼š</span><br><span class="line">[[ 0.99770901  0.06753409  0.00398554]</span><br><span class="line"> [-0.06752607  0.99771527 -0.00211367]</span><br><span class="line"> [-0.00411918  0.0018397   0.99998982]]</span><br></pre></td></tr></table></figure>
<p>å¦‚æœä½ è§‰å¾—è¿™ç¯‡åšå®¢å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼Œä¸å¦¨åœ¨ GitHub ä¸Šç»™å®ƒç‚¹ä¸ª
starğŸŒŸï¼Œè¿™å°†æ˜¯å¯¹æˆ‘è«å¤§çš„é¼“åŠ±ã€‚<br />
<a
href="https://github.com/Blackspace2/space-resection-of-single-image.git">Github
åœ°å€</a></p>
<h2 id="å‚è€ƒèµ„æ–™">6. å‚è€ƒèµ„æ–™</h2>
<p><strong>[1]</strong>
ç‹ä½©å†›ï¼Œå¾äºšæ˜ç­‰ç¼–è‘—.æ‘„å½±æµ‹é‡å­¦[M].æ­¦æ±‰ï¼šæ­¦æ±‰å¤§å­¦å‡ºç‰ˆç¤¾ï¼Œ2016.5 <span
id="reference1"></span></p>
]]></content>
      <categories>
        <category>è®¡ç®—æœºè§†è§‰</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>åæ–¹äº¤ä¼š</tag>
        <tag>æ‘„å½±æµ‹é‡</tag>
      </tags>
  </entry>
  <entry>
    <title>python è£…é¥°å™¨</title>
    <url>/2025/01/17/python-%E8%A3%85%E9%A5%B0%E5%99%A8/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><span id="more"></span>
<h2 id="è£…é¥°å™¨ç®€ä»‹">1. è£…é¥°å™¨ç®€ä»‹</h2>
<h3 id="å‡½æ•°è£…é¥°å‡½æ•°">1.1 å‡½æ•°è£…é¥°å‡½æ•°</h3>
<p>python ä¸­çš„è£…é¥°å™¨ä¹Ÿæ˜¯<strong>è¯­æ³•ç³–</strong>çš„ä¸€ç§ã€‚<br />
é€šå¸¸å¯ä»¥æŠŠè£…é¥°å™¨ç†è§£ä¸ºè¾“å…¥å’Œè¾“å‡ºéƒ½æ˜¯å‡½æ•°çš„å‡½æ•°ã€‚
å‡½æ•°è°ƒç”¨å‡½æ•°è¿”å›ä¸€ä¸ªå‡½æ•° (æˆ–è€…è¯´ callab)ã€‚</p>
<p>è£…é¥°å™¨çš„ä¸€å¤§ç‰¹æ€§æ˜¯ï¼Œèƒ½æŠŠè¢«è£…é¥°çš„å‡½æ•°æ›¿æ¢æˆå…¶ä»–å‡½æ•°ï¼›ç¬¬äºŒä¸ªç‰¹æ€§æ˜¯ï¼Œè£…é¥°å™¨åœ¨åŠ è½½æ¨¡å—æ—¶ç«‹å³æ‰§è¡Œï¼Œå‡½æ•°è£…é¥°å™¨åœ¨å¯¼å…¥æ¨¡å—æ—¶ç«‹å³æ‰§è¡Œï¼Œè€Œè¢«è£…é¥°çš„å‡½æ•°åªåœ¨æ˜ç¡®è°ƒç”¨æ—¶è¿è¡Œã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿™æ˜¯ä¸€ä¸ªè®¡æ—¶çš„è£…é¥°å™¨</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">timeit</span>(<span class="params">f</span>):</span><br><span class="line">    <span class="comment"># ä½¿ç”¨ *args, **kwargs å…è®¸å‡½æ•°æ¥å—å˜é•¿çš„å‚æ•°</span></span><br><span class="line">    <span class="comment"># å°±æ˜¯è¯´ä½ è¿™ä¸ªå‡½æ•°æ¥äº†ä»€ä¹ˆå‚æ•° æˆ‘éƒ½èƒ½æ¥å—</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">wrapper</span>(<span class="params">*args, **kwargs</span>):</span><br><span class="line">        start = time.time()</span><br><span class="line">        ret = f(*args, **kwargs)</span><br><span class="line">        <span class="built_in">print</span>(time.time() - start)</span><br><span class="line">        <span class="keyword">return</span> ret</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> wrapper</span><br><span class="line"></span><br><span class="line"><span class="meta">@timeit</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">myfunc</span>(<span class="params">x</span>):</span><br><span class="line">    time.sleep(x)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç­‰ä»·äºä¸‹é¢è¿™ç§å†™æ³•</span></span><br><span class="line"><span class="comment"># def myfunc(x):</span></span><br><span class="line"><span class="comment">#     time.sleep(x)</span></span><br><span class="line"><span class="comment"># myfunc = timeit(myfunc)</span></span><br></pre></td></tr></table></figure>
<p>å¸¦å‚æ•°çš„è£…é¥°å™¨ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">timeit</span>(<span class="params">iteration</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">inner</span>(<span class="params">f</span>):</span><br><span class="line"></span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">wrapper</span>(<span class="params">*args, **kwargs</span>):</span><br><span class="line">            start = time.time()</span><br><span class="line">            <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(iteration):</span><br><span class="line">                ret = f(*args, **kwargs)</span><br><span class="line">            <span class="built_in">print</span>(time.time() - start)</span><br><span class="line">            <span class="keyword">return</span> ret</span><br><span class="line">        <span class="keyword">return</span> wrapper</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> inner</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@timeit(<span class="params"><span class="number">10</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">double</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="keyword">return</span> x * <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸Šé¢ç­‰ä»·äºï¼š</span></span><br><span class="line"><span class="comment"># def double(x):</span></span><br><span class="line"><span class="comment">#     return x * 2</span></span><br><span class="line"><span class="comment"># double = timeit(10)(double)</span></span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œ <code>timeit(10)</code>
çš„è¿”å›å€¼ä¹Ÿæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶ä¸”è¿™ä¸ªå‡½æ•°çš„è¾“å…¥å’Œè¾“å‡ºéƒ½æ˜¯å‡½æ•°</p>
<h3 id="ç±»è£…é¥°å‡½æ•°">1.2 ç±»è£…é¥°å‡½æ•°</h3>
<p>ç±»è°ƒç”¨ä¸€ä¸ªå‡½æ•°è¿”å›ä¸€ä¸ª objectï¼Œä¾ç„¶æ˜¯ callable</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Timer</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, func</span>):</span><br><span class="line">        <span class="variable language_">self</span>.func = func</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å˜ä¸º callable çš„</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__call__</span>(<span class="params">self, *args, **kwargs</span>):</span><br><span class="line">        start = time.time()</span><br><span class="line">        ret = <span class="variable language_">self</span>.func(*args, **kwargs)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;Time: <span class="subst">&#123;time.time() - start&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> ret</span><br><span class="line"></span><br><span class="line"><span class="meta">@Timer</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">add</span>(<span class="params">a, b</span>):</span><br><span class="line">    <span class="keyword">return</span> a + b</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç­‰ä»·äº</span></span><br><span class="line"><span class="comment"># def add(a, b):</span></span><br><span class="line"><span class="comment">#     return a + b</span></span><br><span class="line"><span class="comment"># add = Timer(add)</span></span><br><span class="line"><span class="comment"># ç›¸å½“äºæŠŠä¸€ä¸ªå‡½æ•°å˜ä¸ºäº†ä¸€ä¸ªç±»çš„å¯¹è±¡</span></span><br><span class="line"><span class="keyword">if</span> __name__==<span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    <span class="built_in">print</span>(add(<span class="number">2</span>, <span class="number">3</span>))</span><br></pre></td></tr></table></figure>
<p>å¸¦å‚æ•°çš„ç±»ä½œä¸ºè£…é¥°å™¨ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Timer</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, prefix</span>):</span><br><span class="line">        <span class="variable language_">self</span>.prefix = prefix</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å˜ä¸º callable çš„</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__call__</span>(<span class="params">self, prefix</span>):</span><br><span class="line"></span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">wrapper</span>(<span class="params">self, *args, **kwargs</span>):</span><br><span class="line">            start = time.time()</span><br><span class="line">            ret = <span class="variable language_">self</span>.func(*args, **kwargs)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;self.prefix&#125;</span><span class="subst">&#123;time.time() - start&#125;</span>&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span> ret</span><br><span class="line">        <span class="keyword">return</span> wrapper</span><br><span class="line"></span><br><span class="line"><span class="meta">@Timer(<span class="params">prefix=<span class="string">&quot;cost_time:&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">add</span>(<span class="params">a, b</span>):</span><br><span class="line">    <span class="keyword">return</span> a + b</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç­‰ä»·äº</span></span><br><span class="line"><span class="comment"># def add(a, b):</span></span><br><span class="line"><span class="comment">#     return a + b</span></span><br><span class="line"><span class="comment"># add = Timer(prefix=&quot;cost_time&quot;)(add)</span></span><br><span class="line"><span class="comment"># ç›¸å½“äºæŠŠä¸€ä¸ªå‡½æ•°å˜ä¸ºäº†ä¸€ä¸ªç±»çš„å¯¹è±¡</span></span><br><span class="line"><span class="keyword">if</span> __name__==<span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    <span class="built_in">print</span>(add(<span class="number">2</span>, <span class="number">3</span>))</span><br></pre></td></tr></table></figure>
<h3 id="å‡½æ•°è£…é¥°ç±»">1.3 å‡½æ•°è£…é¥°ç±»</h3>
<p>è£…é¥°å™¨å»è£…é¥°ç±»</p>
<p>å½“æ‰“å°ä¸€ä¸ªè‡ªå®šä¹‰ç±»çš„æ—¶å€™ï¼Œä¸ä¼šè¾“å‡ºä»»ä½•æœ‰ä»·å€¼çš„å†…å®¹ï¼Œåªä¼šå‘Šè¯‰ä½ è¿™æ˜¯ä¸€ä¸ªäººä»€ä¹ˆç±»ï¼Œé™¤éé‡è½½ä»–çš„
<code>__str__</code> æ–¹æ³•æ¥æ”¹å˜ä»–çš„ <code>print</code>
ç»“æœï¼Œä½†æ˜¯æ¯æ¬¡éƒ½é‡è½½å¾ˆéº»çƒ¦ï¼Œæ‰€ä»¥å¯ä»¥å†™ä¸€ä¸ªè£…é¥°å™¨æ¥è£…é¥°ç±»ç”¨äºé‡è½½å…¶
<code>__str__</code> æ–¹æ³•ã€‚ä¸‹é¢å°±æ˜¯ä¸€ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">add_str</span>(<span class="params">cls</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__str__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">str</span>(<span class="variable language_">self</span>.__dict__)</span><br><span class="line">    cls.__str__ = __str__</span><br><span class="line">    <span class="keyword">return</span> cls</span><br><span class="line"></span><br><span class="line"><span class="meta">@add_str</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyObject</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, a, b</span>):</span><br><span class="line">        <span class="variable language_">self</span>.a = a</span><br><span class="line">        <span class="variable language_">self</span>.b = b</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç­‰ä»·äºï¼š</span></span><br><span class="line"><span class="comment"># class MyObject:</span></span><br><span class="line"><span class="comment">#     def __init__(self, a, b):</span></span><br><span class="line"><span class="comment">#         self.a = a</span></span><br><span class="line"><span class="comment">#         self.b = b</span></span><br><span class="line"><span class="comment"># add_str(MyObject)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__==<span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    obj = MyObject(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">    <span class="built_in">print</span>(obj)</span><br></pre></td></tr></table></figure>
<h3 id="ç±»è£…é¥°ç±»">1.4 ç±»è£…é¥°ç±»ï¼Ÿ</h3>
<p>emmmï¼Œæœ¬è´¨ä¸Šå…¶å®è¿˜æ˜¯å‡½æ•°ï¼Œæ˜¯ä¸€ä¸ªè¾“å…¥å’Œè¾“å‡ºéƒ½æ˜¯ç±»çš„å‡½æ•°</p>
<h3 id="å°ç»“">1.5 å°ç»“</h3>
<p>å…¶å®åªè¦è½¬åŒ–ä¸ºç­‰ä»·å½¢å¼å°±çŸ¥é“è£…é¥°å™¨åœ¨å¹²ä»€ä¹ˆäº†ï¼Œå› ä¸ºè£…é¥°å™¨çš„æœ¬è´¨æ¯•ç«Ÿè¿˜æ˜¯è¯­æ³•ç³–ã€‚</p>
<h2 id="ä¸€äº›å¸¸è§çš„è£…é¥°å™¨">2. ä¸€äº›å¸¸è§çš„è£…é¥°å™¨</h2>
<h3 id="staticmethod">2.1 <span class="citation"
data-cites="staticmethod">@staticmethod</span></h3>
<p>ç”¨äºå®šä¹‰é™æ€æ–¹æ³•ï¼Œæ„å‘³ç€è¢«å®ƒè£…é¥°çš„å‡½æ•°ä¸éœ€è¦åˆ›å»ºç±»çš„å®ä¾‹ï¼ˆä¸éœ€è¦ä¼ é€’
<code>self</code> å‚æ•°ï¼‰å°±å¯ä»¥ç›´æ¥è°ƒç”¨ï¼Œå³å˜ä¸ºé™æ€å‡½æ•°ã€‚</p>
<h3 id="classmethod">2.2 <span class="citation"
data-cites="classmethod">@classmethod</span></h3>
<p>ç”¨äºå®šä¹‰ç±»çš„æ–¹æ³•ï¼Œè¢«å®ƒè£…é¥°çš„å‡½æ•°ç¬¬ä¸€ä¸ªå‚æ•°åº”è¯¥ä¸ºç±» <code>cls</code>
ï¼Œå˜ä¸ºç±»çš„æ–¹æ³•ï¼Œä½†ä¸èƒ½è®¿é—®å®ä¾‹çš„å±æ€§ï¼Œå› ä¸ºä¼ å…¥çš„æ˜¯ç±»æœ¬èº«
<code>cls</code> ï¼Œè€Œä¸æ˜¯å®ä¾‹ <code>self</code> ã€‚</p>
<p>ç±»æ–¹æ³•å¯ä»¥è®¿é—®ç±»çš„å±æ€§å’Œå…¶ä»–ç±»æ–¹æ³•ï¼Œä½†ä¸èƒ½è®¿é—®å®ä¾‹çš„å±æ€§ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span>:</span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">static_method</span>(<span class="params">x, y</span>):</span><br><span class="line">        <span class="keyword">return</span> x + y</span><br><span class="line"></span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">class_method</span>(<span class="params">cls, x, y</span>):</span><br><span class="line">        <span class="keyword">return</span> x * y</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(MyClass.static_method(<span class="number">2</span>, <span class="number">3</span>))  <span class="comment"># è¾“å‡º: 5</span></span><br><span class="line"><span class="built_in">print</span>(MyClass.class_method(<span class="number">2</span>, <span class="number">3</span>))   <span class="comment"># è¾“å‡º: 6</span></span><br></pre></td></tr></table></figure>
<h3 id="property">2.3 <span class="citation"
data-cites="property">@property</span></h3>
<p>ç”¨äºå°†ä¸€ä¸ªæ–¹æ³•è½¬åŒ–ä¸ºå±æ€§ï¼Œå¯ä»¥è®©ä½ åœ¨è®¿é—®å±æ€§æ—¶è°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œä»è€Œå°è£…å¯¹å±æ€§çš„è®¿é—®ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Circle</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, radius</span>):</span><br><span class="line">        <span class="variable language_">self</span>._radius = radius   <span class="comment"># ç§æœ‰å±æ€§</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">radius</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">self</span>._radius  <span class="comment"># åªè¯»å±æ€§     </span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># @&lt;property_name&gt;.setter æ˜¯ä¸€ä¸ªè£…é¥°å™¨ï¼Œ</span></span><br><span class="line">    <span class="comment"># ç”¨äºä¸º @property è£…é¥°çš„å±æ€§æä¾›è®¾ç½®å™¨å³å®šä¹‰å±æ€§çš„å†™æ“ä½œã€‚</span></span><br><span class="line">    <span class="comment"># é€šè¿‡è¿™ä¸ªè£…é¥°å™¨ï¼Œä½ å¯ä»¥æŒ‡å®šå¦‚ä½•ä¿®æ”¹æŸä¸ªå±æ€§çš„å€¼ï¼Œä»è€Œè®©è¿™ä¸ªå±æ€§å˜ä¸ºå¯å†™çš„ã€‚</span></span><br><span class="line"><span class="meta">    @radius.setter</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">radius</span>(<span class="params">self, value</span>):</span><br><span class="line">        <span class="keyword">if</span> value &lt; <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">&quot;Radius cannot be negative&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>._radius = value</span><br><span class="line"></span><br><span class="line">c = Circle(<span class="number">5</span>)</span><br><span class="line"><span class="built_in">print</span>(c.radius)  <span class="comment"># è¾“å‡º: 5</span></span><br><span class="line">c.radius = <span class="number">10</span>    <span class="comment"># è®¾ç½® radius</span></span><br><span class="line"><span class="built_in">print</span>(c.radius)  <span class="comment"># è¾“å‡º: 10</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>python</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>è£…é¥°å™¨</tag>
      </tags>
  </entry>
  <entry>
    <title>python å¸¸ç”¨è¯­æ³•ç³–</title>
    <url>/2025/01/17/python-%E5%B8%B8%E7%94%A8%E8%AF%AD%E6%B3%95%E7%B3%96/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><span id="more"></span>
<h2 id="æ•°å­—åˆ†éš”ç¬¦">1. æ•°å­—åˆ†éš”ç¬¦</h2>
<p>å½“æ•°å€¼è¾ƒå¤§æ—¶ï¼Œå¯ä»¥ç”¨æ•°å­—åˆ†éš”ç¬¦æ¥è¿›è¡Œåˆ’åˆ†</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = <span class="number">1_000_000</span> <span class="comment"># ç­‰åŒäº 1000000</span></span><br></pre></td></tr></table></figure>
<h2 id="äº¤æ¢å˜é‡å€¼">2. äº¤æ¢å˜é‡å€¼</h2>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a, b = b, a</span><br></pre></td></tr></table></figure>
<h2 id="è¿ç»­æ¯”è¾ƒå¼">3. è¿ç»­æ¯”è¾ƒå¼</h2>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="number">10</span> &lt; a &lt; <span class="number">20</span>:</span><br><span class="line">    <span class="comment"># do something</span></span><br></pre></td></tr></table></figure>
<h2 id="å­—ç¬¦ä¸²ä¹˜æ³•">4. å­—ç¬¦ä¸²ä¹˜æ³•</h2>
<p>å¯ç”¨äºå¿«é€Ÿæ„é€ å­—ç¬¦ä¸²</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;-&#x27;</span> * <span class="number">20</span>)</span><br></pre></td></tr></table></figure>
<h2 id="åˆ—è¡¨æ‹¼æ¥">5. åˆ—è¡¨æ‹¼æ¥</h2>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">b = [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]</span><br><span class="line">c = a + b  <span class="comment"># c = [1, 2, 3, 4, 5, 6]</span></span><br><span class="line"><span class="comment"># a.extend(b) åç›¸å½“äº a = a + b = [1, 2, 3, 4, 5, 6], a è¢«æ”¹å˜äº†</span></span><br><span class="line"><span class="comment"># ä¸èƒ½ç”¨ä¸€ä¸ªå˜é‡å»æ¥æ”¶ï¼Œå³ c = a.extend(b) è¿™æ · c çš„å€¼æ˜¯ Noneï¼Œå¹¶ä¸ä¼šèµ‹å€¼ç»™ c </span></span><br></pre></td></tr></table></figure>
<h2 id="æ‰“åŒ…è§£åŒ…">6. æ‰“åŒ…è§£åŒ…</h2>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = (<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line">x, y, z = a</span><br></pre></td></tr></table></figure>
<h2 id="with-è¯­å¥">7. with è¯­å¥</h2>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;file_name&quot;</span>,<span class="string">&#x27;mode&#x27;</span>) <span class="keyword">as</span> new_name:</span><br><span class="line">    <span class="comment"># do something</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>python</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>è¯­æ³•ç³–</tag>
      </tags>
  </entry>
  <entry>
    <title>git å‘½ä»¤æ€ç»´å¯¼å›¾</title>
    <url>/2025/01/17/git-%E5%91%BD%E4%BB%A4%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><span id="more"></span>
<figure>
<img src="git.jpg" alt="git å‘½ä»¤æ€ç»´å¯¼å›¾" />
<figcaption aria-hidden="true">git å‘½ä»¤æ€ç»´å¯¼å›¾</figcaption>
</figure>
<p>æ¥æºï¼š<a
href="https://github.com/toypipi/graph_bed/blob/master/image/20200810/git%E5%91%BD%E4%BB%A4%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE.jpg">github</a></p>
]]></content>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title>å¸¸ç”¨çŸ©é˜µè®¡ç®—</title>
    <url>/2025/01/15/%E5%B8%B8%E7%94%A8%E7%9F%A9%E9%98%B5%E8%AE%A1%E7%AE%97/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><span id="more"></span>
<h2 id="ç¬¦å·çº¦å®š">1. ç¬¦å·çº¦å®š</h2>
<p>æ­£å¸¸å°å†™å­—æ¯è¡¨ç¤ºæ ‡é‡ï¼›<br />
åŠ ç²—å°å†™å­—æ¯è¡¨ç¤ºå‘é‡ï¼Œæ— ç‰¹æ®Šè¯´æ˜æ—¶é€šå¸¸ä¸º<strong>åˆ—å‘é‡</strong>ï¼›<br />
å¤§å†™å­—æ¯è¡¨ç¤ºçŸ©é˜µï¼›</p>
<h2 id="æ±‚å¯¼">2. æ±‚å¯¼</h2>
<p>çŸ©é˜µæ±‚å¯¼ä¸­çš„ <strong>åˆ†å­å¸ƒå±€</strong> å’Œ <strong>åˆ†æ¯å¸ƒå±€</strong>
æ˜¯ä¸¤ç§ä¸åŒçš„çº¦å®šæ–¹å¼ï¼Œå®ƒä»¬çš„ä¸»è¦åŒºåˆ«åœ¨äºçº¦å®šå¯¼æ•°çš„ç»“æœçš„ç»´åº¦å’Œæ’åˆ—æ–¹å¼ï¼ŒäºŒè€…å‡æ­£ç¡®ï¼Œä½†éœ€è¦ä¿éšœåœ¨åŒä¸€ç¯å¢ƒä¸‹åªèƒ½ä½¿ç”¨ä¸€ç§å¸ƒå±€æ–¹å¼ã€‚<br />
åŒºåˆ†æ˜¯åˆ†å­å¸ƒå±€è¿˜æ˜¯åˆ†æ¯å¸ƒå±€ï¼Œå¯ä»¥çœ‹æ±‚å¯¼ç»“æœçš„ç¬¬ä¸€ä¸ªç»´åº¦æ˜¯ç­‰äºåˆ†å­çš„ç¬¬ä¸€ä¸ªç»´åº¦è¿˜æ˜¯åˆ†æ¯çš„ç¬¬ä¸€ä¸ªç»´åº¦ã€‚<br />
å¯ä»¥æ³¨æ„åˆ°åˆ†å­å¸ƒå±€å’Œåˆ†æ¯å¸ƒå±€çš„ç»“æœäº’ä¸ºè½¬ç½®ã€‚</p>
<div class="tabs" id="first-unique-name"><ul class="nav-tabs"><li class="tab active"><a href="#first-unique-name-1">åˆ†æ¯å¸ƒå±€</a></li><li class="tab"><a href="#first-unique-name-2">åˆ†å­å¸ƒå±€</a></li></ul><div class="tab-content"><div class="tab-pane active" id="first-unique-name-1"><p><span class="math display">\[\begin{equation*}
\begin{aligned}
\frac{\partial \boldsymbol{A}\boldsymbol{x}}{\partial
\boldsymbol{x}}&amp; =\boldsymbol{A}^T \\
\frac{\partial \boldsymbol{\alpha}^{T}\boldsymbol{x}}{\partial
\boldsymbol{x}}&amp; =\frac{\partial
\boldsymbol{x}^{T}\boldsymbol{\alpha}}{\partial
\boldsymbol{x}}=\boldsymbol{\alpha}\\
\frac{\partial\boldsymbol{y}^{T}\boldsymbol{Ax}}{\partial
\boldsymbol{A}} &amp;= \boldsymbol{y}\boldsymbol{x}^{T}  \\
\frac{\partial
\boldsymbol{x}^T\boldsymbol{A}\boldsymbol{x}}{\partial\boldsymbol{x}}&amp;=\boldsymbol{Ax}+\boldsymbol{A}^T\boldsymbol{x}\
\xlongequal{\text{if A is symmetric}} 2\boldsymbol{Ax}  \\
\end{aligned}
\end{equation*}
\]</span></p></div><div class="tab-pane" id="first-unique-name-2"><p><span class="math display">\[
\begin{equation*}
\begin{aligned}
\frac{\partial \boldsymbol{A}\boldsymbol{x}}{\partial
\boldsymbol{x}}&amp; =\boldsymbol{A}  \\
\frac{\partial \boldsymbol{\alpha}^{T}\boldsymbol{x}}{\partial
\boldsymbol{x}}&amp; =\frac{\partial
\boldsymbol{x}^{T}\boldsymbol{\alpha}}{\partial
\boldsymbol{x}}=\boldsymbol{\alpha}^T  \\
\frac{\partial\boldsymbol{y}^{T}\boldsymbol{Ax}}{\partial
\boldsymbol{A}} &amp;= \boldsymbol{y}^{T}\boldsymbol{x} \\
\frac{\partial
\boldsymbol{x}^T\boldsymbol{A}\boldsymbol{x}}{\partial\boldsymbol{x}}&amp;=\boldsymbol{x}^T\boldsymbol{A}^T+\boldsymbol{x}^T\boldsymbol{A}\
\xlongequal{\text{if A is symmetric}} 2\boldsymbol{x}^T \boldsymbol{A}
\\
\end{aligned}
\end{equation*}
\]</span></p></div></div></div>
<h2 id="é›…å¯æ¯”-jacobi-çŸ©é˜µ">3. é›…å¯æ¯” (Jacobi) çŸ©é˜µ</h2>
<h2 id="é»‘å¡-hessian-çŸ©é˜µ">4. é»‘å¡ (Hessian) çŸ©é˜µ</h2>
]]></content>
      <categories>
        <category>æ•°å­¦</category>
        <category>çŸ©é˜µè®¡ç®—</category>
      </categories>
      <tags>
        <tag>çŸ©é˜µè®¡ç®—</tag>
      </tags>
  </entry>
  <entry>
    <title>éçº¿æ€§æœ€å°äºŒä¹˜</title>
    <url>/2025/01/15/%E9%9D%9E%E7%BA%BF%E6%80%A7%E6%9C%80%E5%B0%8F%E4%BA%8C%E4%B9%98/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><span id="more"></span>
<h2 id="å‰è¨€">1. å‰è¨€</h2>
<p>å…ˆè€ƒè™‘ä¸€ä¸ªæœ€ç®€å•çš„æœ€å°äºŒä¹˜é—®é¢˜ï¼š <span class="math display">\[
\underset{x}{min} \frac{1}{2} \|f(\boldsymbol{x}) \|_{2}^{2}
\]</span> è¿™é‡Œè‡ªå˜é‡ <span class="math inline">\(\boldsymbol{x} \in
\mathbb{R}^n\)</span> ï¼Œ <span class="math inline">\(f\)</span>
æ˜¯ä»»æ„ä¸€ä¸ªéçº¿æ€§å‡½æ•°ï¼Œå‡è®¾ä»–æœ‰ <span class="math inline">\(m\)</span>
ç»´ï¼š <span class="math inline">\(f(\boldsymbol{x}) \in
\mathbb{R}^m\)</span> ã€‚</p>
<p>è€ƒè™‘ <span class="math inline">\(f\)</span>
çš„å½¢å¼åŸºæœ¬æœ‰ä¸¤ç§è§£å†³æ–¹æ³•ï¼šè§£ææ³•å’Œè¿­ä»£æ³•ã€‚</p>
<h3 id="è§£ææ³•">1.1 è§£ææ³•</h3>
<p>å½“ <span class="math inline">\(f\)</span>
çš„æ•°å­¦å½¢å¼æ¯”è¾ƒç®€å•çš„æ—¶å€™ï¼Œæˆ–è®¸é—®é¢˜å¯ä»¥ç›´æ¥ç”¨è§£æå½¢å¼æ¥æ±‚è§£ã€‚ä¹Ÿå°±æ˜¯è®©ç›®æ ‡å‡½æ•°çš„å¯¼æ•°ä¸º
0 ï¼Œç„¶åæ±‚è§£ <span class="math inline">\(\boldsymbol{x}\)</span>
çš„æœ€ä¼˜å€¼ï¼š <span class="math display">\[
\frac{\partial f}{\partial \boldsymbol{x}}=0 \nonumber
\]</span> è§£ä¸Šè¿°æ–¹ç¨‹å³å¯å¾—åˆ°ç›®æ ‡å‡½æ•°å¯¼æ•°ä¸º 0
çš„æå€¼ï¼Œå®ƒå¯èƒ½æ˜¯æå¤§å€¼ã€æå°å€¼æˆ–è€…éç‚¹å¤„çš„å€¼ï¼Œä¾æ¬¡æ¯”è¾ƒå³å¯å¾—åˆ°æœ€å°å€¼ã€‚<br />
æ˜¾ç„¶è¿™ç§æ–¹æ³•è¾ƒä¸ºå±€é™ã€‚</p>
<h3 id="è¿­ä»£æ³•">1.2 è¿­ä»£æ³•</h3>
<p>å¯¹äºä¸æ˜“ç›´æ¥æ±‚å¯¼çš„ç›®æ ‡å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨è¿­ä»£çš„æ–¹æ³•æ¥æ±‚æå°å€¼ã€‚æ ¹æ®ç»™å®šçš„åˆå€¼ï¼Œä¸æ–­åœ°æ›´æ–°å½“å‰çš„ä¼˜åŒ–å˜é‡ï¼Œä½¿å¾—ç›®æ ‡å‡½æ•°æœç€ä¸‹é™çš„æ–¹å‘å˜åŒ–ã€‚å…·ä½“æ­¥éª¤åˆ—å†™å¦‚ä¸‹ï¼š</p>
<ol type="1">
<li>ç»™å®šåˆå€¼ <span class="math inline">\(\boldsymbol{x}_0\)</span>
ï¼›<br />
</li>
<li>å¯¹äºç¬¬ <span class="math inline">\(k\)</span> æ¬¡è¿­ä»£ï¼Œå¯»æ‰¾ä¸€ä¸ªå¢é‡
<span class="math inline">\(\Delta \boldsymbol{x}_k\)</span>ï¼Œä½¿å¾— <span
class="math inline">\(\|f(\boldsymbol{x}_k + \Delta
\boldsymbol{x}_k)\|_{2}^{2}\)</span> è¾¾åˆ°æå°å€¼ï¼›<br />
</li>
<li>å¦‚æœ <span class="math inline">\(\Delta \boldsymbol{x}_k\)</span>
è¶³å¤Ÿå°ï¼Œåˆ™åœæ­¢ï¼›<br />
</li>
<li>å¦åˆ™ï¼Œä»¤ <span
class="math inline">\(\boldsymbol{x}_{k+1}=\boldsymbol{x}_k + \Delta
\boldsymbol{x}_k\)</span>ï¼Œè¿”å›2ã€‚</li>
</ol>
<p>è¿™æ ·é—®é¢˜å°±è½¬åŒ–ä¸ºå¦‚ä½•ç¡®å®šå¢é‡ <span class="math inline">\(\Delta
\boldsymbol{x}_k\)</span>ï¼Œä½¿ä¸Šè¿°è¿‡ç¨‹æ”¶æ•›ï¼Œé€šå¸¸æœ‰ä¸‹é¢çš„å‡ ç§æ–¹æ³•ã€‚</p>
<h2 id="ä¸€é˜¶å’ŒäºŒé˜¶æ¢¯åº¦æ³•æœ€é€Ÿä¸‹é™æ³•å’Œç‰›é¡¿æ³•">2.
ä¸€é˜¶å’ŒäºŒé˜¶æ¢¯åº¦æ³•ï¼ˆæœ€é€Ÿä¸‹é™æ³•å’Œç‰›é¡¿æ³•ï¼‰</h2>
<p>æ±‚è§£å¢é‡æœ€ç›´è§‚çš„æ–¹æ³•å°±æ˜¯å°† <strong>ç›®æ ‡å‡½æ•°</strong> <span
id="GM"></span> åœ¨ <span class="math inline">\(\boldsymbol{x}\)</span>
è¿›è¡Œæ³°å‹’å±•å¼€ï¼š <span class="math display">\[
\|f(\boldsymbol{x}+\Delta\boldsymbol{x})
\|_{2}^{2}=\|f(\boldsymbol{x})\|_{2}^{2}+\boldsymbol{J}(\boldsymbol{x})\Delta
\boldsymbol{x}+\frac{1}{2}\Delta \boldsymbol{x }^T \boldsymbol{H} \Delta
\boldsymbol{x}.
\]</span></p>
<p>è¿™é‡Œ <span class="math inline">\(\boldsymbol{J}\)</span> æ˜¯ <span
class="math inline">\(\|f(\boldsymbol{x}) \|_{2}^{2}\)</span> å…³äº <span
class="math inline">\(x\)</span> çš„å¯¼æ•°ï¼ˆé›…å¯æ¯”çŸ©é˜µï¼‰ï¼Œ<span
class="math inline">\(\boldsymbol{H}\)</span>
åˆ™æ˜¯äºŒé˜¶å¯¼æ•°ï¼ˆé»‘å¡çŸ©é˜µï¼‰ã€‚æˆ‘ä»¬å¯ä»¥é€‰æ‹©ä¿ç•™æ³°å‹’å±•å¼€çš„ä¸€é˜¶æˆ–äºŒé˜¶é¡¹ï¼Œå¯¹åº”çš„æ±‚è§£æ–¹æ³•åˆ™ä¸ºä¸€é˜¶æ¢¯åº¦æˆ–äºŒé˜¶æ¢¯åº¦æ³•ã€‚</p>
<p>å¦‚æœä¿ç•™ä¸€é˜¶æ¢¯åº¦ï¼Œé‚£ä¹ˆå¢é‡çš„æ–¹å‘ä¸ºï¼š <span class="math display">\[
\Delta \boldsymbol{x}^{*}=-\boldsymbol{J}^T(\boldsymbol{x})
\]</span> è¿™é‡Œçš„è½¬ç½®æ˜¯ä¸ºäº†æ»¡è¶³çŸ©é˜µä¹˜æ³•çš„ç»´åº¦åŒ¹é…ã€‚<br />
å®ƒçš„ç›´è§‚æ„ä¹‰éå¸¸ç®€å•ï¼Œåªè¦æˆ‘ä»¬æ²¿ç€åå‘æ¢¯åº¦æ–¹å‘å‰è¿›å³å¯ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬è¿˜éœ€è¦è¯¥æ–¹å‘ä¸Šå–ä¸€ä¸ªæ­¥é•¿
Î»ï¼Œæ±‚å¾—æœ€å¿«çš„ä¸‹é™æ–¹å¼ã€‚è¿™ç§æ–¹æ³•è¢«ç§°ä¸º<strong>æœ€é€Ÿä¸‹é™æ³•</strong>ã€‚</p>
<p>å¦‚æœä¿ç•™äºŒé˜¶æ¢¯åº¦ï¼Œé‚£ä¹ˆå¢é‡çš„è§£ä¸ºï¼š <span
class="math display">\[\label{äºŒé˜¶æ¢¯åº¦æ³•}
\boldsymbol{H} \Delta \boldsymbol{x}^{*}= - \boldsymbol{J}^T
\]</span> è¯¥æ–¹æ³•ç§°åˆä¸º<strong>ç‰›é¡¿æ³•</strong>ã€‚</p>
<h3 id="å°ç»“">2.1 å°ç»“</h3>
<p>æˆ‘ä»¬çœ‹åˆ°ï¼Œä¸€é˜¶å’ŒäºŒé˜¶æ¢¯åº¦æ³•éƒ½ååˆ†ç›´è§‚ï¼Œåªè¦æŠŠå‡½æ•°åœ¨è¿­ä»£ç‚¹é™„è¿‘è¿›è¡Œæ³°å‹’å±•å¼€ï¼Œå¹¶é’ˆå¯¹æ›´æ–°é‡ä½œæœ€å°åŒ–å³å¯ã€‚ç”±äºæ³°å‹’å±•å¼€ä¹‹åå‡½æ•°å˜æˆäº†å¤šé¡¹å¼ï¼Œæ‰€ä»¥æ±‚è§£å¢é‡æ—¶åªéœ€è§£çº¿æ€§æ–¹ç¨‹å³å¯ï¼Œé¿å…äº†ç›´æ¥æ±‚å¯¼å‡½æ•°ä¸ºé›¶è¿™æ ·çš„éçº¿æ€§æ–¹ç¨‹çš„å›°éš¾ã€‚</p>
<p>ä¸è¿‡ï¼Œè¿™ä¸¤ç§æ–¹æ³•ä¹Ÿå­˜åœ¨å®ƒä»¬è‡ªèº«çš„é—®é¢˜ã€‚æœ€é€Ÿä¸‹é™æ³•è¿‡äºè´ªå¿ƒï¼Œå®¹æ˜“èµ°å‡ºé”¯é½¿è·¯çº¿ï¼Œåè€Œå¢åŠ äº†è¿­ä»£æ¬¡æ•°ã€‚è€Œç‰›é¡¿æ³•åˆ™éœ€è¦è®¡ç®—ç›®æ ‡å‡½æ•°çš„
<span class="math inline">\(\boldsymbol{H}\)</span>
çŸ©é˜µï¼Œè¿™åœ¨é—®é¢˜è§„æ¨¡è¾ƒå¤§æ—¶éå¸¸å›°éš¾ï¼Œæˆ‘ä»¬é€šå¸¸å€¾å‘äºé¿å… <span
class="math inline">\(\boldsymbol{H}\)</span>
çš„è®¡ç®—ã€‚æ‰€ä»¥ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬è¯¦ç»†åœ°ä»‹ç»ä¸¤ç±»æ›´åŠ å®ç”¨çš„æ–¹æ³•ï¼š Gauss-Newton å’Œ
Levenberg-Marquadt ã€‚</p>
<h2 id="gauss-newton">3. Gauss-Newton</h2>
<p>Gauss Newton æ˜¯æœ€ä¼˜åŒ–ç®—æ³•é‡Œé¢æœ€ç®€å•çš„æ–¹æ³•ä¹‹ä¸€ã€‚å®ƒçš„æ€æƒ³æ˜¯å°† <span
class="math inline">\(f(\boldsymbol{x})\)</span>
è¿›è¡Œä¸€é˜¶çš„æ³°å‹’å±•å¼€ï¼š<br />
<span class="math display">\[\label{å±€éƒ¨è¿‘ä¼¼}
f(\boldsymbol{x}+\Delta \boldsymbol{x}) \approx
f(\boldsymbol{x})+\boldsymbol{J}(\boldsymbol{x})\Delta\boldsymbol{x}
\]</span> è¿™é‡Œ <span
class="math inline">\(\boldsymbol{J}(\boldsymbol{x})\)</span> æ˜¯ <span
class="math inline">\(f(\boldsymbol{x})\)</span> å…³äº <span
class="math inline">\(\boldsymbol{x}\)</span> çš„å¯¼æ•°ï¼Œå®é™…ä¸Šæ˜¯ä¸€ä¸ª <span
class="math inline">\(m\times m\)</span>
çš„çŸ©é˜µï¼Œä¹Ÿæ˜¯ä¸€ä¸ªé›…å¯æ¯”çŸ©é˜µã€‚</p>
<div class="note danger"><p>è¿™é‡Œæ˜¯å¯¹ <span class="math inline">\(f(\boldsymbol{x})\)</span> åœ¨
<span class="math inline">\(\boldsymbol{x}\)</span>
å¤„è¿›è¡Œæ³°å‹’å±•å¼€ï¼Œè€Œä¸æ˜¯å¯¹ç›®æ ‡å‡½æ•°è¿›è¡Œæ³°å‹’å±•å¼€ï¼Œéœ€è¦å’Œ <a
href="#GM">æ¢¯åº¦æ³•</a> ä¸­è¿›è¡ŒåŒºåˆ†å¯¹æ¯”ï¼</p>
</div>
<p>æ ¹æ®å‰é¢çš„æ€æƒ³ï¼Œæˆ‘ä»¬å½“å‰çš„ç›®æ ‡æ˜¯ä¸ºäº†å¯»æ‰¾ä¸‹é™çŸ¢é‡ <span
class="math inline">\(\Delta\boldsymbol{x}\)</span>ï¼Œä½¿ <span
class="math inline">\(\|f(\boldsymbol{x}+\Delta\boldsymbol{x})\|_{2}^{2}\)</span>
è¾¾åˆ°æœ€å°ã€‚å³<br />
<span class="math display">\[
\Delta \boldsymbol{x}^{*}=arg\  \underset{\Delta \boldsymbol{x}}{min}
\frac{1}{2}\|f(\boldsymbol{x})+\boldsymbol{J}(\boldsymbol{x})\Delta\boldsymbol{x}\|_{2}^{2}
\]</span> å°†ç›®æ ‡å‡½æ•°å±•å¼€åŒ–ç®€å¾—ï¼š <span class="math display">\[
\begin{equation*}
\begin{aligned}
\frac{1}{2}\|f(\boldsymbol{x})+\boldsymbol{J}(\boldsymbol{x})\Delta\boldsymbol{x}\|_{2}^{2}&amp;=\frac{1}{2}(f(\boldsymbol{x})+\boldsymbol{J}(\boldsymbol{x})\Delta\boldsymbol{x})^T(f(\boldsymbol{x})+\boldsymbol{J}(\boldsymbol{x})\Delta\boldsymbol{x})
\\
&amp;=\frac{1}{2}(\|f(\boldsymbol{x})\|_{2}^{2} +
2f(\boldsymbol{x})^T\boldsymbol{J}(\boldsymbol{x}+\Delta\boldsymbol{x}^T
\boldsymbol{J}(\boldsymbol{x})^T\boldsymbol{J}(x)^T\Delta
\boldsymbol{x}))
\end{aligned}
\end{equation*}
\]</span></p>
<p>æ±‚ä¸Šè¿°ç›®æ ‡å‡½æ•°å¯¹ <span class="math inline">\(\Delta
\boldsymbol{x}\)</span> çš„å¯¼æ•°ï¼Œå¹¶ä»¤å…¶ä¸º 0ï¼š <span
class="math display">\[\nonumber
2\boldsymbol{J}(\boldsymbol{x})^T \boldsymbol{J}(\boldsymbol{x})\Delta
\boldsymbol{x}+2\boldsymbol{J}(\boldsymbol{x})^T f(\boldsymbol{x})=0
\]</span></p>
<p>å¯ä»¥å¾—åˆ°ï¼š <span class="math display">\[
\boldsymbol{J}(\boldsymbol{x})^T \boldsymbol{J}(\boldsymbol{x})\Delta
\boldsymbol{x}=-\boldsymbol{J}(\boldsymbol{x})^T f(\boldsymbol{x})
\]</span></p>
<p>æ³¨æ„ï¼Œæˆ‘ä»¬è¦æ±‚è§£çš„å˜é‡æ˜¯ <span class="math inline">\(\Delta
\boldsymbol{x}\)</span>ï¼Œå› æ­¤è¿™æ˜¯ä¸€ä¸ªçº¿æ€§æ–¹ç¨‹ç»„ï¼Œæˆ‘ä»¬ç§°å®ƒä¸º<strong>å¢é‡æ–¹ç¨‹</strong>ï¼Œä¹Ÿå¯ä»¥ç§°ä¸º<strong>é«˜æ–¯ç‰›é¡¿æ–¹ç¨‹</strong>
(Gauss Newton equations) æˆ–è€…<strong>æ­£è§„æ–¹ç¨‹</strong> (Normal
equations)ã€‚æˆ‘ä»¬æŠŠå·¦è¾¹çš„ç³»æ•°å®šä¹‰ä¸º <span
class="math inline">\(\boldsymbol{H}\)</span>ï¼Œå³è¾¹å®šä¹‰ä¸º <span
class="math inline">\(\boldsymbol{g}\)</span>ï¼Œé‚£ä¹ˆä¸Šå¼å˜ä¸ºï¼š<br />
<span class="math display">\[
\boldsymbol{H}\Delta \boldsymbol{x} = \boldsymbol{g}
\]</span></p>
<p>Gauss-Newton çš„æ­¥éª¤å¯ä»¥å†™ä¸ºï¼š</p>
<ol type="1">
<li>ç»™å®šåˆå€¼ <span
class="math inline">\(\boldsymbol{x}_0\)</span>ï¼›<br />
</li>
<li>å¯¹äºç¬¬ <span class="math inline">\(k\)</span>
æ¬¡è¿­ä»£ï¼Œæ±‚å‡ºå½“å‰çš„é›…å¯æ¯”çŸ©é˜µ <span
class="math inline">\(\boldsymbol{J}(\boldsymbol{x}_k)\)</span>
å’Œè¯¯å·®<span class="math inline">\(f(\boldsymbol{x}_k)\)</span>ï¼›<br />
</li>
<li>æ±‚è§£å¢é‡æ–¹ç¨‹ï¼š <span class="math inline">\(\boldsymbol{H}\Delta
\boldsymbol{x}_k = \boldsymbol{g}\)</span> ï¼›<br />
</li>
<li>å¦‚æœ <span class="math inline">\(\Delta \boldsymbol{x}_k\)</span>
è¶³å¤Ÿå°ï¼Œåˆ™åœæ­¢ï¼›å¦åˆ™ï¼Œä»¤ <span
class="math inline">\(\boldsymbol{x}_{k+1}=\boldsymbol{x}_k+\Delta
\boldsymbol{x}_k\)</span> ï¼Œè¿”å› 2ã€‚</li>
</ol>
<p><strong>æ±‚è§£å¢é‡æ–¹ç¨‹æ˜¯æ•´ä¸ªä¼˜åŒ–é—®é¢˜çš„æ ¸å¿ƒæ‰€åœ¨</strong>ã€‚</p>
<h3 id="å°ç»“-1">3.1 å°ç»“</h3>
<p>å’Œ äºŒé˜¶æ¢¯åº¦æ³•ï¼ˆç‰›é¡¿æ³•ï¼‰<span
class="math inline">\(\eqref{äºŒé˜¶æ¢¯åº¦æ³•}\)</span>
çš„å¢é‡è§£è¿›è¡Œå¯¹æ¯”ï¼Œå¯ä»¥å‘ç° Gauss-Newton ä¸­ç”¨ <span
class="math inline">\(\boldsymbol{J}^{T}\boldsymbol{J}\)</span>
ä½œä¸ºç‰›é¡¿æ³•ä¸­äºŒé˜¶ Hessian çŸ©é˜µçš„è¿‘ä¼¼ï¼Œä»è€Œçœç•¥äº†è®¡ç®— <span
class="math inline">\(\boldsymbol{H}\)</span> çš„è¿‡ç¨‹ã€‚</p>
<p>Gauss-Newton çš„æ ¸å¿ƒåœ¨äºæ±‚è§£å¢é‡æ–¹ç¨‹ï¼Œä½†å®ƒè¦æ±‚ <span
class="math inline">\(\boldsymbol{H}\)</span>
æ˜¯å¯é€†ä¸”æ­£å®šçš„ï¼Œä½†å®é™…ä¸­è®¡ç®—çš„ <span
class="math inline">\(\boldsymbol{H}=\boldsymbol{J}^{T}\boldsymbol{J}\)</span>
é€šå¸¸åªæ˜¯åŠæ­£å®šçš„ã€‚å› æ­¤ï¼Œåœ¨ä½¿ç”¨ Gauss-Newton çš„æ—¶å€™å¯èƒ½ä¼šå‡ºç° <span
class="math inline">\(\boldsymbol{H}\)</span>
æ˜¯å¥‡å¼‚æˆ–è€…ç—…æ€çš„æƒ…å†µï¼Œå¯¼è‡´ç®—æ³•ä¸æ”¶æ•›ã€‚æ›´ä¸¥é‡çš„æ˜¯ï¼Œå°±ç®—æˆ‘ä»¬å‡è®¾ <span
class="math inline">\(\boldsymbol{H}\)</span>
éå¥‡å¼‚ä¹Ÿéç—…æ€ï¼Œå¦‚æœæˆ‘ä»¬æ±‚å‡ºæ¥çš„æ­¥é•¿ <span class="math inline">\(\Delta
\boldsymbol{x}\)</span> å¤ªå¤§ï¼Œä¹Ÿä¼šå¯¼è‡´æˆ‘ä»¬é‡‡ç”¨çš„å±€éƒ¨è¿‘ä¼¼ <span
class="math inline">\(\eqref{å±€éƒ¨è¿‘ä¼¼}\)</span>
ä¸å¤Ÿå‡†ç¡®ï¼Œè¿™æ ·ä¸€æ¥æˆ‘ä»¬ç”šè‡³éƒ½æ— æ³•ä¿è¯å®ƒçš„è¿­ä»£æ”¶æ•›ï¼Œå“ªæ€•æ˜¯è®©ç›®æ ‡å‡½æ•°å˜å¾—æ›´å¤§éƒ½æ˜¯æœ‰å¯èƒ½çš„ã€‚</p>
<p>å°½ç®¡ Gauss-Newton
æœ‰è¿™äº›ç¼ºç‚¹ï¼Œä½†æ˜¯å®ƒä¾ç„¶å€¼å¾—æˆ‘ä»¬å»å­¦ä¹ ï¼Œå› ä¸ºåœ¨éçº¿æ€§ä¼˜åŒ–é‡Œï¼Œç›¸å½“å¤šçš„ç®—æ³•éƒ½å¯ä»¥å½’ç»“ä¸º
Gauss-Newton çš„å˜ç§ã€‚è¿™äº›ç®—æ³•éƒ½å€ŸåŠ©äº† Gauss-Newton
æ³•çš„æ€æƒ³å¹¶ä¸”é€šè¿‡è‡ªå·±çš„æ”¹è¿›ä¿®æ­£ Gauss-Newton æ³•çš„ç¼ºç‚¹ã€‚ä¾‹å¦‚ä¸€äº›çº¿æœç´¢æ–¹æ³•
(line search method)ï¼Œè¿™ç±»æ”¹è¿›å°±æ˜¯åŠ å…¥äº†ä¸€ä¸ªæ ‡é‡ <span
class="math inline">\(\alpha\)</span>ï¼Œåœ¨ç¡®å®šäº† <span
class="math inline">\(\Delta \boldsymbol{x}\)</span> è¿›ä¸€æ­¥æ‰¾åˆ° <span
class="math inline">\(\alpha\)</span> ä½¿å¾— <span
class="math inline">\(\|f(\boldsymbol{x}+\alpha \Delta
\boldsymbol{x})\|_{2}^{2}\)</span> è¾¾åˆ°æœ€å°ï¼Œè€Œä¸æ˜¯åƒ Gauss-Newton
æ³•é‚£æ ·ç®€å•åœ°ä»¤ <span class="math inline">\(Î± = 1\)</span>ã€‚</p>
<p>Levenberg-Marquadt
æ–¹æ³•åœ¨ä¸€å®šç¨‹åº¦ä¸Šä¿®æ­£äº†è¿™äº›é—®é¢˜ï¼Œè¢«ç§°ä¹‹ä¸ºé˜»å°¼ç‰›é¡¿æ³•(Damped Newton
Method)ï¼Œä¸€èˆ¬è®¤ä¸ºå®ƒæ¯”é«˜æ–¯ç‰›é¡¿æ›´ä¸ºé²æ£’ã€‚å°½ç®¡å®ƒçš„æ”¶æ•›é€Ÿåº¦å¯èƒ½ä¼šæ¯”é«˜æ–¯ç‰›é¡¿æ›´æ…¢ï¼Œä½†æ˜¯åœ¨
SLAM é‡Œé¢å´è¢«å¤§é‡åº”ç”¨ã€‚</p>
<h2 id="levenberg-marquadt">4. Levenberg-Marquadt</h2>
<p>å‰æ–‡æåˆ°å½“ <span class="math inline">\(\Delta \boldsymbol{x}\)</span>
å¤ªå¤§æ—¶ï¼ŒGauss-Newton æ–¹æ³•ä¸­é‡‡ç”¨çš„è¿‘ä¼¼äºŒé˜¶æ³°å‹’å±•å¼€ <span
class="math inline">\(\eqref{å±€éƒ¨è¿‘ä¼¼}\)</span>
å­˜åœ¨ä¸å¤Ÿå‡†ç¡®çš„é—®é¢˜ï¼Œå¾ˆè‡ªç„¶çš„æƒ³åˆ°å¯¹ <span class="math inline">\(\Delta
\boldsymbol{x}\)</span> å¢åŠ ä¸€ä¸ªä¿¡èµ–åŒºåŸŸ (Trust Region)ï¼Œä¸èƒ½è®© <span
class="math inline">\(\Delta \boldsymbol{x}\)</span>
å› å¤ªå¤§è€Œä½¿å¾—è¿‘ä¼¼ä¸å¤Ÿå‡†å´ã€‚è¿™ç§æ·»åŠ ä¿¡èµ–åŒºåŸŸçš„æ–¹æ³•åœ¨éçº¿æ€§ä¼˜åŒ–ä¸­è¢«ç§°ä¸º
<strong>ä¿¡èµ–åŒºåŸŸæ–¹æ³• (Trust Region Method)</strong>
ã€‚åªæœ‰åœ¨è§„å®šçš„ä¿¡èµ–åŒºåŸŸä¸­çš„ <span class="math inline">\(\Delta
\boldsymbol{x}\)</span> æ‰è®¤ä¸ºè¿‘ä¼¼æ˜¯æœ‰æ•ˆçš„ã€‚<br />
é‚£ä¹ˆå¦‚ä½•ç¡®å®šè¿™ä¸ªä¿¡èµ–åŒºåŸŸçš„èŒƒå›´å‘¢ï¼Ÿä¸€ä¸ªæ¯”è¾ƒå¥½çš„æ–¹æ³•æ˜¯æ ¹æ®æˆ‘ä»¬çš„è¿‘ä¼¼æ¨¡å‹è·Ÿå®é™…å‡½æ•°ä¹‹é—´çš„å·®å¼‚æ¥ç¡®å®šè¿™ä¸ªèŒƒå›´ï¼šå¦‚æœå·®å¼‚å°ï¼Œæˆ‘ä»¬å°±è®©èŒƒå›´å°½å¯èƒ½å¤§ï¼›å¦‚æœå·®å¼‚å¤§ï¼Œæˆ‘ä»¬å°±ç¼©å°è¿™ä¸ªè¿‘ä¼¼èŒƒå›´ã€‚å› æ­¤ï¼Œè€ƒè™‘ä½¿ç”¨ä¸‹å¼æ¥åˆ¤æ–­æ³°å‹’è¿‘ä¼¼æ˜¯å¦å¤Ÿå¥½ã€‚
<span class="math display">\[
\rho=\frac{f(\boldsymbol{x+\Delta
\boldsymbol{x}})-f(\boldsymbol{x})}{\boldsymbol{J}(\boldsymbol{x})\Delta
\boldsymbol{x}}=\frac{å®é™…å‡½æ•°ä¸‹é™å€¼}{è¿‘ä¼¼æ¨¡å‹ä¸‹é™å€¼}
\]</span> æ˜¾ç„¶ï¼Œå½“ <span class="math inline">\(\rho \rightarrow
1\)</span> æ—¶ï¼Œè¿‘ä¼¼æ•ˆæœæœ€å¥½ï¼›<br />
å½“ <span class="math inline">\(\rho \ll 1\)</span>
æ—¶ï¼Œè¯´æ˜å®é™…ä¸‹é™å€¼è¿œå°äºè¿‘ä¼¼ä¸‹é™å€¼ï¼Œæˆ‘ä»¬éœ€è¦ç¼©å°è¿‘ä¼¼èŒƒå›´ï¼Œå³å‡å° <span
class="math inline">\(\Delta \boldsymbol{x}\)</span> ï¼›<br />
å½“ <span class="math inline">\(\rho \gg 1\)</span>
æ—¶ï¼Œè¯´æ˜å®é™…ä¸‹é™å€¼è¿œå¤§äºè¿‘ä¼¼ä¸‹é™å€¼ï¼Œæˆ‘ä»¬éœ€è¦å¢å¤§è¿‘ä¼¼èŒƒå›´ï¼Œå³å¢å¤§ <span
class="math inline">\(\Delta \boldsymbol{x}\)</span> ã€‚</p>
<p>ä¾æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥æ”¹è¿› Gauss-Newton éçº¿æ€§ä¼˜åŒ–çš„æ¡†æ¶ï¼š</p>
<ol type="1">
<li>ç»™å®šåˆå§‹å€¼ <span
class="math inline">\(\boldsymbol{x}_0\)</span>ï¼Œä»¥åŠåˆå§‹ä¼˜åŒ–åŠå¾„ <span
class="math inline">\(\mu\)</span>ï¼›</li>
<li>å¯¹äºç¬¬ <span class="math inline">\(k\)</span> æ¬¡è¿­ä»£ï¼Œæ±‚è§£ï¼š<span
class="math display">\[\label{L-M} \underset{\Delta
\boldsymbol{x}_k}{min}
\frac{1}{2}\|f(\boldsymbol{x}_k)+\boldsymbol{J}(\boldsymbol{x}_k)\Delta
\boldsymbol{x}_k\|_{2}^{2},\ s.t.\|\boldsymbol{D}\Delta
\boldsymbol{x}_k\|^{2}\le \mu\]</span> è¿™é‡Œ <span
class="math inline">\(\mu\)</span> æ˜¯ä¿¡èµ–åŒºåŸŸçš„åŠå¾„ï¼Œ<span
class="math inline">\(\boldsymbol{D}\)</span> æ˜¯ä¸€ä¸ªè°ƒæ•´çŸ©é˜µ</li>
<li>è®¡ç®— <span class="math inline">\(\rho\)</span>ï¼›</li>
<li>å¦‚æœ <span class="math inline">\(\rho \gt \frac{3}{4}\)</span>ï¼Œåˆ™
<span class="math inline">\(\mu = 2\mu\)</span>ï¼›å¦‚æœ <span
class="math inline">\(\rho \lt \frac{1}{4}\)</span>ï¼Œåˆ™ <span
class="math inline">\(\mu = 0.5\mu\)</span>ï¼›å¦åˆ™ï¼Œ<span
class="math inline">\(\mu\)</span>
ä¿æŒä¸å˜ã€‚è¿™é‡Œçš„é˜ˆå€¼å’Œæ‰©å¤§å€æ•°éƒ½æ˜¯ç»éªŒå€¼ï¼Œå¯è§†æƒ…å†µè°ƒæ•´ï¼›</li>
<li>å¦‚æœ <span class="math inline">\(\rho\)</span>
å¤§äºæŸé˜ˆå€¼ï¼Œè®¤ä¸ºè¿‘ä¼¼å¯è¡Œã€‚ä»¤ <span
class="math inline">\(\boldsymbol{x}_{k+1}=\boldsymbol{x}_k+\Delta
\boldsymbol{x}_k\)</span>ï¼›</li>
<li>åˆ¤æ–­ç®—æ³•æ˜¯å¦æ”¶æ•›ã€‚å¦‚æœä¸æ”¶æ•›åˆ™è¿”å›2ï¼Œå¦åˆ™ç»“æŸã€‚</li>
</ol>
<p>å…³äº <span class="math inline">\(\eqref{L-M}\)</span> ä¸­ <span
class="math inline">\(\boldsymbol{D}\)</span> çš„è¯´æ˜ï¼š<br />
å½“ <span class="math inline">\(\boldsymbol{D}=\boldsymbol{I}\)</span>
æ—¶ï¼Œè¿™é‡Œçš„çº¦æŸæ¡ä»¶å¯çœ‹ä½œæ˜¯å°† <span class="math inline">\(\Delta
\boldsymbol{x}\)</span> çº¦æŸåœ¨ä¸€ä¸ªåŠå¾„ä¸º <span
class="math inline">\(\mu\)</span> çš„çƒå†…ï¼›å½“ <span
class="math inline">\(\boldsymbol{D} \ne \boldsymbol{I}\)</span>
æ—¶ï¼Œå¯ä»¥è®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªæ¤­çƒã€‚ åœ¨ L-M ç®—æ³•ä¸­ï¼Œå– <span
class="math inline">\(\boldsymbol{D}\)</span> ä¸ºéè´Ÿå¯¹è§’çŸ©é˜µï¼ˆç”± <span
class="math inline">\(\boldsymbol{J}^{T}\boldsymbol{J}\)</span>
çš„å¯¹è§’å…ƒç´ å¹³æ–¹æ ¹æ„æˆï¼‰ï¼Œä½¿å¾—åœ¨æ¢¯åº¦å°çš„ç»´åº¦ä¸Šçº¦æŸèŒƒå›´æ›´å¤§ä¸€äº›ã€‚</p>
<p>æ ¹æ®<span class="math inline">\(\eqref{L-M}\)</span> æ±‚è§£å¢é‡ï¼Œ
æ‹‰æ ¼æœ—æ—¥æ³•ï¼š <span class="math display">\[
\nonumber
L=\frac{1}{2}\|f(\boldsymbol{x}_k)+\boldsymbol{J}(\boldsymbol{x}_k)\Delta
\boldsymbol{x}_k\|_{2}^{2}+\frac{\lambda}{2}\|\boldsymbol{D}\Delta\boldsymbol{x}_k\|_{2}^{2},\lambda
\gt 0
\]</span> ä»¤åå¯¼ä¸º0ï¼Œå¯å¾—å¢é‡æ–¹ç¨‹ï¼š <span class="math display">\[
\frac{\partial L}{\partial \Delta\boldsymbol{x}_k}=\boldsymbol{0}
\Longrightarrow (\boldsymbol{H}+\lambda
\boldsymbol{D}^{T}\boldsymbol{D})\Delta \boldsymbol{x}_k=\boldsymbol{g}
\]</span></p>
<p>ä»ç»“æœæ¥çœ‹ï¼Œå½“ <span class="math inline">\(\lambda\)</span>
è¾ƒå°æ—¶ï¼Œ<span class="math inline">\(\boldsymbol{H}\)</span>
å ä¸»å¯¼åœ°ä½ï¼Œè¯´æ˜äºŒæ¬¡è¿‘ä¼¼æ¨¡å‹æ•ˆæœåœ¨è¯¥èŒƒå›´å†…æ˜¯æ¯”è¾ƒå¥½çš„ï¼Œæ­¤æ—¶ L-M æ³•æ¥è¿‘äº
G-N æ³•ï¼›å½“ <span class="math inline">\(\lambda\)</span> è¾ƒå¤§æ—¶ï¼Œè€ƒè™‘
<span class="math inline">\(\boldsymbol{D}=\boldsymbol{I}\)</span>
çš„ç®€åŒ–å½¢å¼ï¼Œæ­¤æ—¶ <span class="math inline">\(\lambda \boldsymbol{D}^T
\boldsymbol{D}=\lambda \boldsymbol{I}\)</span>
å ä¸»å¯¼åœ°ä½ï¼Œè¯´æ˜äºŒæ¬¡è¿‘ä¼¼çš„ä¸å¤Ÿå¥½ï¼Œæ­¤æ—¶ L-M æ³•æ›´æ¥è¿‘äº
ä¸€é˜¶æ¢¯åº¦ä¸‹é™æ³•ï¼ˆæœ€é€Ÿä¸‹é™æ³•ï¼‰ã€‚</p>
<p>L-M
çš„æ±‚è§£æ–¹å¼ï¼Œå¯åœ¨ä¸€å®šç¨‹åº¦ä¸Šé¿å…çº¿æ€§æ–¹ç¨‹ç»„çš„ç³»æ•°çŸ©é˜µçš„éå¥‡å¼‚å’Œç—…æ€é—®é¢˜ï¼Œæä¾›æ›´ç¨³å®šæ›´å‡†ç¡®çš„å¢é‡
<span class="math inline">\(\Delta \boldsymbol{x}\)</span>ã€‚</p>
<p>æ€»è€Œè¨€ä¹‹ï¼Œéçº¿æ€§ä¼˜åŒ–é—®é¢˜çš„æ¡†æ¶ï¼Œåˆ†ä¸º Line Search å’Œ Trust Region
ä¸¤ç±»ã€‚<br />
Line Search å…ˆå›ºå®šæœç´¢æ–¹å‘ï¼Œç„¶ååœ¨è¯¥æ–¹å‘å¯»æ‰¾æ­¥é•¿ï¼Œä»¥æœ€é€Ÿä¸‹é™æ³•å’Œ
Gauss-Newton æ³•ä¸ºä»£è¡¨ã€‚è€Œ TrustRegion
åˆ™å…ˆå›ºå®šæœç´¢åŒºåŸŸï¼Œå†è€ƒè™‘æ‰¾è¯¥åŒºåŸŸå†…çš„æœ€ä¼˜ç‚¹ã€‚æ­¤ç±»æ–¹æ³•ä»¥ L-M
ä¸ºä»£è¡¨ã€‚å®é™…é—®é¢˜ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸é€‰æ‹© G-N æˆ– L-M ä¹‹ä¸€ä½œä¸ºæ¢¯åº¦ä¸‹é™ç­–ç•¥ã€‚</p>
<h2 id="å‚è€ƒèµ„æ–™">5. å‚è€ƒèµ„æ–™</h2>
<p><strong>[1]</strong> è§†è§‰ SLAM åå››è®² â€”â€” é«˜ç¿”</p>
]]></content>
      <categories>
        <category>æœ€ä¼˜åŒ–</category>
        <category>éçº¿æ€§æœ€å°äºŒä¹˜</category>
      </categories>
      <tags>
        <tag>Levenberg-Marquadt</tag>
      </tags>
  </entry>
  <entry>
    <title>Bæ ·æ¡æ›²çº¿ç®€ä»‹åŠå…¶pythonå®ç°</title>
    <url>/2025/01/08/B%E6%A0%B7%E6%9D%A1%E6%9B%B2%E7%BA%BF/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><span id="more"></span>
<h2 id="bæ ·æ¡æ›²çº¿çš„è®¡ç®—å…¬å¼">1. Bæ ·æ¡æ›²çº¿çš„è®¡ç®—å…¬å¼</h2>
<p>B æ ·æ¡æ›²çº¿ <span class="math inline">\(P(u)\)</span>
å¯ä»¥è¡¨ç¤ºä¸ºæ§åˆ¶ç‚¹å’ŒåŸºå‡½æ•°çš„åŠ æƒå’Œï¼š <span class="math display">\[
P(u)=\sum_{i=0}^{n} {p_i B_{i,k}(u)} \ ,u\in \left[ u_{k-1}, u_{k+1}
\right]
\tag{1}
\]</span></p>
<h2 id="ç¬¦å·è§£é‡Š">2. ç¬¦å·è§£é‡Š</h2>
<h3 id="pu">2.1 <span class="math inline">\(P(u)\)</span></h3>
<p>B æ ·æ¡æ›²çº¿ä¸Šçš„ç‚¹ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬æ‰€è¦æ±‚çš„ç»“æœã€‚</p>
<h3 id="p_i">2.2 <span class="math inline">\(p_i\)</span></h3>
<p>æ§åˆ¶ç‚¹ï¼Œ <span class="math inline">\(i=0,1,2,..,n\)</span>ï¼Œä¸€å…±æœ‰
<span class="math inline">\(n+1\)</span> ä¸ªã€‚</p>
<h3 id="b_ik">2.3 <span class="math inline">\(B_{i,k}\)</span></h3>
<p>åŸºå‡½æ•°</p>
<h3 id="u">2.4 <span class="math inline">\(u\)</span> <span
id="2.4"></span></h3>
<p>ç›¸å½“äºè‡ªå˜é‡ï¼Œæœ‰æ•ˆåŒºé—´ä¸º <span class="math inline">\(\left[ u_{k-1},
u_{k+1} \right]\)</span>ã€‚</p>
<h3 id="k">2.5 <span class="math inline">\(k\)</span></h3>
<p>B
æ ·æ¡æ›²çº¿çš„<strong>æ¬¡æ•°</strong>ï¼Œè¿™é‡Œè¦æ³¨æ„æ¬¡æ•°å’Œé˜¶æ•°çš„åŒºåˆ«å’Œè”ç³»ï¼šæ¬¡æ•°
= é˜¶æ•° - 1ã€‚</p>
<p>å¯¹äº B æ ·æ¡çš„æ¬¡æ•° <span
class="math inline">\(k\)</span>ï¼Œå¿…é¡»æ»¡è¶³ï¼š<span id="(2)"></span> <span
class="math display">\[k = m - n - 1 \tag{2}\]</span> å…¶ä¸­ <span
class="math inline">\(m\)</span><span id="m"></span> æ˜¯ <strong>èŠ‚ç‚¹
(knots)</strong> å°† B æ ·æ¡æ›²çº¿åˆ’åˆ†çš„æ®µæ•°ï¼Œ<span
class="math inline">\(n\)</span> ä¸ºæ§åˆ¶ç‚¹çš„ä¸ªæ•°å‡ä¸€ã€‚</p>
<p>ä¸Šé¢è¯´çš„èŠ‚ç‚¹å°±æ˜¯åˆ’åˆ† B
æ ·æ¡çš„æ¯”ä¾‹ï¼Œç”±èŠ‚ç‚¹ç»„æˆçš„ä¸€ç»„å‘é‡å°±æˆä¸ºèŠ‚ç‚¹çŸ¢é‡ï¼Œä¾‹å¦‚
<code>[0, 0.2, 0.4, 0.6, 0.8, 1]</code>ã€‚ä¸åŒçš„èŠ‚ç‚¹çŸ¢é‡è¿›è€Œäº§ç”Ÿäº†ä¸åŒçš„
B æ ·æ¡ç§ç±»ï¼Œä¾‹å¦‚å‡åŒ€ B æ ·æ¡ã€å‡†å‡åŒ€ B æ ·æ¡ã€åˆ†æ®µ B æ ·æ¡ä»¥åŠéå‡åŒ€ B
æ ·æ¡ç­‰ç­‰ã€‚</p>
<h2 id="åŸºå‡½æ•°çš„è®¡ç®—">3. åŸºå‡½æ•°çš„è®¡ç®—</h2>
<p>de Boor-Coxé€’å½’æ–¹æ³•<br />
<span class="math display">\[
B_{i,k}(u)=\frac{u-u_i}{u_{i+1}-u_i}B_{i,k-1}(u)+\frac{u_{i+k}-u}{u_{i+k}-u_{i+1}}B_{i+1,k-1}(u)
\tag{3}
\]</span></p>
<p>è¿™é‡Œéœ€è¦ç»™å‡ºè¯´æ˜ï¼Œä¸å¸¦ä¸‹æ ‡çš„ <span class="math inline">\(u\)</span>
æŒ‡çš„æ˜¯ <a href="#2.4">2.4</a> ä¸­çš„ <span
class="math inline">\(u\)</span>ï¼Œè€Œå¸¦ä¸‹æ ‡åˆ™æŒ‡çš„æ˜¯èŠ‚ç‚¹çŸ¢é‡ã€‚</p>
<p>åœ¨ä»£ç å®ç°ä¸­ï¼Œæˆ‘ä»¬è§„å®š <span
class="math inline">\(\frac{0}{0}=0\)</span>ã€‚</p>
<h2 id="èŠ‚ç‚¹çŸ¢é‡-knots-çš„è®¡ç®—">4. èŠ‚ç‚¹çŸ¢é‡ (knots) çš„è®¡ç®—</h2>
<p>èŠ‚ç‚¹çŸ¢é‡çš„å–å€¼å¯ä»¥æ˜¯åœ¨ 0 åˆ° 1
ä¹‹é—´ï¼Œä¹Ÿå¯ä»¥æ˜¯å…¶ä»–èŒƒå›´ï¼Œä½†æ˜¯åœ¨ä»£ç æ˜¯å®ç°çš„æ—¶å€™ä¸€å®šè¦æ³¨æ„å‰åä¿æŒä¸€è‡´ã€‚<br />
æœ¬æ–‡ä½¿ç”¨èŠ‚ç‚¹çŸ¢é‡å–å€¼ä¸º 0 åˆ° 1ï¼Œè¿™æ ·ä¹Ÿå¯ä»¥è¡¨ç¤ºæ¯”ä¾‹å˜›ã€‚</p>
<p>è¿™é‡Œéœ€è¦æ³¨æ„èŠ‚çŸ¢é‡çš„é•¿åº¦ï¼Œä¹Ÿå°±æ˜¯ <span
class="math inline">\(m\)</span>ï¼Œé€šè¿‡å¼ <a href="#(2)">(2)</a>
å¯çŸ¥ï¼Œ<span class="math inline">\(m=k+n+1\)</span>ã€‚</p>
<h3 id="å‡åŒ€èŠ‚ç‚¹-uniform-node">4.1 å‡åŒ€èŠ‚ç‚¹ (uniform node)</h3>
<p>æ˜¾ç„¶ï¼ŒèŠ‚ç‚¹çš„åˆ†å¸ƒæ˜¯å‡åŒ€çš„ï¼Œæ•…ä» 0 åˆ°
1æŒ‰ç…§èŠ‚ç‚¹çŸ¢é‡çš„é•¿åº¦å‡åŒ€åˆ’åˆ†å³å¯ã€‚<br />
ï¼ˆå› ä¸ºè¦å°†æ›²çº¿åˆ’åˆ†ä¸º <a href="#m">m</a> æ®µï¼Œå½“ç„¶éœ€è¦ m+1ä¸ªç‚¹ï¼‰</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">uniform_node</span>(<span class="params">control_points, k=<span class="number">3</span></span>):</span><br><span class="line">    num, _ = control_points.shape</span><br><span class="line">    n = num - <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> np.linspace(<span class="number">0</span>, <span class="number">1</span>, n + k + <span class="number">2</span>)  <span class="comment"># m = n + k + 1</span></span><br></pre></td></tr></table></figure>
<p>å‡åŒ€ B æ ·æ¡æ›²çº¿ä¸ä¸€å®šè¿‡é¦–å°¾æ§åˆ¶ç‚¹ï¼Œå¹¶ä¸”åœ¨å›¾åƒä¸Šæ˜¯é—­åˆçš„</p>
<h3 id="å‡†å‡åŒ€èŠ‚ç‚¹-quasi-uniform-node">4.2 å‡†å‡åŒ€èŠ‚ç‚¹ (quasi uniform
node)</h3>
<p>å‡†å‡åŒ€èŠ‚ç‚¹å¯ä»¥ç›®çš„åœ¨äºå¯¹æ›²çº¿çš„ç«¯ç‚¹è¿›è¡Œè¡Œä¸ºæ§åˆ¶ï¼Œé€šè¿‡è®¾è®¡èŠ‚ç‚¹çŸ¢é‡ï¼Œä½¿å¾—ç”Ÿæˆçš„
B æ ·æ¡æ›²çº¿ç»è¿‡é¦–å°¾æ§åˆ¶ç‚¹ã€‚<br />
<span class="math inline">\(k\)</span>
æ¬¡å‡†å‡åŒ€èŠ‚ç‚¹çŸ¢é‡ä¸­ï¼Œä¸¤ç«¯èŠ‚ç‚¹å…·æœ‰é‡å¤åº¦ <span
class="math inline">\(k+1\)</span>ï¼Œæ‰€æœ‰å†…èŠ‚ç‚¹å‘ˆç°å‡åŒ€åˆ†å¸ƒã€‚<br />
åœ¨ä»£ç å®ç°ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è®©èŠ‚ç‚¹çŸ¢é‡é¦–å°¾åˆ†åˆ«ä¸º <span
class="math inline">\(k\)</span> ä¸ª 0 å’Œ 1ï¼Œç„¶åä¸­é—´ <span
class="math inline">\(n-k+2\)</span> ä¸º 0 åˆ° 1 çš„å‡åŒ€åˆ†å¸ƒå°±è¡Œäº†ï¼Œå³
<span class="math display">\[ \nonumber
\left[ \begin{matrix}
\underset{k}{\underbrace{0,0,...,0}},\
\underset{n-k+2}{\underbrace{0,...,1}},\
\underset{k}{\underbrace{1,1,...,1}}\\
\end{matrix} \right]
\]</span></p>
<figure class="highlight python"><figcaption><span>python</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">quasi_uniform_node</span>(<span class="params">control_points, k=<span class="number">3</span></span>):</span><br><span class="line">    num, _ = control_points.shape</span><br><span class="line">    n = num - <span class="number">1</span></span><br><span class="line">    mid = np.linspace(<span class="number">0</span>, <span class="number">1</span>, n - k + <span class="number">2</span>)</span><br><span class="line">    <span class="keyword">return</span> np.r_[np.zeros(k), mid, np.ones(k)]  <span class="comment"># æ‹¼æ¥</span></span><br></pre></td></tr></table></figure>
<h3 id="åˆ†æ®µèŠ‚ç‚¹-piecewise-node">4.3 åˆ†æ®µèŠ‚ç‚¹ (piecewise node)</h3>
<p>åŸºäºè¯¥èŠ‚ç‚¹çŸ¢é‡çš„ B æ ·æ ·æ¡æ›²çº¿åˆç§°ä¸ºåˆ†æ®µ Bezier
æ›²çº¿ï¼Œæ˜¯ä¸€ç»„é¡ºåºé¦–å°¾ç›¸æ¥ä¸”åŒä¸º <span class="math inline">\(k\)</span>
æ¬¡çš„ Bezier æ›²çº¿ã€‚<br />
<span class="math inline">\(k\)</span>
æ¬¡çš„åˆ†æ®µèŠ‚ç‚¹çŸ¢é‡ä¸­ï¼Œé¦–æœ«ç«¯èŠ‚ç‚¹é‡å¤åº¦ä¾æ—§ä¸º <span
class="math inline">\(k+1\)</span>ï¼Œå†…èŠ‚ç‚¹é‡å¤åº¦ä¸º <span
class="math inline">\(k\)</span></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">piecewise_node</span>(<span class="params">control_points, k=<span class="number">3</span></span>):</span><br><span class="line">    num, _ = control_points.shape</span><br><span class="line">    n = num - <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">## restricted condition</span></span><br><span class="line">    <span class="keyword">assert</span> (n - k) % k == <span class="number">0</span>, <span class="string">&quot;input is valid.&quot;</span></span><br><span class="line"></span><br><span class="line">    tmp = np.linspace(<span class="number">0</span>, <span class="number">1</span>, <span class="built_in">int</span>((n - k) / k + <span class="number">2</span>))</span><br><span class="line">    mid = np.r_[tmp[<span class="number">0</span>], np.repeat(tmp[<span class="number">1</span>:-<span class="number">1</span>], k), tmp[-<span class="number">1</span>]]</span><br><span class="line">    <span class="keyword">return</span> np.r_[np.zeros(k), mid, np.ones(k)]</span><br></pre></td></tr></table></figure>
<p>éœ€è¦æ³¨æ„ <span class="math inline">\(n-k\)</span> å¿…é¡»æ˜¯ <span
class="math inline">\(k\)</span> çš„æ•´æ•°å€ï¼Œå¦åˆ™ä¸èƒ½ç”Ÿæˆæ›²çº¿ã€‚</p>
<h3 id="éå‡åŒ€èŠ‚ç‚¹-non-uniform-node">4.4 éå‡åŒ€èŠ‚ç‚¹ (non-uniform
node)</h3>
<p>Hartley-Judd ç®—æ³• é¦–å°¾é‡åˆåº¦ä¸º <span
class="math inline">\(k+1\)</span>ï¼Œå†…èŠ‚ç‚¹å®šä¹‰ä¸ºï¼š</p>
<p><span class="math display">\[
\begin{cases}
t_k=0\\
t_i=\sum_{j=k+1}^i{\bigl( t_j-t_{j-1} \bigr)} \\
t_{n+1}=1\\
\end{cases}
\tag{4}
\]</span> <span class="math display">\[
t_i-t_{i-1}=\frac{\sum_{j=i-k}^{i-1}{l_j}}{\sum_{i=k+1}^{n+1}{\sum_{j=i-k}^{i-1}{l_j}}}
\tag{5}
\]</span></p>
<figure class="highlight python"><figcaption><span>python</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">non_uniform_node</span>(<span class="params">control_points, k=<span class="number">3</span></span>):</span><br><span class="line">    num, _ = control_points.shape</span><br><span class="line">    n = num - <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    l = np.sqrt(np.<span class="built_in">sum</span>(np.diff(control_points, axis=<span class="number">0</span>) ** <span class="number">2</span>, axis=<span class="number">1</span>))</span><br><span class="line">    ll = l[<span class="number">0</span> : <span class="built_in">len</span>(l) - <span class="number">1</span>] + l[<span class="number">1</span>::]</span><br><span class="line">    L = np.<span class="built_in">sum</span>(ll)</span><br><span class="line"></span><br><span class="line">    mid_size = n - k</span><br><span class="line">    mid = np.zeros(mid_size)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(mid_size):</span><br><span class="line">        mid[i] = np.<span class="built_in">sum</span>(ll[<span class="number">0</span> : i + <span class="number">1</span>]) / L</span><br><span class="line"></span><br><span class="line">    knots = np.r_[np.zeros(k + <span class="number">1</span>), mid, np.ones(k + <span class="number">1</span>)]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> knots</span><br></pre></td></tr></table></figure>
<h2 id="python-å®ç°">5. python å®ç°</h2>
<figure class="highlight python"><figcaption><span>python</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">uniform_node</span>(<span class="params">control_points, k=<span class="number">3</span></span>):</span><br><span class="line">    num, _ = control_points.shape</span><br><span class="line">    n = num - <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> np.linspace(<span class="number">0</span>, <span class="number">1</span>, n + k + <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">quasi_uniform_node</span>(<span class="params">control_points, k=<span class="number">3</span></span>):</span><br><span class="line">    num, _ = control_points.shape</span><br><span class="line">    n = num - <span class="number">1</span></span><br><span class="line">    mid = np.linspace(<span class="number">0</span>, <span class="number">1</span>, n - k + <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> np.r_[np.zeros(k), mid, np.ones(k)]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">piecewise_node</span>(<span class="params">control_points, k=<span class="number">3</span></span>):</span><br><span class="line">    num, _ = control_points.shape</span><br><span class="line">    n = num - <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">## restricted condition</span></span><br><span class="line">    <span class="keyword">assert</span> (n - k) % k == <span class="number">0</span>, <span class="string">&quot;input is valid.&quot;</span></span><br><span class="line"></span><br><span class="line">    tmp = np.linspace(<span class="number">0</span>, <span class="number">1</span>, <span class="built_in">int</span>((n - k) / k + <span class="number">2</span>))</span><br><span class="line">    mid = np.r_[tmp[<span class="number">0</span>], np.repeat(tmp[<span class="number">1</span>:-<span class="number">1</span>], k), tmp[-<span class="number">1</span>]]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> np.r_[np.zeros(k), mid, np.ones(k)]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">non_uniform_node</span>(<span class="params">control_points, k=<span class="number">3</span></span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    Hartley-Judd algorithem</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    num, _ = control_points.shape</span><br><span class="line">    n = num - <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    l = np.sqrt(np.<span class="built_in">sum</span>(np.diff(control_points, axis=<span class="number">0</span>) ** <span class="number">2</span>, axis=<span class="number">1</span>))</span><br><span class="line">    ll = l[<span class="number">0</span> : <span class="built_in">len</span>(l) - <span class="number">1</span>] + l[<span class="number">1</span>::]</span><br><span class="line">    L = np.<span class="built_in">sum</span>(ll)</span><br><span class="line"></span><br><span class="line">    mid_size = n - k</span><br><span class="line">    mid = np.zeros(mid_size)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(mid_size):</span><br><span class="line">        mid[i] = np.<span class="built_in">sum</span>(ll[<span class="number">0</span> : i + <span class="number">1</span>]) / L</span><br><span class="line"></span><br><span class="line">    knots = np.r_[np.zeros(k + <span class="number">1</span>), mid, np.ones(k + <span class="number">1</span>)]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> knots</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">cal_B</span>(<span class="params">i, k, knots, u</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    de Boor-Cox recursion</span></span><br><span class="line"><span class="string">    Args:</span></span><br><span class="line"><span class="string">        i (int): ith point idx</span></span><br><span class="line"><span class="string">        k (int): degree of b-spline , equal to ord - 1</span></span><br><span class="line"><span class="string">        knots (ndarray): 1 dim</span></span><br><span class="line"><span class="string">        u : independent variable</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Returns:</span></span><br><span class="line"><span class="string">        B: B_&#123;i,k&#125;</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">if</span> k == <span class="number">1</span>:</span><br><span class="line">        B = <span class="number">1</span> <span class="keyword">if</span> knots[i] &lt;= u &lt;= knots[i + <span class="number">1</span>] <span class="keyword">else</span> <span class="number">0</span>  <span class="comment">##</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        coef1 = coef2 = <span class="number">0</span></span><br><span class="line">        <span class="keyword">if</span> knots[i + k - <span class="number">1</span>] - knots[i] != <span class="number">0</span>:</span><br><span class="line">            coef1 = (u - knots[i]) / (knots[i + k - <span class="number">1</span>] - knots[i])</span><br><span class="line">        <span class="keyword">if</span> knots[i + k] - knots[i + <span class="number">1</span>] != <span class="number">0</span>:</span><br><span class="line">            coef2 = (knots[i + k] - u) / (knots[i + k] - knots[i + <span class="number">1</span>])</span><br><span class="line"></span><br><span class="line">        B = coef1 * cal_B(i, k - <span class="number">1</span>, knots, u) + coef2 * cal_B(i + <span class="number">1</span>, k - <span class="number">1</span>, knots, u)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> B</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">cal_curve</span>(<span class="params">control_points, knots, t</span>):</span><br><span class="line"></span><br><span class="line">    num, dims = control_points.shape</span><br><span class="line">    n = num - <span class="number">1</span></span><br><span class="line">    k = <span class="built_in">len</span>(knots) - n - <span class="number">1</span>  <span class="comment"># degree of b-spline</span></span><br><span class="line"></span><br><span class="line">    N = <span class="built_in">len</span>(t)</span><br><span class="line">    P = np.zeros((N, dims))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> idx <span class="keyword">in</span> <span class="built_in">range</span>(N):</span><br><span class="line">        u = t[idx]</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, num):</span><br><span class="line">            P[idx, :] += control_points[i, :] * cal_B(i, k, knots, u)</span><br><span class="line">    <span class="keyword">return</span> P</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ä½“éªŒ https://superjerryshen.github.io/b-spline-demos/##/uniform-b-spline-of-order-3</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">    control_points = np.array([[<span class="number">50</span>, <span class="number">50</span>], [<span class="number">100</span>, <span class="number">300</span>], [<span class="number">300</span>, <span class="number">100</span>], [<span class="number">380</span>, <span class="number">200</span>], [<span class="number">400</span>, <span class="number">600</span>], [<span class="number">500</span>, <span class="number">400</span>], [<span class="number">300</span>, <span class="number">600</span>]])</span><br><span class="line">    </span><br><span class="line">    N = <span class="number">500</span></span><br><span class="line">    t = np.linspace(<span class="number">0.0</span>, <span class="number">1.0</span>, N)</span><br><span class="line"></span><br><span class="line">    uniform_knots = uniform_node(control_points)</span><br><span class="line">    quasi_knots = quasi_uniform_node(control_points)</span><br><span class="line">    piecewise_knots = piecewise_node(control_points)</span><br><span class="line">    non_knots = non_uniform_node(control_points)</span><br><span class="line"></span><br><span class="line">    P_uniform = cal_curve(control_points, uniform_knots, t)</span><br><span class="line">    P_quasi = cal_curve(control_points, quasi_knots, t)</span><br><span class="line">    P_piecewise = cal_curve(control_points, piecewise_knots, t)</span><br><span class="line">    P_non = cal_curve(control_points, non_knots, t)</span><br><span class="line"></span><br><span class="line">    fig, axs = plt.subplots(<span class="number">2</span>, <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">## å‡åŒ€ ä¼šé—­åˆ</span></span><br><span class="line">    axs[<span class="number">0</span>, <span class="number">0</span>].scatter(control_points[:, <span class="number">0</span>], control_points[:, <span class="number">1</span>], color=<span class="string">&quot;C0&quot;</span>, facecolors=<span class="string">&quot;none&quot;</span>, label=<span class="string">&quot;control points&quot;</span>)</span><br><span class="line">    axs[<span class="number">0</span>, <span class="number">0</span>].plot(control_points[:, <span class="number">0</span>], control_points[:, <span class="number">1</span>], color=<span class="string">&quot;C0&quot;</span>, linewidth=<span class="number">0.2</span>)</span><br><span class="line">    axs[<span class="number">0</span>, <span class="number">0</span>].plot(P_uniform[:, <span class="number">0</span>], P_uniform[:, <span class="number">1</span>], color=<span class="string">&quot;C3&quot;</span>, label=<span class="string">&quot;uniform&quot;</span>)</span><br><span class="line">    axs[<span class="number">0</span>, <span class="number">0</span>].legend()</span><br><span class="line"></span><br><span class="line">    <span class="comment">## å‡†å‡åŒ€</span></span><br><span class="line">    axs[<span class="number">0</span>, <span class="number">1</span>].scatter(control_points[:, <span class="number">0</span>], control_points[:, <span class="number">1</span>], color=<span class="string">&quot;C0&quot;</span>, facecolors=<span class="string">&quot;none&quot;</span>, label=<span class="string">&quot;control points&quot;</span>)</span><br><span class="line">    axs[<span class="number">0</span>, <span class="number">1</span>].plot(control_points[:, <span class="number">0</span>], control_points[:, <span class="number">1</span>], color=<span class="string">&quot;C0&quot;</span>, linewidth=<span class="number">0.2</span>)</span><br><span class="line">    axs[<span class="number">0</span>, <span class="number">1</span>].plot(P_quasi[:, <span class="number">0</span>], P_quasi[:, <span class="number">1</span>], color=<span class="string">&quot;C3&quot;</span>, label=<span class="string">&quot;quasi&quot;</span>)</span><br><span class="line">    axs[<span class="number">0</span>, <span class="number">1</span>].legend()</span><br><span class="line"></span><br><span class="line">    <span class="comment">## åˆ†æ®µ</span></span><br><span class="line">    axs[<span class="number">1</span>, <span class="number">0</span>].scatter(control_points[:, <span class="number">0</span>], control_points[:, <span class="number">1</span>], color=<span class="string">&quot;C0&quot;</span>, facecolors=<span class="string">&quot;none&quot;</span>, label=<span class="string">&quot;control points&quot;</span>)</span><br><span class="line">    axs[<span class="number">1</span>, <span class="number">0</span>].plot(control_points[:, <span class="number">0</span>], control_points[:, <span class="number">1</span>], color=<span class="string">&quot;C0&quot;</span>, linewidth=<span class="number">0.2</span>)</span><br><span class="line">    axs[<span class="number">1</span>, <span class="number">0</span>].plot(P_piecewise[:, <span class="number">0</span>], P_piecewise[:, <span class="number">1</span>], color=<span class="string">&quot;C3&quot;</span>, label=<span class="string">&quot;piecewise&quot;</span>)</span><br><span class="line">    axs[<span class="number">1</span>, <span class="number">0</span>].legend()</span><br><span class="line">    </span><br><span class="line">    <span class="comment">## HJ éå‡åŒ€</span></span><br><span class="line">    axs[<span class="number">1</span>,<span class="number">1</span>].scatter(control_points[:, <span class="number">0</span>], control_points[:, <span class="number">1</span>], color=<span class="string">&quot;C0&quot;</span>, facecolors=<span class="string">&quot;none&quot;</span>, label=<span class="string">&quot;control points&quot;</span>)</span><br><span class="line">    axs[<span class="number">1</span>,<span class="number">1</span>].plot(control_points[:, <span class="number">0</span>], control_points[:, <span class="number">1</span>], color=<span class="string">&quot;C0&quot;</span>, linewidth=<span class="number">0.2</span>)</span><br><span class="line">    axs[<span class="number">1</span>,<span class="number">1</span>].plot(P_non[:, <span class="number">0</span>], P_non[:, <span class="number">1</span>], color=<span class="string">&quot;C3&quot;</span>, label=<span class="string">&quot;non uniform&quot;</span>)</span><br><span class="line">    axs[<span class="number">1</span>,<span class="number">1</span>].legend()</span><br><span class="line">    plt.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>æ•ˆæœï¼š<br />
<img src="BSpline.png" alt="BSpline" /></p>
<p>todoï¼š<br />
å¾ˆè¯¡å¼‚çš„ä¸€ç‚¹ï¼Œåœ¨ <code>cal_curve</code> å‡½æ•°ä¸­è®¡ç®— <span
class="math inline">\(k\)</span> çš„æ—¶å€™ï¼Œæ»¡è¶³ <span
class="math inline">\(k=m-n-1\)</span>
çš„æ—¶å€™ï¼Œåä¸‰ç§æ ·æ¡æ›²çº¿éƒ½ä¸ç»è¿‡é¦–å°¾æ§åˆ¶ç‚¹ï¼Œè¿™æ˜¯ä¸ç¬¦åˆé¢„æœŸçš„ï¼Œä½†æ˜¯ç”¨ <span
class="math inline">\(k = (m+1) - n - 1\)</span>
çš„æ—¶å€™ï¼Œå´å’Œæ­£å¸¸é¢„æœŸçš„ç»“æœä¸€æ ·ï¼Œä¸çŸ¥é“æ˜¯å“ªé‡Œå‡ºé—®é¢˜äº†ã€‚<br />
æœ‰ç©ºäº†å†æ¥å¡«è¡¥ç©ºç¼º</p>
<h2 id="å‚è€ƒ">6. å‚è€ƒ</h2>
<p><strong>[1]</strong> <a
href="https://b23.tv/e93CqZR">è®¡ç®—æœºå›¾å½¢å­¦-ä¸­å›½å†œå¤§-èµµæ˜-Bç«™
8.5.1~8.6.2</a><br />
<strong>[2]</strong> <a
href="https://blog.csdn.net/deepsprings/article/details/107828889?spm=1001.2014.3001.5506">è¯¦è§£æ ·æ¡æ›²çº¿-CSDN</a><br />
<strong>[3]</strong> <a
href="https://zhuanlan.zhihu.com/p/686518292">Bæ ·æ¡æ›²çº¿å’ŒNurbsæ›²çº¿
å›¾æ–‡å¹¶èŒ‚çš„ç†è§£èŠ‚ç‚¹å’ŒèŠ‚ç‚¹åŒºé—´-çŸ¥ä¹</a><br />
<strong>[4]</strong>ã€Šè®¡ç®—å‡ ä½•ç®—æ³•ä¸å®ç°ã€‹â€”â€” å­”ä»¤å¾·</p>
]]></content>
      <categories>
        <category>è®¡ç®—æœºå›¾å½¢å­¦</category>
        <category>Bæ ·æ¡</category>
      </categories>
      <tags>
        <tag>Bæ ·æ¡</tag>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo ä¸­çš„ markdown è¯­æ³•</title>
    <url>/2025/01/07/Hexo%E4%B8%AD%E7%9A%84md%E8%AF%AD%E6%B3%95/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><span id="more"></span>
<h2 id="é¡µå†…è·³è½¬">1. é¡µå†…è·³è½¬</h2>
<p>è·³è½¬åˆ°åœ°æ–¹åé¢åŠ ä¸Š
<code>&lt;span id="jump"&gt;&lt;/span&gt;</code><br />
éœ€è¦è·³è½¬çš„åœ°æ–¹ <code>[è·³è½¬åˆ°](#jump)</code><br />
æ³¨ï¼š<code>jump</code> å­—æ®µè²Œä¼¼ä¸èƒ½æ˜¯ä¸­æ–‡</p>
<h2 id="åšå®¢åµŒå…¥å›¾ç‰‡">2. åšå®¢åµŒå…¥å›¾ç‰‡</h2>
<p>åœ¨ Hexo çš„ <code>_config.yml</code> æ–‡ä»¶ä¸‹è®¾ç½®ï¼š</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">post_asset_folder:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">marked:</span></span><br><span class="line">  <span class="attr">prependRoot:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">postAsset:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p>æ­¤åå½“æ–°å»º <code>.md</code>
æ–‡ä»¶æ—¶ï¼Œä¼šåœ¨åŒçº§ç›®å½•ä¸‹è‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªåŒåæ–‡ä»¶å¤¹ï¼Œé‡Œé¢è¯¾ä»¥ç”¨äºå­˜æ”¾é™„ä»¶ï¼ˆå¦‚å›¾ç‰‡ç­‰ï¼‰ã€‚<br />
æ­¤æ—¶å›¾ç‰‡å¼•ç”¨è¯­æ³•ï¼š <code>![æ–‡æœ¬](å›¾ç‰‡åå­—)</code></p>
<h2 id="html-æ’å…¥å›¾ç‰‡">3. html æ’å…¥å›¾ç‰‡</h2>
<p><code>&lt;img src="å›¾ç‰‡è·¯å¾„" width="åƒç´ æˆ–è€…ç¼©æ”¾ç™¾åˆ†æ¯”" height="åƒç´ æˆ–è€…ç¼©æ”¾ç™¾åˆ†æ¯”"/&gt;</code></p>
<h2 id="æ•°å­¦å…¬å¼ä»¥åŠç¼–å·é—®é¢˜">4. æ•°å­¦å…¬å¼ä»¥åŠç¼–å·é—®é¢˜</h2>
<p>æ¸²æŸ“å¼•æ“ï¼šMathJax<br />
æ’ä»¶ï¼šhexo-renderer-pandoc<br />
å‚æ•°ï¼ˆä½äº<code>_config.next.yml</code>ï¼‰ï¼š<code>mathjax.tags = all</code></p>
<p>å†™è¡Œé—´å…¬å¼çš„æ—¶å€™ï¼Œä¸¤ä¸ª <code>$$</code>
ä¸€å®šè¦åˆ†åˆ«ç´§é å¼€å¤´å’Œç»“å°¾ï¼Œå¹¶ä¸”ä¸­é—´ä¸èƒ½æœ‰ç©ºè¡Œï¼Œå¦åˆ™åœ¨ç½‘é¡µä¸Šä¼šçœ‹è§å¼€å¤´å’Œç»“å°¾çš„ä¸¤ä¸ª
<code>$$</code> ç¬¦å·ï¼ˆè™½ç„¶å…¬å¼å¯ä»¥æ­£å¸¸æ¸²æŸ“å‡ºæ¥ï¼‰ã€‚</p>
<p>åœ¨ä¸Šè¿°ç¯å¢ƒä¸‹ï¼Œhexo ä¼šè‡ªåŠ¨ç»™æ¯ä¸ªå…¬å¼è¿›è¡Œç¼–å·ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ç”¨
<code>\tag&#123;&#125;</code> è‡ªå·±è®¾ç½®ç¼–å·ã€‚å¦‚æœä½¿ç”¨ <code>\tag&#123;&#125;</code>
è‡ªå®šä¹‰ç¼–å·ï¼Œé‚£ä¹ˆ hexo
ä¾ç„¶ä¼šè·³è¿‡è¿™ä¸ªå…¬å¼å¹¶ä¸”å¯¹åé¢çš„å…¬å¼è¿›è¡Œè‡ªåŠ¨ç¼–å·ã€‚<br />
å½“å…¬å¼ä¸éœ€è¦ç¼–å·çš„æ—¶å€™ï¼Œå¯ä»¥ç”¨ <code>\nonumber</code> æˆ–
<code>\notag</code> æ¥æ ‡è®°ï¼›æ­¤å¤–ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ å¸¦ <code>*</code> çš„
<code>equation</code> ç¯å¢ƒæ¥å–æ¶ˆå¯¹å…¬å¼çš„ç¼–å·ã€‚</p>
<p>å¯¹äºå…¬å¼å¼•ç”¨ï¼ŒNext å®˜æ–¹æ–‡æ¡£ä¸­æåˆ°å¯ä»¥ç”¨ <code>\label&#123;&#125;</code>
å’Œå¯¹åº”çš„ <code>\eqref&#123;&#125;</code> æ¥è¿›è¡Œç›¸åº”çš„å…¬å¼å¼•ç”¨ã€‚</p>
<p>å‚è€ƒï¼š<br />
[1] <a
href="https://theme-next.js.org/docs/third-party-services/math-equations">Next
å®˜æ–¹æ–‡æ¡£</a><br />
[2] <a
href="https://docs.mathjax.org/en/latest/input/tex/eqnumbers.html">MathJax
å…¬å¼ç¼–å·è¯´æ˜</a></p>
]]></content>
      <tags>
        <tag>markdown</tag>
      </tags>
  </entry>
</search>
