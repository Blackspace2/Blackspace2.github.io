<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>OpenCVå…¥é—¨å­¦ä¹ -appå·¥å…·ï¼ˆä¸‹ï¼‰</title>
    <url>/2025/02/02/OpenCV%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-app%E5%B7%A5%E5%85%B7%EF%BC%88%E4%B8%8B%EF%BC%89/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><span id="more"></span>
]]></content>
      <categories>
        <category>è®¡ç®—æœºè§†è§‰</category>
      </categories>
      <tags>
        <tag>è®¡ç®—æœºè§†è§‰</tag>
        <tag>C/C++</tag>
      </tags>
  </entry>
  <entry>
    <title>OpenCVå…¥é—¨å­¦ä¹ -appå·¥å…·ï¼ˆä¸Šï¼‰</title>
    <url>/2025/02/02/OpenCV%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-app%E5%B7%A5%E5%85%B7%EF%BC%88%E4%B8%8A%EF%BC%89/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><span id="more"></span>
]]></content>
      <categories>
        <category>è®¡ç®—æœºè§†è§‰</category>
      </categories>
      <tags>
        <tag>è®¡ç®—æœºè§†è§‰</tag>
        <tag>C/C++</tag>
      </tags>
  </entry>
  <entry>
    <title>OpenCVå…¥é—¨å­¦ä¹ -å›¾åƒå¤„ç†ï¼ˆä¸‹ï¼‰</title>
    <url>/2025/02/02/OpenCV%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86%EF%BC%88%E4%B8%8B%EF%BC%89/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><span id="more"></span>
]]></content>
      <categories>
        <category>è®¡ç®—æœºè§†è§‰</category>
      </categories>
      <tags>
        <tag>è®¡ç®—æœºè§†è§‰</tag>
        <tag>C/C++</tag>
      </tags>
  </entry>
  <entry>
    <title>OpenCVå…¥é—¨å­¦ä¹ -å›¾åƒå¤„ç†ï¼ˆä¸Šï¼‰</title>
    <url>/2025/02/02/OpenCV%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86%EF%BC%88%E4%B8%8A%EF%BC%89/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><span id="more"></span>
]]></content>
      <categories>
        <category>è®¡ç®—æœºè§†è§‰</category>
      </categories>
      <tags>
        <tag>è®¡ç®—æœºè§†è§‰</tag>
        <tag>C/C++</tag>
      </tags>
  </entry>
  <entry>
    <title>OpenCVå…¥é—¨å­¦ä¹ -æ ¸å¿ƒåŠŸèƒ½ï¼ˆä¸‹ï¼‰</title>
    <url>/2025/01/27/OpenCV%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E6%A0%B8%E5%BF%83%E5%8A%9F%E8%83%BD%EF%BC%88%E4%B8%8B%EF%BC%89/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><span id="more"></span>
<a href="/2025/01/26/OpenCV%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E6%A0%B8%E5%BF%83%E5%8A%9F%E8%83%BD%EF%BC%88%E4%B8%8A%EF%BC%89/" title="OpenCVå…¥é—¨å­¦ä¹ -æ ¸å¿ƒåŠŸèƒ½ï¼ˆä¸Šï¼‰">OpenCVå…¥é—¨å­¦ä¹ -æ ¸å¿ƒåŠŸèƒ½ï¼ˆä¸Šï¼‰</a>
<h2 id="è°ƒæ•´å›¾åƒçš„å¯¹æ¯”åº¦å’Œäº®åº¦">è°ƒæ•´å›¾åƒçš„å¯¹æ¯”åº¦å’Œäº®åº¦</h2>
<p>OpenCVæ˜¯è®¡ç®—æœºè§†è§‰é¢†åŸŸçš„é‡è¦å·¥å…·ï¼Œæœ¬èŠ‚å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨åƒç´ å˜æ¢è°ƒæ•´å›¾åƒçš„äº®åº¦å’Œå¯¹æ¯”åº¦ï¼Œå¹¶é€šè¿‡
Gamma æ ¡æ­£ä¼˜åŒ–å›¾åƒè´¨é‡ã€‚</p>
<h3 id="ç†è®ºåŸºç¡€">ç†è®ºåŸºç¡€</h3>
<p>å›¾åƒå¤„ç†ä¸­çš„<strong>åƒç´ å˜æ¢</strong>æŒ‡è¾“å‡ºåƒç´ ä»…ä¾èµ–è¾“å…¥åƒç´ å€¼çš„æ“ä½œã€‚è°ƒæ•´äº®åº¦ä¸å¯¹æ¯”åº¦çš„å…¬å¼ä¸ºï¼š<br />
<span class="math display">\[\nonumber g(i,j) = \alpha \cdot f(i,j) +
\beta\]</span></p>
<ul>
<li><strong>Î±ï¼ˆå¢ç›Šï¼‰</strong>ï¼šæ§åˆ¶å¯¹æ¯”åº¦ï¼ˆå»ºè®®èŒƒå›´ï¼š<span
class="math inline">\(1.0-3.0\)</span>ï¼‰ã€‚<br />
</li>
<li><strong>Î²ï¼ˆåç½®ï¼‰</strong>ï¼šæ§åˆ¶äº®åº¦ï¼ˆå»ºè®®èŒƒå›´ï¼š<span
class="math inline">\(0-100\)</span>ï¼‰ã€‚</li>
</ul>
<p>é€šè¿‡ <code>cv::saturate_cast&lt;uchar&gt;</code> ç¡®ä¿è®¡ç®—ç»“æœåœ¨ <span
class="math inline">\(0-255\)</span> èŒƒå›´å†…ï¼Œé¿å…æ•°å€¼æº¢å‡ºã€‚</p>
<h3 id="ä»£ç å®ç°">ä»£ç å®ç°</h3>
<h4 id="æ ¸å¿ƒä»£ç ç¤ºä¾‹">æ ¸å¿ƒä»£ç ç¤ºä¾‹</h4>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;opencv2/opencv.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// è¯»å–å›¾åƒ</span></span><br><span class="line">    cv::Mat image = cv::<span class="built_in">imread</span>(<span class="string">&quot;lena.jpg&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (image.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Failed to load image!&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆå§‹åŒ–è¾“å‡ºå›¾åƒ</span></span><br><span class="line">    cv::Mat new_image = cv::Mat::<span class="built_in">zeros</span>(image.<span class="built_in">size</span>(), image.<span class="built_in">type</span>());</span><br><span class="line"></span><br><span class="line">    <span class="type">double</span> alpha = <span class="number">1.0</span>; <span class="comment">// å¯¹æ¯”åº¦å‚æ•°</span></span><br><span class="line">    <span class="type">int</span> beta = <span class="number">0</span>;       <span class="comment">// äº®åº¦å‚æ•°</span></span><br><span class="line"></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Enter alpha [1.0-3.0]: &quot;</span>;</span><br><span class="line">    std::cin &gt;&gt; alpha;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Enter beta [0-100]: &quot;</span>;</span><br><span class="line">    std::cin &gt;&gt; beta;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// éå†æ¯ä¸ªåƒç´ </span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> y = <span class="number">0</span>; y &lt; image.rows; y++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> x = <span class="number">0</span>; x &lt; image.cols; x++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> c = <span class="number">0</span>; c &lt; image.<span class="built_in">channels</span>(); c++) &#123;</span><br><span class="line">                new_image.<span class="built_in">at</span>&lt;cv::Vec3b&gt;(y, x)[c] = cv::<span class="built_in">saturate_cast</span>&lt;uchar&gt;(</span><br><span class="line">                    alpha * image.<span class="built_in">at</span>&lt;cv::Vec3b&gt;(y, x)[c] + beta</span><br><span class="line">                );</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ˜¾ç¤ºç»“æœ</span></span><br><span class="line">    cv::<span class="built_in">imshow</span>(<span class="string">&quot;Original&quot;</span>, image);</span><br><span class="line">    cv::<span class="built_in">imshow</span>(<span class="string">&quot;Adjusted&quot;</span>, new_image);</span><br><span class="line">    cv::<span class="built_in">waitKey</span>(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="ä»£ç è¯´æ˜">ä»£ç è¯´æ˜</h4>
<ol type="1">
<li><p><strong>åƒç´ éå†</strong>ï¼šé€šè¿‡ä¸‰é‡å¾ªç¯è®¿é—®æ¯ä¸ªåƒç´ çš„BGRé€šé“ã€‚<br />
</p></li>
<li><p><strong>æ•°å€¼é¥±å’Œå¤„ç†</strong>ï¼š<code>cv::saturate_cast&lt;uchar&gt;</code>ç¡®ä¿ç»“æœåœ¨åˆç†èŒƒå›´å†…ã€‚<br />
</p></li>
<li><p><strong>é«˜æ•ˆæ›¿ä»£æ–¹æ¡ˆ</strong>ï¼šå¯ä½¿ç”¨<code>cv::Mat::convertTo</code>æ›¿ä»£å¾ªç¯ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">image.<span class="built_in">convertTo</span>(new_image, <span class="number">-1</span>, alpha, beta);</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="å®é™…åº”ç”¨ç¤ºä¾‹">å®é™…åº”ç”¨ç¤ºä¾‹</h3>
<p>è°ƒæ•´ <code>Î±=2.2</code> å’Œ <code>Î²=50</code>
å¯æ˜¾è‘—æå‡æš—å›¾åƒçš„äº®åº¦ï¼Œä½†å¯èƒ½å¯¼è‡´é«˜å…‰åŒºåŸŸè¿‡æ›ï¼ˆå¦‚äº‘å±‚ç»†èŠ‚ä¸¢å¤±ï¼‰ã€‚æ­¤æ—¶å¯ç»“åˆ
<span class="math inline">\(\gamma\)</span> æ ¡æ­£ä¼˜åŒ–ã€‚</p>
<h3 id="gamma-æ ¡æ­£">Gamma æ ¡æ­£</h3>
<p>Gamma æ ¡æ­£é€šè¿‡éçº¿æ€§å˜æ¢è°ƒæ•´äº®åº¦ï¼š<br />
<span class="math display">\[\nonumber O = \left( \frac{I}{255}
\right)^\gamma \times 255\]</span></p>
<ul>
<li><strong>Î³ &lt; 1</strong>ï¼šæå‡æš—éƒ¨äº®åº¦ã€‚<br />
</li>
<li><strong>Î³ &gt; 1</strong>ï¼šå¢å¼ºäº®éƒ¨å¯¹æ¯”åº¦ã€‚</li>
</ul>
<span id="fig1"></span>
<figure>
<img src="io_gamma.svg" alt="io_gamma" loading="lazy"/>
<figcaption>
å›¾1.ä¸åŒ <span class="math inline">\(\gamma\)</span> å€¼å¯¹åº”çš„å›¾åƒ
</figcaption>
</figure>
<h4 id="å®ç°ä»£ç ">å®ç°ä»£ç </h4>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºæŸ¥æ‰¾è¡¨</span></span><br><span class="line"><span class="function">cv::Mat <span class="title">lookupTable</span><span class="params">(<span class="number">1</span>, <span class="number">256</span>, CV_8U)</span></span>;</span><br><span class="line">uchar* p = lookupTable.<span class="built_in">ptr</span>();</span><br><span class="line"><span class="type">double</span> gamma = <span class="number">0.4</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">256</span>; ++i) &#123;</span><br><span class="line">    <span class="comment">// å››èˆäº”å…¥ï¼Œé¥±å’Œæ—¶æˆªæ–­</span></span><br><span class="line">    p[i] = cv::<span class="built_in">saturate_cast</span>&lt;uchar&gt;(<span class="built_in">pow</span>(i / <span class="number">255.0</span>, gamma) * <span class="number">255.0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åº”ç”¨ Gamma æ ¡æ­£</span></span><br><span class="line">cv::Mat corrected;</span><br><span class="line">cv::<span class="built_in">LUT</span>(image, lookupTable, corrected);</span><br></pre></td></tr></table></figure>
<h3 id="æ€§èƒ½ä¼˜åŒ–æç¤º">æ€§èƒ½ä¼˜åŒ–æç¤º</h3>
<ul>
<li><strong>é¿å…é€åƒç´ æ“ä½œ</strong>ï¼šä¼˜å…ˆä½¿ç”¨å†…ç½®å‡½æ•°ï¼ˆå¦‚<code>cv::convertTo</code>å’Œ<code>cv::LUT</code>ï¼‰ã€‚<br />
</li>
<li><strong>é¢„è®¡ç®—æŸ¥æ‰¾è¡¨</strong>ï¼šå‡å°‘é‡å¤è®¡ç®—ï¼Œæå‡ Gamma
æ ¡æ­£æ•ˆç‡ã€‚</li>
</ul>
<p>é€šè¿‡è°ƒæ•´Î±ã€Î²å’Œ <span class="math inline">\(\gamma\)</span>
å€¼ï¼Œå¯çµæ´»æ§åˆ¶å›¾åƒæ•ˆæœã€‚è¿™äº›æ–¹æ³•è™½åŸºç¡€ï¼Œä½†èƒ½ä¸ºå¤æ‚å›¾åƒå¤„ç†ä»»åŠ¡å¥ å®šåŸºç¡€ã€‚</p>
<h2 id="ç¦»æ•£å‚…é‡Œå¶å˜æ¢">ç¦»æ•£å‚…é‡Œå¶å˜æ¢</h2>
<h3 id="ä»€ä¹ˆæ˜¯ç¦»æ•£å‚…é‡Œå¶å˜æ¢">ä»€ä¹ˆæ˜¯ç¦»æ•£å‚…é‡Œå¶å˜æ¢ï¼Ÿ</h3>
<p>ç¦»æ•£å‚…é‡Œå¶å˜æ¢ï¼ˆDFTï¼‰æ˜¯ä¸€ç§å°†å›¾åƒä»ç©ºé—´åŸŸè½¬æ¢åˆ°é¢‘ç‡åŸŸçš„æ•°å­¦å·¥å…·ã€‚é€šè¿‡åˆ†è§£å›¾åƒçš„æ­£å¼¦å’Œä½™å¼¦åˆ†é‡ï¼ŒDFTå¯ä»¥å¸®åŠ©æˆ‘ä»¬åˆ†æå›¾åƒä¸­çš„å‡ ä½•ç»“æ„ç‰¹å¾ã€‚å…¶æ•°å­¦è¡¨è¾¾å¼ä¸ºï¼š<br />
<span class="math display">\[
F(k, l) = \sum_{i=0}^{N-1} \sum_{j=0}^{N-1}
f(i,j)e^{-i2\pi\left(\frac{jk}{N}+\frac{ik}{N}\right)} \nonumber  
\]</span> å…¶ä¸­ï¼Œå¤æ•°ç»“æœå¯è¡¨ç¤ºä¸ºï¼š<br />
<span class="math display">\[  
e^{ix} = \cos x + i\sin x \nonumber  
\]</span></p>
<h3 id="opencvå®ç°dftçš„å…³é”®æ­¥éª¤">OpenCVå®ç°DFTçš„å…³é”®æ­¥éª¤</h3>
<h4 id="æ‰©å±•å›¾åƒè‡³æœ€ä½³å°ºå¯¸">æ‰©å±•å›¾åƒè‡³æœ€ä½³å°ºå¯¸</h4>
<p>DFTçš„è®¡ç®—æ•ˆç‡ä¸å›¾åƒå°ºå¯¸ç›¸å…³ï¼Œæœ€ä½³å°ºå¯¸é€šå¸¸æ˜¯2ã€3ã€5çš„å€æ•°ã€‚é€šè¿‡<code>cv::getOptimalDFTSize()</code>è·å–æœ€ä¼˜å°ºå¯¸ï¼Œå¹¶ç”¨<code>cv::copyMakeBorder()</code>å¡«å……å›¾åƒè¾¹ç•Œï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">cv::Mat padded;  </span><br><span class="line"><span class="type">int</span> rows_pad = cv::<span class="built_in">getOptimalDFTSize</span>(I.rows);  </span><br><span class="line"><span class="type">int</span> cols_pad = cv::<span class="built_in">getOptimalDFTSize</span>(I.cols);  </span><br><span class="line">cv::<span class="built_in">copyMakeBorder</span>(I, padded, <span class="number">0</span>, rows_pad - I.rows, <span class="number">0</span>, cols_pad - I.cols,  </span><br><span class="line">                   cv::BORDER_CONSTANT, cv::Scalar::<span class="built_in">all</span>(<span class="number">0</span>));  </span><br></pre></td></tr></table></figure>
<h4 id="åˆ›å»ºå¤æ•°çŸ©é˜µ">åˆ›å»ºå¤æ•°çŸ©é˜µ</h4>
<p>DFTç»“æœä¸ºå¤æ•°ï¼Œéœ€å°†å›¾åƒè½¬æ¢ä¸ºæµ®ç‚¹ç±»å‹å¹¶åˆå¹¶å®éƒ¨ä¸è™šéƒ¨ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">cv::Mat planes[] = &#123;  </span><br><span class="line">    cv::<span class="built_in">Mat_</span>&lt;<span class="type">float</span>&gt;(padded),  </span><br><span class="line">    cv::Mat::<span class="built_in">zeros</span>(padded.<span class="built_in">size</span>(), CV_32F)  </span><br><span class="line">&#125;;  </span><br><span class="line">cv::Mat complexI;  </span><br><span class="line">cv::<span class="built_in">merge</span>(planes, <span class="number">2</span>, complexI);  </span><br></pre></td></tr></table></figure>
<h4 id="æ‰§è¡Œdftå˜æ¢">æ‰§è¡ŒDFTå˜æ¢</h4>
<p>ä½¿ç”¨<code>cv::dft()</code>è¿›è¡Œå‚…é‡Œå¶å˜æ¢ï¼Œæ”¯æŒåŸåœ°è®¡ç®—ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">cv::<span class="built_in">dft</span>(complexI, complexI);  </span><br></pre></td></tr></table></figure>
<h4 id="è®¡ç®—å¹…åº¦è°±">è®¡ç®—å¹…åº¦è°±</h4>
<p>å°†å¤æ•°ç»“æœåˆ†è§£ä¸ºå®éƒ¨å’Œè™šéƒ¨ï¼Œè®¡ç®—å¹…åº¦å¹¶è½¬ä¸ºå¯¹æ•°å°ºåº¦ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">cv::<span class="built_in">split</span>(complexI, planes);  </span><br><span class="line">cv::<span class="built_in">magnitude</span>(planes[<span class="number">0</span>], planes[<span class="number">1</span>], planes[<span class="number">0</span>]);  </span><br><span class="line">cv::Mat magI = planes[<span class="number">0</span>];  </span><br><span class="line">magI += cv::Scalar::<span class="built_in">all</span>(<span class="number">1</span>);  </span><br><span class="line">cv::<span class="built_in">log</span>(magI, magI);  </span><br></pre></td></tr></table></figure>
<h4 id="é¢‘è°±ä¸­å¿ƒåŒ–ä¸å½’ä¸€åŒ–">é¢‘è°±ä¸­å¿ƒåŒ–ä¸å½’ä¸€åŒ–</h4>
<p>äº¤æ¢é¢‘è°±è±¡é™ä½¿ä½é¢‘åˆ†é‡å±…ä¸­ï¼Œå¹¶è¿›è¡Œå½’ä¸€åŒ–ä»¥ä¾¿æ˜¾ç¤ºï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">magI = <span class="built_in">magI</span>(cv::<span class="built_in">Rect</span>(<span class="number">0</span>, <span class="number">0</span>, magI.cols &amp; <span class="number">-2</span>, magI.rows &amp; <span class="number">-2</span>));  </span><br><span class="line"><span class="type">int</span> cx = magI.cols / <span class="number">2</span>, cy = magI.rows / <span class="number">2</span>;  </span><br><span class="line"><span class="comment">// äº¤æ¢å››ä¸ªè±¡é™  </span></span><br><span class="line"><span class="function">cv::Mat <span class="title">q0</span><span class="params">(magI, cv::Rect(<span class="number">0</span>, <span class="number">0</span>, cx, cy))</span></span>;  </span><br><span class="line"><span class="function">cv::Mat <span class="title">q1</span><span class="params">(magI, cv::Rect(cx, <span class="number">0</span>, cx, cy))</span></span>;  </span><br><span class="line"><span class="function">cv::Mat <span class="title">q2</span><span class="params">(magI, cv::Rect(<span class="number">0</span>, cy, cx, cy))</span></span>;  </span><br><span class="line"><span class="function">cv::Mat <span class="title">q3</span><span class="params">(magI, cv::Rect(cx, cy, cx, cy))</span></span>;  </span><br><span class="line">q<span class="number">0.</span><span class="built_in">copyTo</span>(tmp); q<span class="number">3.</span><span class="built_in">copyTo</span>(q0); tmp.<span class="built_in">copyTo</span>(q3);  </span><br><span class="line">q<span class="number">1.</span><span class="built_in">copyTo</span>(tmp); q<span class="number">2.</span><span class="built_in">copyTo</span>(q1); tmp.<span class="built_in">copyTo</span>(q2);  </span><br><span class="line"><span class="comment">// å½’ä¸€åŒ–åˆ°[0,1]èŒƒå›´  </span></span><br><span class="line">cv::<span class="built_in">normalize</span>(magI, magI, <span class="number">0</span>, <span class="number">1</span>, cv::NORM_MINMAX);  </span><br></pre></td></tr></table></figure>
<h3 id="åº”ç”¨åœºæ™¯ç¤ºä¾‹">åº”ç”¨åœºæ™¯ç¤ºä¾‹</h3>
<p>é€šè¿‡åˆ†æé¢‘è°±çš„äº®åº¦åˆ†å¸ƒï¼Œå¯ä»¥æ£€æµ‹å›¾åƒä¸­çš„å‡ ä½•æ–¹å‘ç‰¹å¾ã€‚ä¾‹å¦‚ï¼š</p>
<ul>
<li><strong>æ°´å¹³æ–‡æœ¬</strong>ï¼šé¢‘è°±ä¸­ä¼šå‡ºç°å‚ç›´æ–¹å‘çš„é«˜äº®çº¿ï¼Œå¯¹åº”æ–‡æœ¬çš„æ¨ªå‘æ’åˆ—ã€‚<br />
</li>
<li><strong>æ—‹è½¬æ–‡æœ¬</strong>ï¼šé«˜äº®ç‚¹ä¼šéšæ–‡æœ¬æ—‹è½¬æ–¹å‘åç§»ï¼Œé€šè¿‡æ­¤åç§»å¯è®¡ç®—æ ¡æ­£è§’åº¦ã€‚</li>
</ul>
<h3 id="å®Œæ•´ä»£ç ç¤ºä¾‹">å®Œæ•´ä»£ç ç¤ºä¾‹</h3>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;opencv2/core.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;opencv2/imgproc.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;opencv2/highgui.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// è¯»å–ç°åº¦å›¾åƒ</span></span><br><span class="line">    cv::Mat I = cv::<span class="built_in">imread</span>(<span class="string">&quot;dog.jpg&quot;</span>, cv::IMREAD_GRAYSCALE);</span><br><span class="line">    <span class="keyword">if</span> (I.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">        std::cerr &lt;&lt; <span class="string">&quot;Error: Could not load image&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ­¥éª¤1ï¼šæ‰©å±•å›¾åƒè‡³æœ€ä½³DFTå°ºå¯¸</span></span><br><span class="line">    cv::Mat padded;</span><br><span class="line">    <span class="type">int</span> rows_opt = cv::<span class="built_in">getOptimalDFTSize</span>(I.rows);</span><br><span class="line">    <span class="type">int</span> cols_opt = cv::<span class="built_in">getOptimalDFTSize</span>(I.cols);</span><br><span class="line">    cv::<span class="built_in">copyMakeBorder</span>(I, padded,</span><br><span class="line">        <span class="number">0</span>, rows_opt - I.rows,</span><br><span class="line">        <span class="number">0</span>, cols_opt - I.cols,</span><br><span class="line">        cv::BORDER_CONSTANT, cv::Scalar::<span class="built_in">all</span>(<span class="number">0</span>));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ­¥éª¤2ï¼šåˆ›å»ºå¤æ•°çŸ©é˜µï¼ˆå®éƒ¨+è™šéƒ¨ï¼‰</span></span><br><span class="line">    cv::Mat planes[] = &#123;</span><br><span class="line">        cv::<span class="built_in">Mat_</span>&lt;<span class="type">float</span>&gt;(padded),</span><br><span class="line">        cv::Mat::<span class="built_in">zeros</span>(padded.<span class="built_in">size</span>(), CV_32F)</span><br><span class="line">    &#125;;</span><br><span class="line">    cv::Mat complexI;</span><br><span class="line">    cv::<span class="built_in">merge</span>(planes, <span class="number">2</span>, complexI);  <span class="comment">// åˆå¹¶ä¸ºåŒé€šé“çŸ©é˜µ</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ­¥éª¤3ï¼šæ‰§è¡Œç¦»æ•£å‚…é‡Œå¶å˜æ¢</span></span><br><span class="line">    cv::<span class="built_in">dft</span>(complexI, complexI);  <span class="comment">// åŸåœ°è®¡ç®—</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ­¥éª¤4ï¼šè®¡ç®—å¹…åº¦è°±</span></span><br><span class="line">    cv::<span class="built_in">split</span>(complexI, planes);  <span class="comment">// planes[0] = Re, planes[1] = Im</span></span><br><span class="line">    cv::<span class="built_in">magnitude</span>(planes[<span class="number">0</span>], planes[<span class="number">1</span>], planes[<span class="number">0</span>]);</span><br><span class="line">    cv::Mat magI = planes[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ­¥éª¤5ï¼šå¯¹æ•°å°ºåº¦è½¬æ¢</span></span><br><span class="line">    magI += cv::Scalar::<span class="built_in">all</span>(<span class="number">1</span>);</span><br><span class="line">    cv::<span class="built_in">log</span>(magI, magI);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ­¥éª¤6ï¼šè£å‰ªä¸ºå¶æ•°å°ºå¯¸</span></span><br><span class="line">    magI = <span class="built_in">magI</span>(cv::<span class="built_in">Rect</span>(<span class="number">0</span>, <span class="number">0</span>, magI.cols &amp; <span class="number">-2</span>, magI.rows &amp; <span class="number">-2</span>));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ­¥éª¤7ï¼šé¢‘è°±ä¸­å¿ƒåŒ–ï¼ˆäº¤æ¢è±¡é™ï¼‰</span></span><br><span class="line">    <span class="type">int</span> cx = magI.cols / <span class="number">2</span>;</span><br><span class="line">    <span class="type">int</span> cy = magI.rows / <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">cv::Mat <span class="title">q0</span><span class="params">(magI, cv::Rect(<span class="number">0</span>, <span class="number">0</span>, cx, cy))</span></span>;   <span class="comment">// å·¦ä¸Š</span></span><br><span class="line">    <span class="function">cv::Mat <span class="title">q1</span><span class="params">(magI, cv::Rect(cx, <span class="number">0</span>, cx, cy))</span></span>;  <span class="comment">// å³ä¸Š</span></span><br><span class="line">    <span class="function">cv::Mat <span class="title">q2</span><span class="params">(magI, cv::Rect(<span class="number">0</span>, cy, cx, cy))</span></span>;  <span class="comment">// å·¦ä¸‹</span></span><br><span class="line">    <span class="function">cv::Mat <span class="title">q3</span><span class="params">(magI, cv::Rect(cx, cy, cx, cy))</span></span>; <span class="comment">// å³ä¸‹</span></span><br><span class="line"></span><br><span class="line">    cv::Mat tmp;</span><br><span class="line">    <span class="comment">// äº¤æ¢å·¦ä¸Šä¸å³ä¸‹</span></span><br><span class="line">    q<span class="number">0.</span><span class="built_in">copyTo</span>(tmp);</span><br><span class="line">    q<span class="number">3.</span><span class="built_in">copyTo</span>(q0);</span><br><span class="line">    tmp.<span class="built_in">copyTo</span>(q3);</span><br><span class="line">    <span class="comment">// äº¤æ¢å³ä¸Šä¸å·¦ä¸‹</span></span><br><span class="line">    q<span class="number">1.</span><span class="built_in">copyTo</span>(tmp);</span><br><span class="line">    q<span class="number">2.</span><span class="built_in">copyTo</span>(q1);</span><br><span class="line">    tmp.<span class="built_in">copyTo</span>(q2);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ­¥éª¤8ï¼šå½’ä¸€åŒ–æ˜¾ç¤ºèŒƒå›´</span></span><br><span class="line">    cv::<span class="built_in">normalize</span>(magI, magI, <span class="number">0</span>, <span class="number">1</span>, cv::NORM_MINMAX);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ˜¾ç¤ºç»“æœ</span></span><br><span class="line">    cv::<span class="built_in">imshow</span>(<span class="string">&quot;Input Image&quot;</span>, I);</span><br><span class="line">    cv::<span class="built_in">imshow</span>(<span class="string">&quot;Spectrum Magnitude&quot;</span>, magI);</span><br><span class="line">    cv::<span class="built_in">waitKey</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é€šè¿‡ä¸Šè¿°æ­¥éª¤ï¼ŒOpenCVå®ç°äº†ä»ç©ºé—´åŸŸåˆ°é¢‘ç‡åŸŸçš„é«˜æ•ˆè½¬æ¢ï¼Œä¸ºå›¾åƒåˆ†æä¸å¢å¼ºæä¾›äº†é‡è¦åŸºç¡€ã€‚</p>
]]></content>
      <categories>
        <category>è®¡ç®—æœºè§†è§‰</category>
      </categories>
      <tags>
        <tag>è®¡ç®—æœºè§†è§‰</tag>
        <tag>C/C++</tag>
      </tags>
  </entry>
  <entry>
    <title>OpenCVå…¥é—¨å­¦ä¹ -æ ¸å¿ƒåŠŸèƒ½ï¼ˆä¸Šï¼‰</title>
    <url>/2025/01/26/OpenCV%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E6%A0%B8%E5%BF%83%E5%8A%9F%E8%83%BD%EF%BC%88%E4%B8%8A%EF%BC%89/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><span id="more"></span>
<p>ç¯å¢ƒï¼š</p>
<ul>
<li>win11 x64</li>
<li>OpenCV 4.9.0</li>
<li>VS 2022 (v143)</li>
<li>C++ (ISO C++ 14 æ ‡å‡†)</li>
</ul>
<h2 id="mat-ç±»">1. <code>Mat</code> ç±»</h2>
<h3 id="æ•°æ®ç»“æ„ä¸å†…å­˜ç®¡ç†">1.1. æ•°æ®ç»“æ„ä¸å†…å­˜ç®¡ç†</h3>
<p><code>Mat</code>
æ˜¯OpenCVçš„æ ¸å¿ƒå›¾åƒå®¹å™¨ç±»ï¼Œé‡‡ç”¨<strong>è‡ªåŠ¨å†…å­˜ç®¡ç†</strong>æœºåˆ¶ï¼Œæ— éœ€æ‰‹åŠ¨åˆ†é…/é‡Šæ”¾å†…å­˜ã€‚å…¶ç»“æ„åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼š</p>
<ul>
<li><strong>çŸ©é˜µå¤´(Header)</strong><br />
å›ºå®šå¤§å°ï¼ˆçº¦æ•°åå­—èŠ‚ï¼‰ï¼Œå­˜å‚¨å…ƒä¿¡æ¯ï¼š
<ul>
<li>çŸ©é˜µç»´åº¦ï¼ˆrows, cols, channelsï¼‰</li>
<li>æ•°æ®ç±»å‹ï¼ˆå¦‚ <code>CV_8UC3</code> ï¼‰</li>
<li>å­˜å‚¨å¸ƒå±€ï¼ˆstepï¼šæ¯è¡Œçš„å­—èŠ‚æ•°ï¼‰</li>
<li>å¼•ç”¨è®¡æ•°å™¨</li>
<li>æ•°æ®æŒ‡é’ˆåœ°å€</li>
</ul></li>
<li><strong>æ•°æ®å—(Data)</strong><br />
åŠ¨æ€å†…å­˜åŒºåŸŸï¼Œå­˜å‚¨å®é™…åƒç´ å€¼ï¼Œé‡‡ç”¨<strong>å¼•ç”¨è®¡æ•°æœºåˆ¶</strong>ç®¡ç†ï¼š
<ul>
<li>æµ…æ‹·è´æ—¶å¤šä¸ª <code>Mat</code> å¯¹è±¡å…±äº«æ•°æ®å—</li>
<li>æœ€åä¸€ä¸ªå¼•ç”¨å¯¹è±¡é”€æ¯æ—¶è‡ªåŠ¨é‡Šæ”¾å†…å­˜</li>
</ul></li>
</ul>
<h3 id="æ·±æµ…æ‹·è´å¯¹æ¯”">1.2. æ·±æµ…æ‹·è´å¯¹æ¯”</h3>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">cv::Mat A = cv::<span class="built_in">imread</span>(<span class="string">&quot;dog.jpg&quot;</span>, cv::IMREAD_COLOR);</span><br><span class="line">cv::Mat B = A;         <span class="comment">// æµ…æ‹·è´ï¼ˆä»…å¤åˆ¶Headerï¼‰</span></span><br><span class="line">cv::Mat C = A.<span class="built_in">clone</span>(); <span class="comment">// æ·±æ‹·è´ï¼ˆå®Œæ•´æ•°æ®å‰¯æœ¬ï¼‰</span></span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr class="header">
<th>æ“ä½œç±»å‹</th>
<th>å†…å­˜å¼€é”€</th>
<th>æ•°æ®ç‹¬ç«‹æ€§</th>
<th>é€‚ç”¨åœºæ™¯</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>æµ…æ‹·è´</td>
<td>æå°</td>
<td>å…±äº«æ•°æ®</td>
<td>å¿«é€Ÿåˆ›å»ºè§†å›¾/ROI</td>
</tr>
<tr class="even">
<td>æ·±æ‹·è´</td>
<td>å¤§</td>
<td>å®Œå…¨ç‹¬ç«‹</td>
<td>éœ€ç‹¬ç«‹ä¿®æ”¹åƒç´ çš„åœºæ™¯</td>
</tr>
</tbody>
</table>
<blockquote>
<p>ğŸ“Œ <strong>å…³é”®æœºåˆ¶</strong></p>
<ul>
<li>ä¿®æ”¹æµ…æ‹·è´å¯¹è±¡çš„åƒç´ ä¼šç›´æ¥å½±å“åŸå¯¹è±¡</li>
<li>ä½¿ç”¨<code>clone()</code>æˆ–<code>copyTo()</code>è¿›è¡Œ<strong>æ˜¾å¼æ·±æ‹·è´</strong></li>
</ul>
</blockquote>
<h3 id="è‰²å½©ç©ºé—´ä¸å­˜å‚¨å¸ƒå±€">1.3. è‰²å½©ç©ºé—´ä¸å­˜å‚¨å¸ƒå±€</h3>
<ul>
<li><strong>é»˜è®¤è‰²å½©ç©ºé—´</strong>ï¼šBGRï¼ˆéRGBï¼‰ï¼Œä¸å›¾åƒæ˜¾ç¤ºç³»ç»Ÿå…¼å®¹</li>
<li><strong>é€šé“é¡ºåº</strong>ï¼šå¯¹äº3é€šé“çŸ©é˜µï¼Œåƒç´ æŒ‰ <code>B-G-R</code>
é¡ºåºå­˜å‚¨</li>
<li><strong>å†…å­˜å¸ƒå±€</strong>ï¼šè¿ç»­å­˜å‚¨ï¼ˆå¯é€šè¿‡
<code>isContinuous()</code> åˆ¤æ–­ï¼‰ï¼Œè¡Œä¼˜å…ˆå­˜å‚¨</li>
</ul>
<h3 id="æ„é€ å‡½æ•°å…¨è§£æ">1.4. æ„é€ å‡½æ•°å…¨è§£æ</h3>
<h4 id="é»˜è®¤æ„é€ å‡½æ•°å»¶è¿Ÿåˆå§‹åŒ–">1.4.1. é»˜è®¤æ„é€ å‡½æ•°ï¼ˆå»¶è¿Ÿåˆå§‹åŒ–ï¼‰</h4>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">cv::Mat matEmpty; <span class="comment">// åˆ›å»ºç©ºçŸ©é˜µï¼ˆHeaderæ— æ•°æ®æŒ‡é’ˆï¼‰</span></span><br><span class="line">matEmpty = cv::<span class="built_in">imread</span>(<span class="string">&quot;image.jpg&quot;</span>); <span class="comment">// å»¶è¿ŸåŠ è½½æ—¶åˆ†é…å†…å­˜</span></span><br></pre></td></tr></table></figure>
<h4 id="æŒ‡å®šå°ºå¯¸ä¸ç±»å‹">1.4.2. æŒ‡å®šå°ºå¯¸ä¸ç±»å‹</h4>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»º480x640çš„3é€šé“å›¾åƒï¼ˆBGRæ ¼å¼ï¼‰</span></span><br><span class="line"><span class="comment">// Mat(int rows, int cols, int type);</span></span><br><span class="line"><span class="function">cv::Mat <span class="title">mat</span><span class="params">(<span class="number">480</span>, <span class="number">640</span>, CV_8UC3)</span></span>;</span><br></pre></td></tr></table></figure>
<h4 id="åˆå§‹åŒ–å€¼æ„é€ å‡½æ•°">1.4.3. åˆå§‹åŒ–å€¼æ„é€ å‡½æ•°</h4>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»º3x3è“è‰²çŸ©é˜µï¼ˆB=255, G=0, R=0ï¼‰</span></span><br><span class="line"><span class="comment">// Mat(int rows, int cols, int type, const cv::Scalar&amp; s);</span></span><br><span class="line"><span class="function">cv::Mat <span class="title">matInit</span><span class="params">(<span class="number">3</span>, <span class="number">3</span>, CV_8UC3, cv::Scalar(<span class="number">255</span>, <span class="number">0</span>, <span class="number">0</span>))</span></span>;</span><br></pre></td></tr></table></figure>
<h4 id="å¤–éƒ¨æ•°æ®å…±äº«">1.4.4. å¤–éƒ¨æ•°æ®å…±äº«</h4>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">float</span> externalData[<span class="number">6</span>] = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>&#125;;</span><br><span class="line"><span class="function">cv::Mat <span class="title">matExt</span><span class="params">(<span class="number">2</span>, <span class="number">3</span>, CV_32FC1, externalData)</span></span>; <span class="comment">// å…±äº«å†…å­˜</span></span><br></pre></td></tr></table></figure>
<h4 id="roiæ„é€ å‡½æ•°">1.4.5. ROIæ„é€ å‡½æ•°</h4>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function">cv::Rect <span class="title">roiArea</span><span class="params">(<span class="number">10</span>, <span class="number">10</span>, <span class="number">100</span>, <span class="number">100</span>)</span></span>; <span class="comment">// (x,y,width,height)</span></span><br><span class="line"><span class="function">cv::Mat <span class="title">roi</span><span class="params">(img, roiArea)</span></span>; <span class="comment">// æµ…æ‹·è´åŸå›¾çš„ROIåŒºåŸŸ</span></span><br></pre></td></tr></table></figure>
<h4 id="ç‰¹æ®ŠçŸ©é˜µç”Ÿæˆ">1.4.6. ç‰¹æ®ŠçŸ©é˜µç”Ÿæˆ</h4>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">cv::Mat zeros = cv::Mat::<span class="built_in">zeros</span>(<span class="number">3</span>, <span class="number">3</span>, CV_32F); <span class="comment">// 3x3æµ®ç‚¹é›¶çŸ©é˜µ</span></span><br><span class="line">cv::Mat eye = cv::Mat::<span class="built_in">eye</span>(<span class="number">3</span>, <span class="number">3</span>, CV_8UC1);    <span class="comment">// 3x3å•ä½çŸ©é˜µ</span></span><br></pre></td></tr></table></figure>
<h3 id="æ•°æ®è®¿é—®ä¸è¾“å‡º">1.5. æ•°æ®è®¿é—®ä¸è¾“å‡º</h3>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ­£ç¡®è¾“å‡ºçŸ©é˜µå†…å®¹ï¼ˆéœ€æŒ‡å®šæ ¼å¼ï¼‰</span></span><br><span class="line">cv::Mat intMatrix = (cv::<span class="built_in">Mat_</span>&lt;<span class="type">int</span>&gt;(<span class="number">2</span>,<span class="number">2</span>) &lt;&lt; <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>);</span><br><span class="line">std::cout &lt;&lt; <span class="string">&quot;Matrix:\n&quot;</span> &lt;&lt; cv::format(intMatrix, cv::Formatter::FMT_C) &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡ºç»“æœï¼š</span></span><br><span class="line"><span class="comment">// [1, 2;</span></span><br><span class="line"><span class="comment">//  3, 4]</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>âš ï¸ <strong>æ³¨æ„äº‹é¡¹</strong></p>
<ul>
<li>ä½¿ç”¨<code>at&lt;T&gt;(row,col)</code>è®¿é—®å…ƒç´ æ—¶éœ€ç¡®ä¿ç±»å‹åŒ¹é…ï¼ˆå¦‚<code>CV_8UC3</code>å¯¹åº”<code>cv::Vec3b</code>ï¼‰</li>
<li>å¤šé€šé“çŸ©é˜µçš„cv::Scalaråˆå§‹åŒ–é¡ºåºä¸º<code>(B,G,R)</code></li>
<li>å¤–éƒ¨æ•°æ®æ„é€ çš„cv::Matå¯¹è±¡ä¸ç®¡ç†åŸæ•°æ®å†…å­˜ï¼Œéœ€æ‰‹åŠ¨ç»´æŠ¤ç”Ÿå‘½å‘¨æœŸ</li>
</ul>
</blockquote>
<h3 id="å®˜æ–¹æ–‡æ¡£è¡¥å……è¦ç‚¹">1.6. å®˜æ–¹æ–‡æ¡£è¡¥å……è¦ç‚¹</h3>
<ol type="1">
<li><p><strong>å¤šç»´çŸ©é˜µæ”¯æŒ</strong><br />
<code>cv::Mat</code>å¯å¤„ç†Nç»´æ•°æ®ï¼Œé€šè¿‡<code>dims</code>å‚æ•°æŒ‡å®šç»´åº¦ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Mat(int ndims, const int* sizes, int type, const cv::Scalar&amp; s);</span></span><br><span class="line"><span class="type">int</span> sizes[] = &#123;<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;; <span class="comment">// 3ç»´ï¼š3x4x5</span></span><br><span class="line"><span class="function">cv::Mat <span class="title">ndMat</span><span class="params">(<span class="number">3</span>, sizes, CV_8UC1, cv::Scalar::all(<span class="number">0</span>))</span></span>;</span><br></pre></td></tr></table></figure></li>
<li><p><strong>å†…å­˜è¿ç»­æ€§ä¼˜åŒ–</strong><br />
ä½¿ç”¨<code>create()</code>æ–¹æ³•é‡æ–°åˆ†é…è¿ç»­å†…å­˜ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">mat.<span class="built_in">create</span>(rows, cols, type); <span class="comment">// é‡ç½®çŸ©é˜µå°ºå¯¸/ç±»å‹</span></span><br></pre></td></tr></table></figure></li>
<li><p><strong>è¡¨è¾¾å¼è®¡ç®—ä¼˜åŒ–</strong><br />
OpenCVé‡è½½äº†çŸ©é˜µè¿ç®—ç¬¦ï¼ˆ<code>+</code>,
<code>*</code>ç­‰ï¼‰ï¼Œè‡ªåŠ¨é¿å…ä¸­é—´å˜é‡æ‹·è´ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">cv::Mat C = A.<span class="built_in">mul</span>(B) + <span class="number">0.5</span>; <span class="comment">// å¯¹åº”å…ƒç´ ç›¸ä¹˜å†åŠ  0.5</span></span><br><span class="line"><span class="comment">// ps: çŸ©é˜µä¹˜æ³•æ—¶ç›´æ¥ç”¨ *</span></span><br></pre></td></tr></table></figure></li>
</ol>
<hr />
<h2 id="å›¾åƒæ‰«ææŸ¥æ‰¾è¡¨ä¸æ€§èƒ½ä¼˜åŒ–">2. å›¾åƒæ‰«æã€æŸ¥æ‰¾è¡¨ä¸æ€§èƒ½ä¼˜åŒ–</h2>
<p>é€šè¿‡ä¸€ä¸ªå®é™…çš„<strong>é¢œè‰²ç©ºé—´ç¼©å‡</strong>ç¤ºä¾‹ï¼Œå¿«é€ŸæŒæ¡OpenCVä¸­å›¾åƒå¤„ç†çš„ä¸‰å¤§æ ¸å¿ƒæŠ€èƒ½ï¼š<strong>å›¾åƒæ‰«ææ–¹æ³•</strong>ã€<strong>æŸ¥æ‰¾è¡¨ï¼ˆLUTï¼‰çš„åº”ç”¨</strong>ä»¥åŠ<strong>ç®—æ³•æ€§èƒ½æµ‹é‡</strong>ã€‚</p>
<h3 id="å›¾åƒçŸ©é˜µçš„å†…å­˜å­˜å‚¨">2.1. å›¾åƒçŸ©é˜µçš„å†…å­˜å­˜å‚¨</h3>
<p>åœ¨OpenCVä¸­ï¼Œå›¾åƒæ•°æ®ä»¥<code>Mat</code>å¯¹è±¡å­˜å‚¨ï¼Œå…¶å†…å­˜å¸ƒå±€ä¸é¢œè‰²é€šé“ç´§å¯†ç›¸å…³ï¼š</p>
<ol type="1">
<li><strong>ç°åº¦å›¾åƒ</strong>ï¼šæ¯ä¸ªåƒç´ å¯¹åº”ä¸€ä¸ª<code>uchar</code>å€¼ï¼ˆ0-255ï¼‰ï¼ŒæŒ‰è¡Œè¿ç»­å­˜å‚¨ã€‚</li>
<li><strong>å½©è‰²å›¾åƒï¼ˆBGRï¼‰</strong>ï¼šæ¯ä¸ªåƒç´ åŒ…å«3ä¸ªé€šé“ï¼ˆè“ã€ç»¿ã€çº¢ï¼‰ï¼Œæ¯ä¸ªé€šé“ä¸€ä¸ª<code>uchar</code>å€¼ã€‚<br />
<strong>æ³¨æ„</strong>ï¼šOpenCVé»˜è®¤ä½¿ç”¨BGRé¡ºåºè€ŒéRGBï¼</li>
</ol>
<p>å†…å­˜ä¸­çš„å­˜å‚¨æ–¹å¼</p>
<ul>
<li><strong>æŒ‰è¡Œè¿ç»­å­˜å‚¨</strong>ï¼šåƒç´ æŒ‰è¡Œä¼˜å…ˆé¡ºåºæ’åˆ—ï¼Œæ¯è¡Œï¼ˆrowï¼‰ç§°ä¸ºä¸€ä¸ª
â€œé«˜åº¦â€ç»´åº¦ã€‚</li>
<li><strong>å¤šé€šé“æ•°æ®</strong>ï¼šæ¯ä¸ªåƒç´ çš„é€šé“å€¼è¿ç»­å­˜å‚¨ã€‚
<ul>
<li>ä¾‹å¦‚ï¼ŒBGR å›¾åƒçš„åƒç´ å­˜å‚¨é¡ºåºä¸º
<code>[B0, G0, R0, B1, G1, R1, ...]</code>ã€‚</li>
</ul></li>
<li>å¯èƒ½çš„å¡«å……å­—èŠ‚ (Padding)
<ul>
<li>æŸäº›æƒ…å†µä¸‹ï¼Œæ¯è¡Œæœ«å°¾å¯èƒ½æœ‰å¯¹é½å¡«å……ï¼ˆç”¨ <code>step</code>
å±æ€§è¡¨ç¤ºå®é™…æ¯è¡Œçš„å­—èŠ‚æ•°ï¼‰ã€‚</li>
</ul></li>
</ul>
<p>é€šè¿‡ <code>Mat::isContinuous()</code>
å¯åˆ¤æ–­çŸ©é˜µæ˜¯å¦è¿ç»­å­˜å‚¨ã€‚è‹¥è¿ç»­ï¼Œå¯å°†å›¾åƒè§†ä¸ºä¸€ç»´æ•°ç»„å¤„ç†ï¼Œæå‡éå†æ•ˆç‡ã€‚</p>
<h3 id="é¢œè‰²ç©ºé—´ç¼©å‡ç¤ºä¾‹">2.2. é¢œè‰²ç©ºé—´ç¼©å‡ç¤ºä¾‹</h3>
<p>å‡è®¾æˆ‘ä»¬éœ€è¦å°†å›¾åƒé¢œè‰²å€¼ä»256çº§ç¼©å‡åˆ°æ›´å°‘çš„çº§åˆ«ï¼ˆä¾‹å¦‚æ¯10ä¸ªå€¼åˆå¹¶ä¸ºä¸€ä¸ªï¼‰ã€‚ç›´æ¥è®¡ç®—å…¬å¼ä¸ºï¼š<br />
<span class="math display">\[\nonumber
I_{\text{new}} = \lfloor \frac{I_{\text{old}}}{10} \rfloor \times 10
\]</span></p>
<p>ä½†é¢‘ç¹çš„é™¤æ³•å’Œä¹˜æ³•ä¼šæ‹–æ…¢æ€§èƒ½ã€‚æ­¤æ—¶ï¼Œ<strong>æŸ¥æ‰¾è¡¨ï¼ˆLookup Table,
LUTï¼‰</strong>å¯é¢„å…ˆè®¡ç®—æ‰€æœ‰å¯èƒ½çš„è¾“å…¥å€¼å¯¹åº”çš„è¾“å‡ºå€¼ï¼Œåç»­ç›´æ¥æ›¿æ¢ï¼Œå¤§å¹…æå‡æ•ˆç‡ã€‚</p>
<h4 id="æŸ¥æ‰¾è¡¨ç”Ÿæˆä»£ç ">2.2.1. æŸ¥æ‰¾è¡¨ç”Ÿæˆä»£ç </h4>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> divideWith = <span class="number">10</span>;</span><br><span class="line">uchar table[<span class="number">256</span>];</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">256</span>; ++i)</span><br><span class="line">    table[i] = (uchar)(divideWith * (i/divideWith));    <span class="comment">// è‡ªåŠ¨å‘ä¸‹å–æ•´</span></span><br></pre></td></tr></table></figure>
<h3 id="å›¾åƒæ‰«ææ–¹æ³•å¯¹æ¯”">2.3. å›¾åƒæ‰«ææ–¹æ³•å¯¹æ¯”</h3>
<h4 id="é«˜æ•ˆæ–¹æ³•æŒ‡é’ˆè®¿é—®">2.3.1. é«˜æ•ˆæ–¹æ³•ï¼šæŒ‡é’ˆè®¿é—®</h4>
<p>é€šè¿‡æŒ‡é’ˆç›´æ¥æ“ä½œå†…å­˜ï¼Œé€‚åˆè¿ç»­å­˜å‚¨çš„å›¾åƒã€‚</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function">cv::Mat&amp; <span class="title">ScanImageWithPointer</span><span class="params">(cv::Mat&amp; image, <span class="type">const</span> uchar* table)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">CV_Assert</span>(image.<span class="built_in">depth</span>() == CV_8U);  <span class="comment">// ä»…å¤„ç†8ä½å›¾åƒ</span></span><br><span class="line">    <span class="type">int</span> channels = image.<span class="built_in">channels</span>();</span><br><span class="line">    <span class="type">int</span> rows = image.rows;</span><br><span class="line">    <span class="type">int</span> cols = image.cols * channels;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (image.<span class="built_in">isContinuous</span>()) &#123;</span><br><span class="line">        cols *= rows;</span><br><span class="line">        rows = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; rows; ++i) &#123;</span><br><span class="line">        uchar* p = image.<span class="built_in">ptr</span>&lt;uchar&gt;(i);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; cols; ++j)</span><br><span class="line">            p[j] = table[p[j]];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> image;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="å®‰å…¨æ–¹æ³•è¿­ä»£å™¨">2.3.2. å®‰å…¨æ–¹æ³•ï¼šè¿­ä»£å™¨</h4>
<p>ä½¿ç”¨OpenCVè¿­ä»£å™¨è‡ªåŠ¨å¤„ç†è¡Œé—´éš™ï¼Œä»£ç æ›´å®‰å…¨ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function">cv::Mat&amp; <span class="title">ScanImageWithIterator</span><span class="params">(cv::Mat&amp; image, <span class="type">const</span> uchar* table)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">CV_Assert</span>(image.<span class="built_in">depth</span>() == CV_8U);</span><br><span class="line">    <span class="keyword">if</span> (image.<span class="built_in">channels</span>() == <span class="number">1</span>) &#123;</span><br><span class="line">        cv::MatIterator_&lt;uchar&gt; it = image.<span class="built_in">begin</span>&lt;uchar&gt;();</span><br><span class="line">        cv::MatIterator_&lt;uchar&gt; end = image.<span class="built_in">end</span>&lt;uchar&gt;();</span><br><span class="line">        <span class="keyword">for</span> (; it != end; ++it)</span><br><span class="line">            *it = table[*it];</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (image.<span class="built_in">channels</span>() == <span class="number">3</span>) &#123;</span><br><span class="line">        cv::MatIterator_&lt;cv::Vec3b&gt; it = image.<span class="built_in">begin</span>&lt;cv::Vec3b&gt;();</span><br><span class="line">        cv::MatIterator_&lt;cv::Vec3b&gt; end = image.<span class="built_in">end</span>&lt;cv::Vec3b&gt;();</span><br><span class="line">        <span class="keyword">for</span> (; it != end; ++it) &#123;</span><br><span class="line">            (*it)[<span class="number">0</span>] = table[(*it)[<span class="number">0</span>]];  <span class="comment">// Bé€šé“</span></span><br><span class="line">            (*it)[<span class="number">1</span>] = table[(*it)[<span class="number">1</span>]];  <span class="comment">// Gé€šé“</span></span><br><span class="line">            (*it)[<span class="number">2</span>] = table[(*it)[<span class="number">2</span>]];  <span class="comment">// Ré€šé“</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> image;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="åŠ¨æ€åœ°å€è®¡ç®—atæ–¹æ³•">2.3.3.
åŠ¨æ€åœ°å€è®¡ç®—ï¼š<code>at</code>æ–¹æ³•</h4>
<p>é€‚ç”¨äºéšæœºè®¿é—®ï¼Œä½†å…¨å›¾æ‰«ææ—¶æ€§èƒ½è¾ƒå·®ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function">cv::Mat&amp; <span class="title">ScanImageWithAt</span><span class="params">(cv::Mat&amp; image, <span class="type">const</span> uchar* table)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">CV_Assert</span>(image.<span class="built_in">depth</span>() == CV_8U);</span><br><span class="line">    <span class="keyword">if</span> (image.<span class="built_in">channels</span>() == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; image.rows; ++i)</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; image.cols; ++j)</span><br><span class="line">                image.<span class="built_in">at</span>&lt;uchar&gt;(i, j) = table[image.<span class="built_in">at</span>&lt;uchar&gt;(i, j)];</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (image.<span class="built_in">channels</span>() == <span class="number">3</span>) &#123;</span><br><span class="line">        cv::Mat_&lt;cv::Vec3b&gt; _I = image;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; image.rows; ++i)</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; image.cols; ++j) &#123;</span><br><span class="line">                _I(i, j)[<span class="number">0</span>] = table[_I(i, j)[<span class="number">0</span>]];  <span class="comment">// Bé€šé“</span></span><br><span class="line">                _I(i, j)[<span class="number">1</span>] = table[_I(i, j)[<span class="number">1</span>]];  <span class="comment">// Gé€šé“</span></span><br><span class="line">                _I(i, j)[<span class="number">2</span>] = table[_I(i, j)[<span class="number">2</span>]];  <span class="comment">// Ré€šé“</span></span><br><span class="line">            &#125;</span><br><span class="line">        image = _I;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> image;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç»ˆæä¼˜åŒ–opencvå†…ç½®lutå‡½æ•°">2.4. ç»ˆæä¼˜åŒ–ï¼šOpenCVå†…ç½®LUTå‡½æ•°</h3>
<p>ä½¿ç”¨<code>cv::LUT()</code>å‡½æ•°ï¼Œåº•å±‚ä¼˜åŒ–æ›´é«˜æ•ˆï¼Œæ”¯æŒå¤šçº¿ç¨‹ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function">cv::Mat <span class="title">ApplyLUT</span><span class="params">(cv::Mat&amp; image, <span class="type">const</span> uchar* table)</span> </span>&#123;</span><br><span class="line">    <span class="function">cv::Mat <span class="title">lookupTable</span><span class="params">(<span class="number">1</span>, <span class="number">256</span>, CV_8U)</span></span>;</span><br><span class="line">    uchar* p = lookupTable.<span class="built_in">ptr</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">256</span>; ++i) p[i] = table[i];</span><br><span class="line">    </span><br><span class="line">    cv::Mat result;</span><br><span class="line">    cv::<span class="built_in">LUT</span>(image, lookupTable, result);</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ€§èƒ½å¯¹æ¯”">2.5. æ€§èƒ½å¯¹æ¯”</h3>
<p>é€šè¿‡<code>cv::getTickCount()</code>å’Œ<code>cv::getTickFrequency()</code>æµ‹é‡æ—¶é—´ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">double</span> t = (<span class="type">double</span>)cv::<span class="built_in">getTickCount</span>();</span><br><span class="line"><span class="comment">// æ‰§è¡Œæ‰«ææ“ä½œ</span></span><br><span class="line">t = ((<span class="type">double</span>)cv::<span class="built_in">getTickCount</span>() - t) / cv::<span class="built_in">getTickFrequency</span>();</span><br><span class="line">std::cout &lt;&lt; <span class="string">&quot;è€—æ—¶ï¼ˆç§’ï¼‰: &quot;</span> &lt;&lt; t &lt;&lt; std::endl;</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">æ–¹æ³•</th>
<th style="text-align: left;">å¹³å‡è€—æ—¶ï¼ˆæ¯«ç§’ï¼‰</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">æŒ‡é’ˆè®¿é—®</td>
<td style="text-align: left;">79.47</td>
</tr>
<tr class="even">
<td style="text-align: left;">è¿­ä»£å™¨</td>
<td style="text-align: left;">83.72</td>
</tr>
<tr class="odd">
<td style="text-align: left;">åŠ¨æ€åœ°å€è®¡ç®—ï¼ˆatï¼‰</td>
<td style="text-align: left;">93.78</td>
</tr>
<tr class="even">
<td style="text-align: left;">LUTå‡½æ•°</td>
<td style="text-align: left;"><strong>32.58</strong></td>
</tr>
</tbody>
</table>
<p><strong>ç»“è®º</strong>ï¼š</p>
<ol type="1">
<li><strong>ä¼˜å…ˆä½¿ç”¨OpenCVå†…ç½®å‡½æ•°</strong>ï¼ˆå¦‚
<code>LUT()</code>ï¼‰ï¼Œæ€§èƒ½æœ€ä½³ã€‚</li>
<li>éœ€è¦è‡ªå®šä¹‰éå†æ—¶ï¼Œ<strong>æŒ‡é’ˆè®¿é—®</strong>æœ€å¿«ï¼Œ<strong>è¿­ä»£å™¨</strong>æ›´å®‰å…¨ã€‚</li>
<li>é¿å…åœ¨å¾ªç¯ä¸­ä½¿ç”¨ <code>at</code> æ–¹æ³•è¿›è¡Œå…¨å›¾æ‰«æã€‚</li>
</ol>
<h3 id="å®æˆ˜å»ºè®®">2.6. å®æˆ˜å»ºè®®</h3>
<ul>
<li><strong>è¿ç»­å­˜å‚¨ä¼˜åŒ–</strong>ï¼šè‹¥å›¾åƒè¿ç»­ï¼ˆ<code>isContinuous() == true</code>ï¼‰ï¼Œå¯å°†å…¶è§†ä¸ºä¸€ç»´æ•°ç»„å¤„ç†ã€‚</li>
<li><strong>å¤šé€šé“å¤„ç†</strong>ï¼šæ³¨æ„BGRé¡ºåºï¼Œéå†æ—¶éœ€åˆ†åˆ«æ“ä½œæ¯ä¸ªé€šé“ã€‚</li>
<li><strong>è°ƒè¯•æŠ€å·§</strong>ï¼šåœ¨Debugæ¨¡å¼ä¸‹ï¼Œ<code>at</code>æ–¹æ³•ä¼šæ£€æŸ¥è¶Šç•Œè®¿é—®ï¼Œé€‚åˆå¿«é€Ÿå®šä½é”™è¯¯ã€‚</li>
</ul>
<h2 id="å›¾åƒå¤„ç†ä¸­çš„æ©è†œæ“ä½œ">3. å›¾åƒå¤„ç†ä¸­çš„æ©è†œæ“ä½œ</h2>
<p>å›¾åƒå¤„ç†æ˜¯è®¡ç®—æœºè§†è§‰çš„æ ¸å¿ƒæŠ€æœ¯ä¹‹ä¸€ï¼Œè€ŒOpenCVä½œä¸ºæœ€æµè¡Œçš„å¼€æºåº“ï¼Œä¸ºå¼€å‘è€…æä¾›äº†ä¸°å¯Œçš„å·¥å…·ã€‚æœ¬èŠ‚å°†ä»‹ç»
OpenCV ä¸­çš„<strong>æ©è†œæ“ä½œ</strong>ï¼ˆMask
Operationsï¼‰ï¼Œä»¥å›¾åƒå¯¹æ¯”åº¦å¢å¼ºä¸ºä¾‹ï¼Œç†è§£å…¶åŸç†ä¸å®ç°ã€‚</p>
<h3 id="ä»€ä¹ˆæ˜¯æ©è†œæ“ä½œ">3.1. ä»€ä¹ˆæ˜¯æ©è†œæ“ä½œï¼Ÿ</h3>
<p>æ©è†œæ“ä½œé€šè¿‡ä¸€ä¸ªç§°ä¸º <strong>å†…æ ¸ï¼ˆKernelï¼‰</strong> æˆ–
<strong>æ©è†œï¼ˆMaskï¼‰</strong>
çš„å°çŸ©é˜µï¼Œå¯¹å›¾åƒä¸­çš„æ¯ä¸ªåƒç´ è¿›è¡ŒåŠ æƒè®¡ç®—ï¼Œä»è€Œè°ƒæ•´å…¶å€¼ã€‚è¿™ç§æ“ä½œæœ¬è´¨ä¸Šæ˜¯å°†å½“å‰åƒç´ åŠå…¶é‚»åŸŸåƒç´ çš„å€¼æŒ‰æƒé‡ç›¸åŠ ï¼Œå¸¸ç”¨äºå›¾åƒæ»¤æ³¢ã€è¾¹ç¼˜æ£€æµ‹ã€é”åŒ–ç­‰ä»»åŠ¡ã€‚</p>
<p>ä¾‹å¦‚ï¼Œå¯¹æ¯”åº¦å¢å¼ºçš„å…¬å¼ä¸ºï¼š<br />
<span class="math display">\[ \nonumber I(i,j) = 5 \cdot I(i,j) -
[I(i-1,j) + I(i+1,j) + I(i,j-1) + I(i,j+1)] \]</span></p>
<p>å¯¹åº”çš„å†…æ ¸çŸ©é˜µä¸ºï¼š<br />
<span class="math display">\[ \nonumber
M = \begin{bmatrix}
0 &amp; -1 &amp; 0 \\
-1 &amp; 5 &amp; -1 \\
0 &amp; -1 &amp; 0
\end{bmatrix}
\]</span><br />
ä¸­å¿ƒåƒç´ æƒé‡ä¸º5ï¼Œä¸Šä¸‹å·¦å³åƒç´ æƒé‡ä¸º-1ï¼Œå…¶ä½™ä¸º0ã€‚é€šè¿‡è¯¥å†…æ ¸ï¼Œå¯ä»¥çªå‡ºä¸­å¿ƒåƒç´ ï¼Œå¢å¼ºå›¾åƒç»†èŠ‚ã€‚</p>
<h3 id="æ‰‹åŠ¨å®ç°æ©è†œæ“ä½œ">3.2. æ‰‹åŠ¨å®ç°æ©è†œæ“ä½œ</h3>
<h4 id="å…³é”®æ­¥éª¤">3.2.1. å…³é”®æ­¥éª¤</h4>
<ol type="1">
<li><strong>è¾¹ç•Œå¤„ç†</strong>ï¼šå›¾åƒè¾¹ç¼˜çš„åƒç´ ç¼ºå°‘é‚»åŸŸï¼Œé€šå¸¸ç›´æ¥è®¾ä¸º0ã€‚</li>
<li><strong>éå†åƒç´ </strong>ï¼šä½¿ç”¨æŒ‡é’ˆé€è¡Œè®¿é—®åƒç´ ï¼Œé¿å…ç›´æ¥ä¿®æ”¹åŸå›¾ã€‚</li>
<li><strong>åŠ æƒè®¡ç®—</strong>ï¼šæ ¹æ®å†…æ ¸å…¬å¼é‡æ–°è®¡ç®—æ¯ä¸ªåƒç´ çš„å€¼ã€‚</li>
</ol>
<h4 id="ä»£ç ç¤ºä¾‹ç®€åŒ–ç‰ˆ">3.2.2. ä»£ç ç¤ºä¾‹ï¼ˆç®€åŒ–ç‰ˆï¼‰</h4>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">Sharpen</span><span class="params">(<span class="type">const</span> cv::Mat&amp; input, cv::Mat&amp; output)</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">CV_Assert</span>(input.<span class="built_in">depth</span>() == CV_8U);  <span class="comment">// ç¡®ä¿è¾“å…¥å›¾åƒä¸º8ä½å›¾åƒ</span></span><br><span class="line"></span><br><span class="line">    <span class="type">const</span> <span class="type">int</span> channels = input.<span class="built_in">channels</span>();</span><br><span class="line">    output.<span class="built_in">create</span>(input.<span class="built_in">size</span>(), input.<span class="built_in">type</span>());  <span class="comment">// åˆ›å»ºä¸è¾“å…¥å›¾åƒå¤§å°å’Œç±»å‹ç›¸åŒçš„è¾“å‡ºå›¾åƒ</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> row = <span class="number">1</span>; row &lt; input.rows - <span class="number">1</span>; row++) &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="type">const</span> uchar* prev = input.<span class="built_in">ptr</span>&lt;uchar&gt;(row - <span class="number">1</span>);  <span class="comment">// è·å–ä¸Šä¸€è¡Œçš„æŒ‡é’ˆ</span></span><br><span class="line">        <span class="type">const</span> uchar* curr = input.<span class="built_in">ptr</span>&lt;uchar&gt;(row);  <span class="comment">// è·å–å½“å‰è¡Œçš„æŒ‡é’ˆ</span></span><br><span class="line">        <span class="type">const</span> uchar* next = input.<span class="built_in">ptr</span>&lt;uchar&gt;(row + <span class="number">1</span>);  <span class="comment">// è·å–ä¸‹ä¸€è¡Œçš„æŒ‡é’ˆ</span></span><br><span class="line">        uchar* out = output.<span class="built_in">ptr</span>&lt;uchar&gt;(row);    <span class="comment">// è·å–è¾“å‡ºå›¾åƒå½“å‰è¡Œçš„æŒ‡é’ˆ</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> col = channels; col &lt; channels * (input.cols - <span class="number">1</span>); col++) &#123;</span><br><span class="line">            <span class="comment">// åº”ç”¨å…¬å¼ï¼š5*å½“å‰åƒç´  - ä¸Šä¸‹å·¦å³åƒç´ </span></span><br><span class="line">            out[col] = cv::<span class="built_in">saturate_cast</span>&lt;uchar&gt;(</span><br><span class="line">                <span class="number">5</span> * curr[col] - (curr[col - channels] + curr[col + channels] + prev[col] + next[col])</span><br><span class="line">            );</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¾¹ç•Œç½®0</span></span><br><span class="line">    output.<span class="built_in">row</span>(<span class="number">0</span>).<span class="built_in">setTo</span>(cv::<span class="built_in">Scalar</span>(<span class="number">0</span>));</span><br><span class="line">    output.<span class="built_in">row</span>(output.rows - <span class="number">1</span>).<span class="built_in">setTo</span>(cv::<span class="built_in">Scalar</span>(<span class="number">0</span>));</span><br><span class="line">    output.<span class="built_in">col</span>(<span class="number">0</span>).<span class="built_in">setTo</span>(cv::<span class="built_in">Scalar</span>(<span class="number">0</span>));</span><br><span class="line">    output.<span class="built_in">col</span>(output.cols - <span class="number">1</span>).<span class="built_in">setTo</span>(cv::<span class="built_in">Scalar</span>(<span class="number">0</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<details class="note info"><summary><p><code>cv::saturate_cast</code></p>
</summary>
<p>åœ¨å›¾åƒå¤„ç†æ–¹é¢ï¼Œæ— è®ºæ˜¯åŠ æ˜¯å‡ï¼Œä¹˜é™¤ï¼Œéƒ½å¯èƒ½ä¼šè¶…å‡ºä¸€ä¸ªåƒç´ ç°åº¦å€¼çš„èŒƒå›´ï¼ˆ0ï½255ï¼‰ï¼Œ<code>saturate_cast</code>
å‡½æ•°çš„ä½œç”¨å³æ˜¯ï¼šå½“è¿ç®—å®Œä¹‹åï¼Œç»“æœä¸ºè´Ÿï¼Œåˆ™è½¬ä¸º0ï¼Œç»“æœè¶…å‡º255ï¼Œåˆ™ä¸º255ã€‚</p>

</details>
<h3 id="ä½¿ç”¨opencvå†…ç½®å‡½æ•°-filter2d">3.3. ä½¿ç”¨OpenCVå†…ç½®å‡½æ•°
<code>filter2D</code></h3>
<p>æ‰‹åŠ¨å®ç°æ©è†œæ“ä½œè™½ç„¶ç›´è§‚ï¼Œä½†ä»£ç å†—é•¿ä¸”æ•ˆç‡è¾ƒä½ã€‚OpenCVæä¾›äº†<code>filter2D</code>å‡½æ•°ï¼Œå¯ç›´æ¥åº”ç”¨å†…æ ¸çŸ©é˜µï¼Œä»£ç æ›´ç®€æ´ä¸”æ€§èƒ½æ›´ä¼˜ã€‚</p>
<h4 id="ä»£ç ç¤ºä¾‹">3.3.1. ä»£ç ç¤ºä¾‹</h4>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">cv::Mat kernel = (cv::<span class="built_in">Mat_</span>&lt;<span class="type">char</span>&gt;(<span class="number">3</span>, <span class="number">3</span>) &lt;&lt; </span><br><span class="line">    <span class="number">0</span>, <span class="number">-1</span>, <span class="number">0</span>,</span><br><span class="line">    <span class="number">-1</span>, <span class="number">5</span>, <span class="number">-1</span>,</span><br><span class="line">    <span class="number">0</span>, <span class="number">-1</span>, <span class="number">0</span></span><br><span class="line">);</span><br><span class="line">cv::Mat result;</span><br><span class="line"><span class="comment">// void filter2D( InputArray src, OutputArray dst, int ddepth,</span></span><br><span class="line"><span class="comment">//              InputArray kernel, Point anchor = Point(-1,-1), double delta = 0,</span></span><br><span class="line"><span class="comment">//              int borderType = BORDER_DEFAULT );</span></span><br><span class="line">cv::<span class="built_in">filter2D</span>(input, result, input.<span class="built_in">depth</span>(), kernel);</span><br></pre></td></tr></table></figure>
<h4 id="ä¼˜åŠ¿">3.3.2. ä¼˜åŠ¿</h4>
<ul>
<li><strong>é«˜æ•ˆæ€§</strong>ï¼šå†…ç½®å‡½æ•°ç»è¿‡ä¼˜åŒ–ï¼Œé€Ÿåº¦æ›´å¿«ï¼ˆæµ‹è¯•ä¸­æ‰‹åŠ¨å®ç°éœ€31msï¼Œ<code>filter2D</code>ä»…éœ€13msï¼‰ã€‚</li>
<li><strong>çµæ´»æ€§</strong>ï¼šæ”¯æŒè‡ªå®šä¹‰å†…æ ¸ä¸­å¿ƒã€è¾¹ç•Œå¤„ç†æ¨¡å¼ï¼ˆå¦‚å¡«å……ã€é•œåƒç­‰ï¼‰ã€‚</li>
</ul>
<h3 id="æ€§èƒ½å¯¹æ¯”ä¸é€‚ç”¨åœºæ™¯">3.4. æ€§èƒ½å¯¹æ¯”ä¸é€‚ç”¨åœºæ™¯</h3>
<table>
<thead>
<tr class="header">
<th style="text-align: center;">æ–¹æ³•</th>
<th style="text-align: center;">ä¼˜ç‚¹</th>
<th style="text-align: center;">ç¼ºç‚¹</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">æ‰‹åŠ¨å®ç°</td>
<td style="text-align: center;">ç†è§£åº•å±‚åŸç†ï¼Œçµæ´»è°ƒè¯•</td>
<td style="text-align: center;">ä»£ç å¤æ‚ï¼Œæ€§èƒ½è¾ƒä½</td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>filter2D</code></td>
<td style="text-align: center;">ç®€æ´é«˜æ•ˆï¼Œæ”¯æŒé«˜çº§åŠŸèƒ½</td>
<td style="text-align: center;">éœ€ç†Ÿæ‚‰å†…æ ¸çŸ©é˜µçš„æ„å»º</td>
</tr>
</tbody>
</table>
<p><strong>æ¨èåœºæ™¯</strong>ï¼š</p>
<ul>
<li>å­¦ä¹ é˜¶æ®µï¼šå»ºè®®æ‰‹åŠ¨å®ç°ï¼Œæ·±å…¥ç†è§£åƒç´ æ“ä½œåŸç†ã€‚<br />
</li>
<li>å®é™…é¡¹ç›®ï¼šä¼˜å…ˆä½¿ç”¨ <code>filter2D</code>
ï¼Œæå‡æ•ˆç‡å¹¶å‡å°‘ä»£ç é‡ã€‚</li>
</ul>
<h3 id="æ€»ç»“">3.5. æ€»ç»“</h3>
<p>æ©è†œæ“ä½œæ˜¯å›¾åƒå¤„ç†çš„åŸºç¡€æŠ€æœ¯ï¼ŒOpenCVæä¾›äº†çµæ´»çš„å®ç°æ–¹å¼ã€‚é€šè¿‡å¯¹æ¯”æ‰‹åŠ¨å®ç°ä¸å†…ç½®å‡½æ•°ï¼Œå¼€å‘è€…å¯ä»¥æ ¹æ®éœ€æ±‚é€‰æ‹©æœ€ä½³æ–¹æ¡ˆã€‚æŒæ¡è¿™ä¸€æŠ€æœ¯åï¼Œå¯è¿›ä¸€æ­¥æ¢ç´¢é«˜æ–¯æ¨¡ç³Šã€è¾¹ç¼˜æ£€æµ‹ï¼ˆå¦‚Sobelç®—å­ï¼‰ç­‰è¿›é˜¶åº”ç”¨ã€‚</p>
<p><strong>åŠ¨æ‰‹å°è¯•</strong>ï¼š</p>
<ol type="1">
<li>ä¿®æ”¹å†…æ ¸çŸ©é˜µï¼Œè§‚å¯Ÿå›¾åƒå˜åŒ–ï¼ˆä¾‹å¦‚é”åŒ–ã€æ¨¡ç³Šï¼‰ã€‚<br />
</li>
<li>å¯¹æ¯”ä¸åŒè¾¹ç•Œå¤„ç†æ¨¡å¼çš„æ•ˆæœï¼ˆå¦‚<code>BORDER_REFLECT</code>æˆ–<code>BORDER_CONSTANT</code>ï¼‰ã€‚</li>
</ol>
<h2 id="å›¾åƒåŸºç¡€æ“ä½œ">4. å›¾åƒåŸºç¡€æ“ä½œ</h2>
<p>ä»‹ç»å›¾åƒå¤„ç†çš„åŸºç¡€æ“ä½œï¼Œæ¶µç›–å›¾åƒåŠ è½½ã€åƒç´ æ“ä½œã€å†…å­˜ç®¡ç†åŠå¯è§†åŒ–ç­‰æ ¸å¿ƒå†…å®¹ã€‚</p>
<h3 id="å›¾åƒè¾“å…¥è¾“å‡º">4.1. å›¾åƒè¾“å…¥è¾“å‡º</h3>
<h4 id="åŠ è½½å›¾åƒ">4.1.1. åŠ è½½å›¾åƒ</h4>
<p>ä½¿ç”¨ <code>cv::imread</code>
åŠ è½½å›¾åƒæ—¶ï¼Œé»˜è®¤è¯»å–ä¸ºBGRä¸‰é€šé“æ ¼å¼ã€‚è‹¥éœ€ç°åº¦å›¾ï¼Œéœ€æ˜¾å¼æŒ‡å®šå‚æ•°ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">cv::Mat img = cv::<span class="built_in">imread</span>(<span class="string">&quot;image.jpg&quot;</span>); <span class="comment">// ä¸‰é€šé“BGRå›¾åƒ</span></span><br><span class="line">cv::Mat gray_img = cv::<span class="built_in">imread</span>(<span class="string">&quot;image.jpg&quot;</span>, cv::IMREAD_GRAYSCALE); <span class="comment">// å•é€šé“ç°åº¦å›¾</span></span><br></pre></td></tr></table></figure>
<h4 id="ä¿å­˜å›¾åƒ">4.1.2. ä¿å­˜å›¾åƒ</h4>
<p>å›¾åƒä¿å­˜æ ¼å¼ç”±æ–‡ä»¶æ‰©å±•åå†³å®šï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">cv::<span class="built_in">imwrite</span>(<span class="string">&quot;output.png&quot;</span>, img); <span class="comment">// ä¿å­˜ä¸ºPNGæ ¼å¼</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>æ³¨æ„</strong>ï¼šè‹¥éœ€ä»å†…å­˜è¯»å†™å›¾åƒï¼Œä½¿ç”¨
<code>cv::imdecode</code> å’Œ <code>cv::imencode</code>ã€‚</p>
</blockquote>
<h3 id="åƒç´ æ“ä½œ">4.2. åƒç´ æ“ä½œ</h3>
<h4 id="è®¿é—®åƒç´ å€¼">4.2.1. è®¿é—®åƒç´ å€¼</h4>
<ul>
<li><p><strong>å•é€šé“ç°åº¦å›¾</strong>ï¼ˆ8UC1ï¼‰ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">uchar intensity = img.<span class="built_in">at</span>&lt;uchar&gt;(y, x); <span class="comment">// æ³¨æ„åæ ‡é¡ºåºä¸º(y, x)</span></span><br></pre></td></tr></table></figure></li>
<li><p><strong>ä¸‰é€šé“BGRå›¾åƒ</strong>ï¼ˆ8UC3ï¼‰ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">cv::Vec3b bgr_pixel = img.<span class="built_in">at</span>&lt;cv::Vec3b&gt;(y, x);</span><br><span class="line">uchar blue = bgr_pixel[<span class="number">0</span>];  <span class="comment">// Bé€šé“</span></span><br><span class="line">uchar green = bgr_pixel[<span class="number">1</span>]; <span class="comment">// Gé€šé“</span></span><br><span class="line">uchar red = bgr_pixel[<span class="number">2</span>];   <span class="comment">// Ré€šé“</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="ä¿®æ”¹åƒç´ å€¼">4.2.2. ä¿®æ”¹åƒç´ å€¼</h4>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">img.<span class="built_in">at</span>&lt;uchar&gt;(y, x) = <span class="number">128</span>; <span class="comment">// å°†ç°åº¦å›¾åƒç´ è®¾ä¸º128</span></span><br><span class="line">img.<span class="built_in">at</span>&lt;cv::Vec3b&gt;(y, x) = cv::<span class="built_in">Vec3b</span>(<span class="number">255</span>, <span class="number">0</span>, <span class="number">0</span>); <span class="comment">// è®¾ä¸ºè“è‰²</span></span><br></pre></td></tr></table></figure>
<h3 id="å†…å­˜ç®¡ç†ä¸å¼•ç”¨è®¡æ•°">4.3. å†…å­˜ç®¡ç†ä¸å¼•ç”¨è®¡æ•°</h3>
<h4 id="æ•°æ®å…±äº«æœºåˆ¶">4.3.1. æ•°æ®å…±äº«æœºåˆ¶</h4>
<p><code>cv::Mat</code>
é€šè¿‡å¼•ç”¨è®¡æ•°ç®¡ç†å†…å­˜ï¼Œå¤šä¸ªå®ä¾‹å¯å…±äº«åŒä¸€æ•°æ®å—ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">std::vector&lt;cv::Point3f&gt; points;</span><br><span class="line"><span class="comment">// ...å¡«å……æ•°æ®</span></span><br><span class="line">cv::Mat points_mat = cv::<span class="built_in">Mat</span>(points).<span class="built_in">reshape</span>(<span class="number">1</span>); <span class="comment">// å…±äº«æ•°æ®ï¼Œä¸å¤åˆ¶</span></span><br></pre></td></tr></table></figure>
<h4 id="æ˜¾å¼å¤åˆ¶æ•°æ®">4.3.2. æ˜¾å¼å¤åˆ¶æ•°æ®</h4>
<p>éœ€ç‹¬ç«‹æ“ä½œæ•°æ®æ—¶ï¼Œä½¿ç”¨ <code>clone()</code> æˆ–
<code>copyTo()</code>ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">cv::Mat img_clone = img.<span class="built_in">clone</span>(); <span class="comment">// æ·±æ‹·è´</span></span><br><span class="line">cv::Mat img_copy;</span><br><span class="line">img.<span class="built_in">copyTo</span>(img_copy); <span class="comment">// æ·±æ‹·è´ï¼ˆç›®æ ‡ä¸ºç©ºçŸ©é˜µæ—¶ï¼‰</span></span><br></pre></td></tr></table></figure>
<h3 id="åŸºæœ¬å›¾åƒæ“ä½œ">4.4. åŸºæœ¬å›¾åƒæ“ä½œ</h3>
<h4 id="å›¾åƒç½®é»‘">4.4.1. å›¾åƒç½®é»‘</h4>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">img = cv::<span class="built_in">Scalar</span>(<span class="number">0</span>); <span class="comment">// æ‰€æœ‰åƒç´ è®¾ä¸º0ï¼ˆé»‘è‰²ï¼‰</span></span><br></pre></td></tr></table></figure>
<h4 id="é€‰æ‹©æ„Ÿå…´è¶£åŒºåŸŸroi">4.4.2. é€‰æ‹©æ„Ÿå…´è¶£åŒºåŸŸï¼ˆROIï¼‰</h4>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function">cv::Rect <span class="title">roi</span><span class="params">(<span class="number">10</span>, <span class="number">10</span>, <span class="number">100</span>, <span class="number">100</span>)</span></span>; <span class="comment">// (x, y, width, height)</span></span><br><span class="line">cv::Mat small_img = <span class="built_in">img</span>(roi);   <span class="comment">// æå–ROI</span></span><br></pre></td></tr></table></figure>
<h4 id="é¢œè‰²ç©ºé—´è½¬æ¢">4.4.3. é¢œè‰²ç©ºé—´è½¬æ¢</h4>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">cv::Mat gray;</span><br><span class="line">cv::<span class="built_in">cvtColor</span>(img, gray, cv::COLOR_BGR2GRAY); <span class="comment">// BGRè½¬ç°åº¦</span></span><br></pre></td></tr></table></figure>
<h4 id="å›¾åƒç±»å‹è½¬æ¢">4.4.4. å›¾åƒç±»å‹è½¬æ¢</h4>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">cv::Mat src_32f;</span><br><span class="line">src.<span class="built_in">convertTo</span>(src_32f, CV_32F); <span class="comment">// 8UC1è½¬32FC1</span></span><br></pre></td></tr></table></figure>
<h3 id="å›¾åƒå¯è§†åŒ–">4.5. å›¾åƒå¯è§†åŒ–</h3>
<h4 id="æ˜¾ç¤º8ä½å›¾åƒ">4.5.1. æ˜¾ç¤º8ä½å›¾åƒ</h4>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">cv::<span class="built_in">namedWindow</span>(<span class="string">&quot;Display&quot;</span>, cv::WINDOW_AUTOSIZE);</span><br><span class="line">cv::<span class="built_in">imshow</span>(<span class="string">&quot;Display&quot;</span>, img);</span><br><span class="line">cv::<span class="built_in">waitKey</span>(<span class="number">0</span>); <span class="comment">// ç­‰å¾…æŒ‰é”®</span></span><br></pre></td></tr></table></figure>
<h4 id="æ˜¾ç¤ºæµ®ç‚¹å›¾åƒ">4.5.2. æ˜¾ç¤ºæµ®ç‚¹å›¾åƒ</h4>
<p>éœ€å°†32Fç±»å‹å½’ä¸€åŒ–åˆ°0~255èŒƒå›´ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">cv::Mat sobelx;</span><br><span class="line">cv::<span class="built_in">Sobel</span>(gray, sobelx, CV_32F, <span class="number">1</span>, <span class="number">0</span>); <span class="comment">// è®¡ç®—Sobelæ¢¯åº¦</span></span><br><span class="line"></span><br><span class="line"><span class="type">double</span> min_val, max_val;</span><br><span class="line">cv::<span class="built_in">minMaxLoc</span>(sobelx, &amp;min_val, &amp;max_val); <span class="comment">// è·å–æå€¼</span></span><br><span class="line"></span><br><span class="line">cv::Mat draw;</span><br><span class="line">sobelx.<span class="built_in">convertTo</span>(draw, CV_8U, <span class="number">255.0</span>/(max_val - min_val), -min_val*<span class="number">255.0</span>/(max_val - min_val));</span><br><span class="line">cv::<span class="built_in">imshow</span>(<span class="string">&quot;Sobel&quot;</span>, draw);</span><br><span class="line">cv::<span class="built_in">waitKey</span>(<span class="number">0</span>);</span><br><span class="line">cv::<span class="built_in">destroyWindow</span>(<span class="string">&quot;Sobel&quot;</span>);</span><br></pre></td></tr></table></figure>
<h3 id="æ€»ç»“-1">4.6. æ€»ç»“</h3>
<p>ä»‹ç»äº†OpenCVä¸­å›¾åƒå¤„ç†çš„åŸºç¡€æ“ä½œï¼ŒåŒ…æ‹¬åŠ è½½/ä¿å­˜ã€åƒç´ è®¿é—®ã€å†…å­˜ç®¡ç†å’Œå¯è§†åŒ–ã€‚å¯ä»¥è¿›ä¸€æ­¥ç»“åˆå®˜æ–¹æ–‡æ¡£æ¢ç´¢é«˜çº§åŠŸèƒ½ï¼ˆå¦‚æ»¤æ³¢ã€ç‰¹å¾æ£€æµ‹ç­‰ï¼‰ã€‚</p>
<h2 id="ä½¿ç”¨cvaddweightedå®ç°å›¾åƒçº¿æ€§æ··åˆ">5.
ä½¿ç”¨cv::addWeightedå®ç°å›¾åƒçº¿æ€§æ··åˆ</h2>
<p>åœ¨è®¡ç®—æœºè§†è§‰ä¸­ï¼Œå›¾åƒæ··åˆæ˜¯ä¸€é¡¹åŸºç¡€ä¸”å®ç”¨çš„æŠ€æœ¯ã€‚é€šè¿‡è°ƒæ•´æƒé‡å‚æ•°ï¼Œå¯ä»¥å®ç°ä¸¤å¼ å›¾ç‰‡çš„å¹³æ»‘è¿‡æ¸¡æ•ˆæœï¼Œä¾‹å¦‚å¹»ç¯ç‰‡åˆ‡æ¢æˆ–è§†é¢‘è½¬åœºã€‚æœ¬èŠ‚ä»‹ç»å¦‚ä½•ä½¿ç”¨
<code>cv::addWeighted</code> å‡½æ•°å®ç°å›¾åƒçš„çº¿æ€§æ··åˆã€‚</p>
<h3 id="ç†è®ºèƒŒæ™¯">5.1. ç†è®ºèƒŒæ™¯</h3>
<p>çº¿æ€§æ··åˆçš„æ•°å­¦è¡¨è¾¾å¼ä¸ºï¼š<br />
<span class="math display">\[\nonumber
g(x) = (1 - \alpha) \cdot f_0(x) + \alpha \cdot f_1(x)
\]</span><br />
å…¶ä¸­ï¼Œ<span class="math inline">\(\alpha\)</span> çš„å–å€¼èŒƒå›´ä¸º <span
class="math inline">\([0, 1]\)</span>ã€‚å½“ <span
class="math inline">\(\alpha\)</span> ä» 0 é€æ¸å¢åŠ åˆ° 1 æ—¶ï¼Œè¾“å‡ºå›¾åƒä¼šä»
<span class="math inline">\(f_0\)</span> å¹³æ»‘è¿‡æ¸¡åˆ° <span
class="math inline">\(f_1\)</span>ã€‚</p>
<h3 id="ä»£ç å®ç°">5.2. ä»£ç å®ç°</h3>
<p>ä»¥ä¸‹æ˜¯ä½¿ç”¨C++å’ŒOpenCVå®ç°å›¾åƒæ··åˆçš„å®Œæ•´ä»£ç ï¼š</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;opencv2/opencv.hpp&gt;</span><span class="pp">  </span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;iostream&gt;</span><span class="pp">  </span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">&#123;</span>  </span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> alpha <span class="op">=</span> <span class="fl">0.5</span><span class="op">;</span>  </span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> beta<span class="op">,</span> user_input<span class="op">;</span>  </span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>    <span class="co">// è¯»å–ä¸¤å¼ å›¾ç‰‡  </span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>    cv<span class="op">::</span>Mat src1 <span class="op">=</span> cv<span class="op">::</span>imread<span class="op">(</span>cv<span class="op">::</span>samples<span class="op">::</span>findFile<span class="op">(</span><span class="st">&quot;LinuxLogo.jpg&quot;</span><span class="op">));</span>  </span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>    cv<span class="op">::</span>Mat src2 <span class="op">=</span> cv<span class="op">::</span>imread<span class="op">(</span>cv<span class="op">::</span>samples<span class="op">::</span>findFile<span class="op">(</span><span class="st">&quot;WindowsLogo.jpg&quot;</span><span class="op">));</span>  </span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>    <span class="co">// æ£€æŸ¥å›¾ç‰‡æ˜¯å¦åŠ è½½æˆåŠŸ  </span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>src1<span class="op">.</span>empty<span class="op">())</span> <span class="op">&#123;</span>  </span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>        <span class="bu">std::</span>cout <span class="op">&lt;&lt;</span> <span class="st">&quot;é”™è¯¯ï¼šæ— æ³•åŠ è½½src1&quot;</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span>  </span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="op">-</span><span class="dv">1</span><span class="op">;</span>  </span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>    <span class="op">&#125;</span>  </span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>src2<span class="op">.</span>empty<span class="op">())</span> <span class="op">&#123;</span>  </span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>        <span class="bu">std::</span>cout <span class="op">&lt;&lt;</span> <span class="st">&quot;é”™è¯¯ï¼šæ— æ³•åŠ è½½src2&quot;</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span>  </span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="op">-</span><span class="dv">1</span><span class="op">;</span>  </span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>    <span class="op">&#125;</span>  </span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>    <span class="co">// è·å–ç”¨æˆ·è¾“å…¥çš„alphaå€¼  </span></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>    <span class="bu">std::</span>cout <span class="op">&lt;&lt;</span> <span class="st">&quot;è¯·è¾“å…¥alphaå€¼ï¼ˆ0.0-1.0ï¼‰: &quot;</span><span class="op">;</span>  </span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>    <span class="bu">std::</span>cin <span class="op">&gt;&gt;</span> user_input<span class="op">;</span>  </span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>user_input <span class="op">&gt;=</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> user_input <span class="op">&lt;=</span> <span class="dv">1</span><span class="op">)</span> <span class="op">&#123;</span>  </span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>        alpha <span class="op">=</span> user_input<span class="op">;</span>  </span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>    <span class="op">&#125;</span>  </span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>    beta <span class="op">=</span> <span class="fl">1.0</span> <span class="op">-</span> alpha<span class="op">;</span>  </span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>    cv<span class="op">::</span>Mat dst<span class="op">;</span>  </span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a>    <span class="co">// æ‰§è¡Œçº¿æ€§æ··åˆ</span></span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>    <span class="co">// void addWeighted(InputArray src1, double alpha, InputArray src2,</span></span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>    <span class="co">//                  double beta, double gamma, OutputArray dst,</span></span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a>    <span class="co">//                  int //dtype = -1);</span></span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a>    cv<span class="op">::</span>addWeighted<span class="op">(</span>src1<span class="op">,</span> alpha<span class="op">,</span> src2<span class="op">,</span> beta<span class="op">,</span> <span class="fl">0.0</span><span class="op">,</span> dst<span class="op">);</span>  </span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a>    <span class="co">// æ˜¾ç¤ºç»“æœ  </span></span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a>    cv<span class="op">::</span>imshow<span class="op">(</span><span class="st">&quot;æ··åˆç»“æœ&quot;</span><span class="op">,</span> dst<span class="op">);</span>  </span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a>    cv<span class="op">::</span>waitKey<span class="op">(</span><span class="dv">0</span><span class="op">);</span>  </span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span>  </span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a><span class="op">&#125;</span>  </span></code></pre></div>
<h3 id="å…³é”®ä»£ç è§£æ">5.3. å…³é”®ä»£ç è§£æ</h3>
<ol type="1">
<li><strong>åŠ è½½å›¾ç‰‡</strong>
<ul>
<li>ä½¿ç”¨<code>cv::imread</code>è¯»å–å›¾ç‰‡ï¼Œå¹¶é€šè¿‡<code>cv::samples::findFile</code>ç¡®ä¿è·¯å¾„æ­£ç¡®ã€‚<br />
</li>
</ul></li>
<li><strong>è¾“å…¥éªŒè¯</strong>
<ul>
<li>ç”¨æˆ·è¾“å…¥çš„Î±å€¼é€šè¿‡<code>std::cin</code>è·å–ï¼Œå¹¶é™åˆ¶åœ¨<code>[0, 1]</code>èŒƒå›´å†…ã€‚<br />
</li>
</ul></li>
<li><strong>æ··åˆè®¡ç®—</strong>
<ul>
<li><code>cv::addWeighted</code>å‡½æ•°çš„å‚æ•°ä¾æ¬¡ä¸ºï¼š
<ul>
<li><code>src1</code>ï¼šç¬¬ä¸€å¼ è¾“å…¥å›¾åƒã€‚<br />
</li>
<li><code>alpha</code>ï¼šç¬¬ä¸€å¼ å›¾åƒçš„æƒé‡ã€‚<br />
</li>
<li><code>src2</code>ï¼šç¬¬äºŒå¼ è¾“å…¥å›¾åƒã€‚<br />
</li>
<li><code>beta</code>ï¼šç¬¬äºŒå¼ å›¾åƒçš„æƒé‡ï¼ˆé€šå¸¸ä¸º<code>1 - alpha</code>ï¼‰ã€‚<br />
</li>
<li><code>gamma</code>ï¼šæ ‡é‡åç§»é‡ï¼ˆæ­¤å¤„è®¾ä¸º0ï¼‰ã€‚<br />
</li>
<li><code>dst</code>ï¼šè¾“å‡ºå›¾åƒã€‚</li>
</ul></li>
</ul></li>
</ol>
<h3 id="æ³¨æ„äº‹é¡¹">5.4. æ³¨æ„äº‹é¡¹</h3>
<ol type="1">
<li><strong>å›¾ç‰‡å°ºå¯¸ä¸ç±»å‹</strong>
<ul>
<li>è¾“å…¥çš„ä¸¤å¼ å›¾åƒå¿…é¡»å…·æœ‰ç›¸åŒçš„å°ºå¯¸ï¼ˆå®½åº¦å’Œé«˜åº¦ï¼‰å’Œæ•°æ®ç±»å‹ï¼Œå¦åˆ™ä¼šå¯¼è‡´è¿è¡Œæ—¶é”™è¯¯ã€‚<br />
</li>
</ul></li>
<li><strong>æ‰©å±•åº”ç”¨</strong>
<ul>
<li>æ­¤æŠ€æœ¯å¯ç”¨äºåˆ›å»ºåŠ¨æ€æ•ˆæœï¼Œå¦‚è§†é¢‘æ·¡å…¥æ·¡å‡ºã€ARåœºæ™¯å åŠ ç­‰ã€‚</li>
</ul></li>
</ol>
<h3 id="æ€»ç»“-2">5.5. æ€»ç»“</h3>
<p>é€šè¿‡<code>cv::addWeighted</code>å‡½æ•°ï¼ŒOpenCVä¸ºå›¾åƒæ··åˆæä¾›äº†ä¸€ç§ç®€æ´é«˜æ•ˆçš„å®ç°æ–¹å¼ã€‚æŒæ¡è¿™ä¸€æŠ€æœ¯åï¼Œå¯ä»¥è¿›ä¸€æ­¥æ¢ç´¢æ›´å¤æ‚çš„å›¾åƒå¤„ç†ä»»åŠ¡ï¼Œå¦‚å›¾åƒèåˆã€é®ç½©å¤„ç†ç­‰ã€‚</p>
<hr />
<a href="/2025/01/27/OpenCV%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E6%A0%B8%E5%BF%83%E5%8A%9F%E8%83%BD%EF%BC%88%E4%B8%8B%EF%BC%89/" title="OpenCVå…¥é—¨å­¦ä¹ -æ ¸å¿ƒåŠŸèƒ½ï¼ˆä¸‹ï¼‰">OpenCVå…¥é—¨å­¦ä¹ -æ ¸å¿ƒåŠŸèƒ½ï¼ˆä¸‹ï¼‰</a>
<h2 id="å‚è€ƒèµ„æ–™">6. å‚è€ƒèµ„æ–™</h2>
<p><strong>[1]</strong> <a
href="https://docs.opencv.org/4.x/de/d7a/tutorial_table_of_content_core.html">OpenCVå®˜æ–¹æ–‡æ¡£</a></p>
]]></content>
      <categories>
        <category>è®¡ç®—æœºè§†è§‰</category>
      </categories>
      <tags>
        <tag>è®¡ç®—æœºè§†è§‰</tag>
        <tag>C/C++</tag>
        <tag>OpenCV</tag>
      </tags>
  </entry>
  <entry>
    <title>å•åƒç©ºé—´åæ–¹äº¤ä¼š</title>
    <url>/2025/01/18/%E5%8D%95%E5%83%8F%E7%A9%BA%E9%97%B4%E5%90%8E%E6%96%B9%E4%BA%A4%E4%BC%9A/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><span id="more"></span>
<h2 id="æ¦‚è¦">1. æ¦‚è¦</h2>
<p>å•åƒåæ–¹äº¤ä¼šçš„åŸºæœ¬æ€æƒ³æ˜¯<strong>è‡³å°‘</strong>åˆ©ç”¨ä¸‰ä¸ªå·²çŸ¥åœ°é¢æ§åˆ¶ç‚¹çš„åæ ‡
<span class="math inline">\(A(X_A,Y_A,Z_A)\)</span>ï¼Œ<span
class="math inline">\(B(X_B,Y_B,Z_B)\)</span>ï¼Œ<span
class="math inline">\(C(X_C,Y_C,Z_C)\)</span>
ï¼Œä¸å½±åƒä¸Šå¯¹åº”çš„ä¸‰ä¸ªåƒç‚¹çš„å½±åƒåæ ‡ <span
class="math inline">\(a(x_a,y_a)\)</span>ï¼Œ<span
class="math inline">\(b(x_b,y_b)\)</span>ï¼Œ<span
class="math inline">\(c(x_c,y_c)\)</span>
ï¼Œå†æ ¹æ®å…±çº¿æ–¹ç¨‹ï¼Œåæ±‚è¯¥åƒç‰‡çš„å¤–æ–¹ä½å…ƒç´  <span
class="math inline">\(X_s,Y_s,Z_s,\varphi,\omega,\kappa\)</span>ã€‚è¿™ç§è§£æ³•æ˜¯ä»¥å•å¼ åƒç‰‡ä¸ºåŸºç¡€ï¼Œæ‰€ä»¥ä¹Ÿç§°åšå•åƒç©ºé—´åæ–¹äº¤ä¼šã€‚</p>
<h2 id="æ¨å¯¼">2. æ¨å¯¼</h2>
<h3 id="åŸºæœ¬å…³ç³»å¼">2.1. åŸºæœ¬å…³ç³»å¼</h3>
<p>å…±çº¿æ–¹ç¨‹ï¼š <span class="math display">\[
\begin{array}{c}
x=-f\frac{a_1\left( X-X_s \right) +b_1\left( Y-Y_s \right) +c_1\left(
Z-Z_s \right)}{a_3\left( X-X_s \right) +b_3\left( Y-Y_s \right)
+c_3\left( Z-Z_s \right)} \\
y=-f\frac{a_2\left( X-X_s \right) +b_2\left( Y-Y_s \right) +c_2\left(
Z-Z_s \right)}{a_3\left( X-X_s \right) +b_3\left( Y-Y_s \right)
+c_3\left( Z-Z_s \right)} \\
\end{array}
\]</span></p>
<p>ä¸ºäº†æ–¹ä¾¿è®¡ç®—ï¼Œéœ€è¦æŠŠéçº¿æ€§çš„å…±çº¿æ–¹ç¨‹çº¿æ€§åŒ–ã€‚<span
class="math inline">\(x,y\)</span>
æ˜¯å…³äºå…­ä¸ªå¤–æ–¹ä½å…ƒç´ çš„å¤šå…ƒå‡½æ•°ï¼Œè¿›è¡Œä¸€æ¬¡æ³°å‹’å±•å¼€ï¼š <span
class="math display">\[\label{å…±çº¿æ–¹ç¨‹}
\begin{array}{c}
x = \tilde{x} + \frac{\partial x}{\partial X_s}dX_s + \frac{\partial
x}{\partial Y_s}dY_s+\frac{\partial x}{\partial Z_s}dZ_s+\frac{\partial
x}{\partial \varphi}d\varphi +\frac{\partial x}{\partial \omega}d\omega
+\frac{\partial x}{\partial \kappa}d\kappa  \\
y = \tilde{y} +\frac{\partial y}{\partial X_s}dX_s+\frac{\partial
y}{\partial Y_s}dY_s+\frac{\partial y}{\partial Z_s}dZ_s+\frac{\partial
y}{\partial \varphi}d\varphi +\frac{\partial y}{\partial \omega}d\omega
+\frac{\partial y}{\partial \kappa}d\kappa
\end{array}
\]</span> <span class="math inline">\(\tilde{x},\tilde{y}\)</span>
æ˜¯å‡½æ•°çš„è¿‘ä¼¼å€¼ï¼Œæ˜¯æŠŠå¤–æ–¹ä½å…ƒç´ çš„åˆå€¼ <span
class="math inline">\(X_{s0},Y_{s0},Z_{s0},\varphi_0,\omega_0,\kappa_0\)</span>
å¸¦å…¥å…±çº¿æ–¹ç¨‹ä¸­å¾—åˆ°çš„ç»“æœï¼›<br />
<span
class="math inline">\(dX_s,dY_x,dZ_s,d\varphi_,d\omega,d\kappa\)</span>
æ˜¯å¯¹åº”å¤–æ–¹ä½å…ƒç´ è¿‘ä¼¼å€¼çš„æ”¹æ­£æ•°ï¼ˆä¹Ÿå°±æ˜¯å¢é‡ï¼‰ï¼›<br />
<span class="math inline">\(\frac{\partial x}{\partial
X_s},\dots,\frac{\partial y}{\partial \kappa}\)</span>
ä¸ºåå¯¼æ•°ï¼Œæ˜¯å¤–æ–¹ä½å…ƒç´ æ”¹æ­£æ•°çš„ç³»æ•°ã€‚</p>
<p>ä¸ºäº†æ–¹ä¾¿è¡¨ç¤ºï¼Œå¼ <span
class="math inline">\(\eqref{å…±çº¿æ–¹ç¨‹}\)</span> è®°ä¸ºï¼š <span
class="math display">\[\label{å…±çº¿æ–¹ç¨‹ç®€åŒ–}
\begin{array}{c}
x = \tilde{x} + a_{11}\ dX_s + a_{12}\ dY_s+a_{13}\ dZ_s+a_{14}\
d\varphi +a_{15}\ d\omega +a_{16}\ d\kappa= \tilde{x} + dx  \\
y = \tilde{y} +a_{21}\ dX_s+a_{22}\ dY_s+a_{23}\ dZ_s+a_{24}\ d\varphi
+a_{25}\ d\omega +a_{26}\ d\kappa=\tilde{y} + dy
\end{array}
\]</span> <span class="math inline">\(dx,dy\)</span>
è¡¨ç¤ºè¿‘ä¼¼å€¼çš„æ”¹æ­£å€¼ã€‚</p>
<p>å› ä¸ºä¸Šè¿°è¿‘ä¼¼æ˜¯ä¸€é˜¶çš„ï¼Œç»“æœè¾ƒä¸ºç²—ç•¥ï¼Œæ‰€ä»¥éœ€è¦ä¸æ–­è¿­ä»£è¶‹è¿‘ï¼Œç›´åˆ°æ”¹æ­£å€¼å°äºæŸä¸€é˜ˆå€¼ã€‚<br />
å¯¹äºä¸€ä¸ªæ§åˆ¶ç‚¹å°±èƒ½ç”±å…±çº¿æ–¹ç¨‹åˆ—å†™ä¸¤ä¸ªå¼å­ï¼Œæ‰€ä»¥ä¸€ä¸ªåƒç‰‡ä¸­æœ‰ä¸‰ä¸ªç‚¹å°±èƒ½åˆ—å‡ºå…­ä¸ªæ–¹ç¨‹ï¼Œæ±‚å‡ºå…­ä¸ªå¤–æ–¹ä½å…ƒç´ çš„æ”¹æ­£å€¼ã€‚</p>
<h3 id="è¯¯å·®æ–¹ç¨‹ä¸æ³•æ–¹ç¨‹">2.2. è¯¯å·®æ–¹ç¨‹ä¸æ³•æ–¹ç¨‹</h3>
<p>ä¸ºäº†æé«˜è§£ç®—å¤–æ–¹ä½å…ƒç´ çš„ç²¾åº¦ï¼Œå¸¸æœ‰å¤šä½™è§‚æµ‹æ–¹ç¨‹ã€‚åœ¨ç©ºé—´åæ–¹äº¤ä¼šä¸­ï¼Œé€šå¸¸æ˜¯åœ¨åƒç‰‡çš„å››ä¸ªè§’ä¸Šé€‰å–å››ä¸ªæˆ–è€…æ›´å¤šçš„åœ°é¢æ§åˆ¶ç‚¹ï¼Œå› æ­¤è¦ç”¨æœ€å°äºŒä¹˜æ³•å¹³å·®è®¡ç®—ã€‚<br />
<strong>è®¡ç®—ä¸­ï¼Œé€šå¸¸å°†æ§åˆ¶ç‚¹çš„åœ°é¢åæ ‡è§†ä¸ºçœŸå€¼ï¼Œè€ŒæŠŠç›¸åº”çš„åƒç‚¹åæ ‡è§†ä¸ºè§‚æµ‹å€¼</strong>ï¼ŒåŠ å…¥ç›¸åº”çš„æ”¹æ­£æ•°
<span class="math inline">\(v_x,v_y\)</span>ï¼ŒæŒ‰ç…§
<code>è§‚æµ‹å€¼ + è§‚æµ‹å€¼æ”¹æ­£æ•° = è¿‘ä¼¼å€¼ + è¿‘ä¼¼å€¼æ”¹æ­£æ•°</code>
çš„æ”¹æ­£åŸåˆ™ï¼Œå¾—ï¼š <span class="math display">\[
\begin{array}{c}
x+v_x=\tilde{x}+dx \\
y+v_y=\tilde{y}+dy
\end{array}
\Longrightarrow
\begin{array}{c}
v_x=\tilde{x}+dx-x \\
v_y=\tilde{y}+dy-y
\end{array}
\]</span> è¿™é‡Œ <span class="math inline">\(v_x,v_y\)</span>
çš„æ„ä¹‰å°±æ¯”è¾ƒæ˜æ˜¾äº†ï¼Œä»£è¡¨ è¿‘ä¼¼å€¼ç»è¿‡æ”¹æ­£åä¸çœŸå®å€¼ä¹‹é—´çš„è¯¯å·®ã€‚</p>
<p>ç»“åˆå¼ <span
class="math inline">\(\eqref{å…±çº¿æ–¹ç¨‹ç®€åŒ–}\)</span>ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨çŸ©é˜µå½¢å¼è¡¨ç¤ºè¿™ä¸ªæ–¹ç¨‹ç»„
<span class="math display">\[
V=AX-l
\]</span> å…¶ä¸­ <span class="math display">\[
\begin{equation*}
\begin{aligned}
V&amp;=\left[v_x, v_y\right]^T \in\mathbb{R}^{2\times 1} \\\\
A&amp;=\begin{bmatrix}
a_{11} &amp; a_{12} &amp; a_{13} &amp; a_{14} &amp; a_{15} &amp; a_{16}
\\
a_{21} &amp; a_{22} &amp; a_{23} &amp; a_{24} &amp; a_{25} &amp; a_{26}
\end{bmatrix} \in\mathbb{R}^{2\times 6} \\\\
X&amp;=\left[dX_s,dY_s,dZ_s,d\varphi,d\omega,d\kappa\right]^T
\in\mathbb{R}^{6\times 1} \\\\
l&amp;=\left[l_x,l_y\right]^T=\left[x-\tilde{x}, y-\tilde{y}\right]^T
\in\mathbb{R}^{2\times 1}
\end{aligned}
\end{equation*}
\]</span> ä¸Šé¢åªæ˜¯ä¸€ä¸ªæ§åˆ¶ç‚¹çš„å½¢å¼ï¼Œå½“å­˜åœ¨ <span
class="math inline">\(n\)</span> ä¸ªæ§åˆ¶ç‚¹çš„æ—¶å€™ï¼Œåˆ™æœ‰ï¼š <span
class="math display">\[\label{è¯¯å·®æ–¹ç¨‹}
V=AX-L
\]</span> å…¶ä¸­ <span class="math display">\[
\begin{equation*}
\begin{aligned}
V&amp;=\left[V_1^T , V_2^T,\dots,V_n^T\right]^T \in \mathbb{R}^{2n\times
1} \\\\
A&amp;=\left[A_1^T,A_2^T,\dots,A_n^T \right] \in\mathbb{R}^{2n\times 6}
\\\\
X&amp;=\left[dX_s,dY_s,dZ_s,d\varphi,d\omega,d\kappa\right]^T
\in\mathbb{R}^{6\times 1} \\\\
l&amp;=\left[l_1^T,l_2^T,\dots,l_n^T \right]^T \in\mathbb{R}^{2n\times
1}
\end{aligned}
\end{equation*}
\]</span> æ³¨æ„çŸ©é˜µçš„å¤§å°ï¼Œå†™ä»£ç çš„æ—¶å€™è¦ç”¨åˆ°ã€‚</p>
<p>æ ¹æ®æœ€å°äºŒä¹˜é—´æ¥å¹³å·®åŸç†ï¼Œå¯åˆ—å‡ºæ³•æ–¹ç¨‹ï¼š <span
class="math display">\[
A^T P A X=A^T L
\]</span> å…¶ä¸­ï¼Œ<span class="math inline">\(P\)</span>
ä¸ºåƒç‚¹è§‚æµ‹å€¼çš„æƒå€¼çŸ©é˜µï¼Œè¡¨ç¤ºè§‚æµ‹å€¼æµ‹é‡çš„ç›¸å¯¹ç²¾åº¦ï¼Œä¸€èˆ¬è®¤ä¸ºæ˜¯ç­‰ç²¾åº¦æµ‹é‡ï¼Œæ•…å–
<span class="math inline">\(P\)</span> ä¸ºå•ä½é˜µï¼Œå› æ­¤å¯è§£å¾—ï¼š <span
class="math display">\[\label{å°é—­è§£}
X=(A^T A)^{-1}A^T L
\]</span> ä»è€Œæ±‚å¾—å¤–æ–¹ä½å…ƒç´ è¿‘ä¼¼å€¼çš„æ”¹æ­£æ•° <span
class="math inline">\(dX_s,dY_s,dZ_s,d\varphi,d\omega,d\kappa\)</span>
ã€‚</p>
<details class="note info"><summary><p>ä¸€äº›è§£é‡Š</p>
</summary>
<p>è¿™é‡Œçš„è®¡ç®—è¿‡ç¨‹å…¶å®å°±æ˜¯å¾ˆå¸¸è§çš„çº¿æ€§æ¨¡å‹ï¼Œæœ€å°åŒ–è¯¯å·®å³ <span
class="math display">\[\nonumber X=arg\
\underset{X}{min}\|V^TV\|_{2}^{2}\]</span>
è¿™æ˜¯ä¸€ä¸ªç»å…¸çš„å‡¸ä¼˜åŒ–é—®é¢˜ï¼Œæ±‚åå¯¼ï¼Œä»¤åå¯¼ç­‰äº 0 å³å¯ã€‚</p>

</details>
<p>æ ¹æ®ä¸Šé¢çš„å†…å®¹ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°ç¬¬ <span class="math inline">\(i\)</span>
æ¬¡è®¡ç®—çš„å¤–æ–¹ä½å…ƒç´ çš„æ”¹æ­£å€¼ <span
class="math inline">\(X_i\)</span>ï¼Œç›´åˆ°ç¬¬ <span
class="math inline">\(k\)</span> æ¬¡æ”¶æ•›çš„æ—¶ï¼Œå¾—åˆ°æœ€åçš„å¤–æ–¹ä½å…ƒç´ ï¼š
<span class="math display">\[
\begin{equation*}
\begin{aligned}
X_s &amp;= X_{s0}+dX_{s1}+dX_{s2}+\dots+dX_{sk} \\
Y_s &amp;= Y_{s0}+dY_{s1}+dY_{s2}+\dots+dY_{sk} \\
Z_s &amp;= Z_{s0}+dZ_{s1}+dZ_{s2}+\dots+dZ_{sk} \\
\varphi &amp;= \varphi_0 + d\varphi_1 + d\varphi_2+\dots+d\varphi_k \\
\omega &amp;= \omega_0 + d\omega_1+d\omega_2 + \dots+d\omega_k \\
\kappa &amp;= \kappa_0+d\kappa_1+d\kappa_2+\dots+d\kappa_k
\end{aligned}
\end{equation*}
\]</span></p>
<p>å³ <span class="math display">\[
X = X_0 + X_1 + X_2 +\dots+X_k
\]</span></p>
<p>è§‚å¯Ÿå¼ <span class="math inline">\(\eqref{å°é—­è§£}\)</span>
å¯çŸ¥ï¼Œç›®å‰ä»… <span class="math inline">\(A\)</span> æœªçŸ¥ï¼Œä¸‹é¢å¯¹ <span
class="math inline">\(A\)</span> è¿›è¡Œæ±‚è§£ã€‚ <details class="note info"><summary><p>æ±‚è§£ <span class="math inline">\(A\)</span></p>
</summary>
<p>ä¸ºä¹¦å†™æ–¹ä¾¿ï¼Œä»¤å…±çº¿æ–¹ç¨‹ä¸­çš„åˆ†å­ã€åˆ†æ¯å¦‚ä¸‹ï¼š <span
class="math display">\[\begin{equation}\label{å…±çº¿æ–¹ç¨‹åˆ†å­åˆ†æ¯}
\begin{aligned}
\overline{X} = a_1\left( X-X_s \right) +b_1\left( Y-Y_s \right)
+c_1\left( Z-Z_s \right) \\
\overline{Y} = a_2\left( X-X_s \right) +b_2\left( Y-Y_s \right)
+c_2\left( Z-Z_s \right) \\
\overline{Z} = a_3\left( X-X_s \right) +b_3\left( Y-Y_s \right)
+c_3\left( Z-Z_s \right) \\
\end{aligned}
\end{equation}
\]</span></p>
<p>ç”± <span class="math inline">\(\eqref{å…±çº¿æ–¹ç¨‹}\)</span> å’Œ <span
class="math inline">\(\eqref{å…±çº¿æ–¹ç¨‹ç®€åŒ–}\)</span> å¯çŸ¥ <span
class="math display">\[
\begin{equation*}
\begin{aligned}
a_{11} = \frac{\partial x}{\partial X_s} &amp;= \frac{\partial
\left(-f\frac{\overline{X}}{\overline{Z}}\right)}{\partial X_s} &amp;
åˆ†å¼æ±‚å¯¼\\
&amp;=-f \frac{\frac{\partial \overline{X}}{\partial X_s}\overline{Z} -
\overline{X}\frac{\partial \overline{Z}}{\partial X_s}}{\overline{Z}^2}
&amp;x=-f\frac{\overline{X}}{\overline{Z}}\\
&amp;=-f\left(-\frac{a_1}{\overline{Z}} - \frac{1}{f\overline{Z}}x
a_3\right) \\
&amp;=\frac{1}{\overline{Z}}\left(a_1 f + a_3 x\right)
\end{aligned}
\end{equation*}
\]</span></p>
<p>åŒç†å¯å¾— <span class="math display">\[
\begin{align}
&amp;
\begin{cases}\label{å¯¹XYZåå¯¼}
a_{11}=\frac{\partial x}{\partial X_{s}}=\frac{1}{\overline{Z}}(a_{1}f +
a_{3}x)\\\\
a_{12}=\frac{\partial x}{\partial Y_{s}}=\frac{1}{\overline{Z}}(b_{1}f +
b_{3}x)\\\\
a_{13}=\frac{\partial x}{\partial Z_{s}}=\frac{1}{\overline{Z}}(c_{1}f +
c_{3}x)\\\\
a_{21}=\frac{\partial y}{\partial X_{s}}=\frac{1}{\overline{Z}}(a_{2}f +
a_{3}y)\\\\
a_{22}=\frac{\partial y}{\partial Y_{s}}=\frac{1}{\overline{Z}}(b_{2}f +
b_{3}y)\\\\
a_{23}=\frac{\partial y}{\partial Z_{s}}=\frac{1}{\overline{Z}}(c_{2}f +
c_{3}y)
\end{cases}
\\\nonumber \\
&amp;
\begin{cases}\label{å¯¹è§’åº¦åå¯¼}
a_{14}=\frac{\partial x}{\partial
\varphi}=-\frac{f}{(\overline{Z})^{2}}(\frac{\partial
\overline{X}}{\partial \varphi}\overline{Z}-\frac{\partial
\overline{Z}}{\partial \varphi}\overline{X})\\\\
a_{15}=\frac{\partial x}{\partial
\omega}=-\frac{f}{(\overline{Z})^{2}}(\frac{\partial
\overline{X}}{\partial \omega}\overline{Z}-\frac{\partial
\overline{Z}}{\partial \omega}\overline{X})\\\\
a_{16}=\frac{\partial x}{\partial
\kappa}=-\frac{f}{(\overline{Z})^{2}}(\frac{\partial
\overline{X}}{\partial \kappa}\overline{Z}-\frac{\partial
\overline{Z}}{\partial \kappa}\overline{X})\\\\
a_{24}=\frac{\partial y}{\partial
\varphi}=-\frac{f}{(\overline{Z})^{2}}(\frac{\partial
\overline{Y}}{\partial \varphi}\overline{Z}-\frac{\partial
\overline{Z}}{\partial \varphi}\overline{Y})\\\\
a_{25}=\frac{\partial y}{\partial
\omega}=-\frac{f}{(\overline{Z})^{2}}(\frac{\partial
\overline{Y}}{\partial \omega}\overline{Z}-\frac{\partial
\overline{Z}}{\partial \omega}\overline{Y})\\\\
a_{26}=\frac{\partial y}{\partial
\kappa}=-\frac{f}{(\overline{Z})^{2}}(\frac{\partial
\overline{Y}}{\partial \kappa}\overline{Z}-\frac{\partial
\overline{Z}}{\partial \kappa}\overline{Y})
\end{cases}
\end{align}
\]</span></p>
<p>ç”±å¼ <span class="math inline">\(\eqref{å…±çº¿æ–¹ç¨‹åˆ†å­åˆ†æ¯}\)</span>
å¯çŸ¥ <span class="math display">\[
\begin{aligned}
\left[ \begin{array}{c}
\overline{X} \\
\overline{Y} \\
\overline{Z} \\
\end{array} \right]
&amp;=\left[\begin{array}{c}
a_1 &amp; a_2 &amp; a_3 \\
b_1 &amp; b_2 &amp; b_3 \\
c_1 &amp; c_2 &amp; c_3 \\
\end{array}\right]
\left[\begin{array}{c}
X-X_s\\
Y-Y_s\\
Z-Z_s
\end{array}\right]
=R^T\left[\begin{array}{c}
X-X_s\\
Y-Y_s\\
Z-Z_s
\end{array}\right] \\
&amp;=R_{\kappa}^T R_{\omega}^T R_{\varphi}^T \left[\begin{array}{c}
X-X_s\\
Y-Y_s\\
Z-Z_s
\end{array}\right]
=R_{\kappa}^{-1} R_{\omega}^{-1} R_{\varphi}^{-1} \left[\begin{array}{c}
X-X_s\\
Y-Y_s\\
Z-Z_s
\end{array}\right]
\end{aligned}
\]</span></p>
<p>æ‰€ä»¥ <span class="math display">\[
\begin{equation}
\begin{aligned}
\frac{\partial}{\partial \varphi}
\begin{bmatrix}
\overline{X} \\
\overline{Y} \\
\overline{Z}
\end{bmatrix}
&amp;= R_{\kappa}^{-1} R_{\omega}^{-1} \frac{\partial
R_{\varphi}^{-1}}{\partial \varphi}
\begin{bmatrix}
X - X_{s} \\
Y - Y_{s} \\
Z - Z_{s}
\end{bmatrix}\\
&amp;= R_{\kappa}^{-1} R_{\omega}^{-1} R_{\varphi}^{-1} R_{\varphi}
\frac{\partial R_{\varphi}^{-1}}{\partial \varphi}
\begin{bmatrix}
X - X_{s} \\
Y - Y_{s} \\
Z - Z_{s}
\end{bmatrix}\\
&amp;= R^{-1} R_{\varphi} \frac{\partial R_{\varphi}^{-1}}{\partial
\varphi}
\begin{bmatrix}
X - X_{s} \\
Y - Y_{s} \\
Z - Z_{s}
\end{bmatrix}
\end{aligned}
\end{equation}
\]</span></p>
<p>è€Œ <span class="math display">\[
R_{\varphi}^{-1} = R_{\varphi}^{\mathrm{T}}
=\begin{bmatrix}
\cos\varphi &amp; 0 &amp; \sin\varphi \\
0 &amp; 1 &amp; 0 \\
-\sin\varphi &amp; 0 &amp; \cos\varphi
\end{bmatrix}
\]</span> åˆ™ <span class="math display">\[
R_{\varphi} \frac{\partial R_{\varphi}^{-1}}{\partial \varphi}
=\begin{bmatrix}
\cos\varphi &amp; 0 &amp; -\sin\varphi \\
0 &amp; 1 &amp; 0 \\
\sin\varphi &amp; 0 &amp; \cos\varphi
\end{bmatrix}
\begin{bmatrix}
-\sin\varphi &amp; 0 &amp; \cos\varphi \\
0 &amp; 0 &amp; 0 \\
-\cos\varphi &amp; 0 &amp; -\sin\varphi
\end{bmatrix}
=\begin{bmatrix}
0 &amp; 0 &amp; 1 \\
0 &amp; 0 &amp; 0 \\
-1 &amp; 0 &amp; 0
\end{bmatrix}
\]</span></p>
<p>ä»£å…¥ä¸Šå¼ï¼Œå¾—ï¼š <span class="math display">\[
\begin{equation}\label{varphiåå¯¼}
\begin{aligned}
\frac{\partial}{\partial \varphi}
\begin{bmatrix}
\overline{X} \\
\overline{Y} \\
\overline{Z}
\end{bmatrix}
&amp;=\begin{bmatrix}
a_{1} &amp; b_{1} &amp; c_{1} \\
a_{2} &amp; b_{2} &amp; c_{2} \\
a_{3} &amp; b_{3} &amp; c_{3}
\end{bmatrix}
\begin{bmatrix}
0 &amp; 0 &amp; 1 \\
0 &amp; 0 &amp; 0 \\
-1 &amp; 0 &amp; 0
\end{bmatrix}
\begin{bmatrix}
X - X_{s} \\
Y - Y_{s} \\
Z - Z_{s}
\end{bmatrix}\\
&amp;=\begin{bmatrix}
a_{1} &amp; b_{1} &amp; c_{1} \\
a_{2} &amp; b_{2} &amp; c_{2} \\
a_{3} &amp; b_{3} &amp; c_{3}
\end{bmatrix}
\begin{bmatrix}
0 &amp; 0 &amp; 1 \\
0 &amp; 0 &amp; 0 \\
-1 &amp; 0 &amp; 0
\end{bmatrix}
\begin{bmatrix}
a_{1} &amp; a_{2} &amp; a_{3} \\
b_{1} &amp; b_{2} &amp; b_{3} \\
c_{1} &amp; c_{2} &amp; c_{3}
\end{bmatrix}
\begin{bmatrix}
\overline{X} \\
\overline{Y} \\
\overline{Z}
\end{bmatrix}\\
&amp;=\begin{bmatrix}
0 &amp; -b_{3} &amp; b_{2} \\
b_{3} &amp; 0 &amp; -b_{1} \\
-b_{2} &amp; b_{1} &amp; 0
\end{bmatrix}
\begin{bmatrix}
\overline{X} \\
\overline{Y} \\
\overline{Z}
\end{bmatrix}
\end{aligned}
\end{equation}
\]</span> æŒ‰ç›¸ä»¿çš„æ–¹æ³•ï¼Œå¾—ï¼š <span class="math display">\[
\begin{equation}\label{omegaåå¯¼}
\begin{aligned}
    \frac{\partial}{\partial \omega}
    \begin{bmatrix}
    \overline{X} \\
    \overline{Y} \\
    \overline{Z}
    \end{bmatrix}
    &amp;= R_{\kappa}^{-1} \frac{\partial R_{\omega}^{-1}}{\partial
\omega} R_{\varphi}^{-1}
    \begin{bmatrix}
    X - X_{s} \\
    Y - Y_{s} \\
    Z - Z_{s}
    \end{bmatrix}\\
    &amp;= R_{\kappa}^{-1} \frac{\partial R_{\omega}^{-1}}{\partial
\omega} R_{\omega} R_{\kappa} R_{\kappa}^{-1} R_{\omega}^{-1}
R_{\varphi}^{-1}
    \begin{bmatrix}
    X - X_{s} \\
    Y - Y_{s} \\
    Z - Z_{s}
    \end{bmatrix}\\
    &amp;=R_{\kappa}^{-1}
    \begin{bmatrix}
    0 &amp; 0 &amp; 0 \\
    0 &amp; 0 &amp; 1 \\
    0 &amp; -1 &amp; 0
    \end{bmatrix}
    R_{\kappa}R^{-1}
    \begin{bmatrix}
    X - X_{s} \\
    Y - Y_{s} \\
    Z - Z_{s}
    \end{bmatrix}\\
    &amp;=\begin{bmatrix}
    \overline{Z}\sin\kappa \\
    \overline{Z}\cos\kappa \\
    -\overline{X}\sin\kappa - Y\cos\kappa
    \end{bmatrix}
\end{aligned}
\end{equation}
\]</span></p>
<p><span class="math display">\[
\begin{equation}\label{kappaåå¯¼}
\begin{aligned}
    \frac{\partial}{\partial \kappa}
    \begin{bmatrix}
    \overline{X} \\
    \overline{Y} \\
    \overline{Z}
    \end{bmatrix}
    &amp;=\frac{\partial R_{\kappa}^{-1}}{\partial
\kappa}R_{\kappa}R_{\kappa}^{-1}R_{\omega}^{-1}R_{\varphi}^{-1}
    \begin{bmatrix}
    X - X_{s} \\
    Y - Y_{s} \\
    Z - Z_{s}
    \end{bmatrix}\\
    &amp;=\begin{bmatrix}
    0 &amp; 1 &amp; 0 \\
    -1 &amp; 0 &amp; 0 \\
    0 &amp; 0 &amp; 0
    \end{bmatrix}
    \begin{bmatrix}
    a_{1} &amp; b_{1} &amp; c_{1} \\
    a_{2} &amp; b_{2} &amp; c_{2} \\
    a_{3} &amp; b_{3} &amp; c_{3}
    \end{bmatrix}
    \begin{bmatrix}
    X - X_{s} \\
    Y - Y_{s} \\
    Z - Z_{s}
    \end{bmatrix}\\
    &amp;=\begin{bmatrix}
    \overline{Y} \\
    -\overline{X} \\
    0
    \end{bmatrix}
\end{aligned}
\end{equation}
\]</span></p>
<p>å°† <span class="math inline">\(\eqref{varphiåå¯¼} \eqref{omegaåå¯¼}
\eqref{kappaåå¯¼}\)</span> å¸¦å…¥ <span
class="math inline">\(\eqref{å¯¹è§’åº¦åå¯¼}\)</span>ï¼Œæ•´ç†å¾—ï¼š <span
class="math display">\[
\begin{equation}\label{å¯¹è§’åº¦åå¯¼åŒ–ç®€}
\begin{aligned}
a_{14} &amp;= y\sin\omega - \left[\frac{x}{f}(x\cos\kappa - y\sin\kappa)
+ f\cos\kappa\right]\cos\omega\\
a_{15} &amp;= -f\sin\kappa - \frac{x}{f}(x\sin\kappa + y\cos\kappa)\\
a_{16} &amp;= y\\
a_{24} &amp;= -x\sin\omega - \left[\frac{y}{f}(x\cos\kappa -
y\sin\kappa) - f\sin\kappa\right]\cos\omega\\
a_{25} &amp;= -f\cos\kappa - \frac{y}{f}(x\sin\kappa + y\cos\kappa)\\
a_{26} &amp;= -x
\end{aligned}
\end{equation}
\]</span></p>

</details></p>
<p>åœ¨<strong>ç«–ç›´æ‘„å½±</strong>æƒ…å†µä¸‹ï¼Œè§’å…ƒç´ éƒ½æ˜¯å°è§’<span
class="math inline">\((\lt 3Â°)\)</span>ï¼Œå¯ç”¨ <span
class="math inline">\(\varphi=\omega=\kappa=0\)</span> åŠ <span
class="math inline">\(Z-Z_s=-H\)</span> ä»£æ›¿ï¼Œå¾—åˆ°å„ç³»æ•°çš„è¿‘ä¼¼å€¼ï¼š <span
class="math display">\[
\begin{equation}
\begin{aligned}
a_{11} &amp;= -\frac{f}{H} &amp; a_{12} &amp;= 0 &amp; a_{13} &amp;=
-\frac{x}{H}\\
a_{14} &amp;= -f\left(1 + \frac{x^2}{f^2}\right) &amp; a_{15} &amp;=
-\frac{xy}{f} &amp; a_{16} &amp;= y\\
a_{21} &amp;= 0 &amp; a_{22} &amp;= -\frac{f}{H} &amp; a_{23} &amp;=
-\frac{y}{H}\\
a_{24} &amp;= -\frac{xy}{f} &amp; a_{25} &amp;= -f\left(1 +
\frac{y^2}{f^2}\right) &amp; a_{26} &amp;= -x
\end{aligned}
\end{equation}
\]</span></p>
<h2 id="è§£ç®—æ­¥éª¤">3. è§£ç®—æ­¥éª¤</h2>
<p>ç»¼ä¸Šæ‰€è¿°ï¼Œç©ºé—´åæ–¹äº¤ä¼šçš„æ±‚è§£è¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<ol type="1">
<li>è·å–å·²çŸ¥æ•°æ®ï¼šä»æ‘„å½±èµ„æ–™ä¸­æŸ¥å–åƒç‰‡æ¯”ä¾‹å°º<span
class="math inline">\(1/m\)</span>ï¼Œå¹³å‡èˆªé«˜ï¼Œå†…æ–¹å…ƒç´ <span
class="math inline">\(x_0\)</span>ã€<span
class="math inline">\(y_0\)</span>ã€<span
class="math inline">\(f\)</span>ï¼›ä»å¤–ä¸šæµ‹é‡æˆæœä¸­ï¼Œè·å–æ§åˆ¶ç‚¹çš„åœ°é¢æµ‹é‡åæ ‡<span
class="math inline">\(X_t\)</span>ã€<span
class="math inline">\(Y_t\)</span>ã€<span
class="math inline">\(Z_t\)</span>ï¼Œå¹¶è½¬åŒ–æˆåœ°é¢æ‘„å½±æµ‹é‡åæ ‡<span
class="math inline">\(X\)</span>ã€<span
class="math inline">\(Y\)</span>ã€<span
class="math inline">\(Z\)</span>ã€‚</li>
<li>é‡æµ‹æ§åˆ¶ç‚¹çš„åƒç‚¹åæ ‡ï¼šå°†æ§åˆ¶ç‚¹æ ‡åˆºåœ¨åƒç‰‡ä¸Šï¼Œåˆ©ç”¨ç«‹ä½“åæ ‡é‡æµ‹ä»ªé‡æµ‹æ§åˆ¶ç‚¹çš„åƒæ¡†æ ‡åæ ‡ï¼Œå¹¶ç»åƒç‚¹åæ ‡æ”¹æ­£ï¼Œå¾—åˆ°åƒç‚¹åæ ‡<span
class="math inline">\(x\)</span>ã€<span
class="math inline">\(y\)</span>ã€‚</li>
<li>ç¡®å®šæœªçŸ¥æ•°çš„åˆå§‹å€¼ï¼šåœ¨ç«–ç›´æ‘„å½±æƒ…å†µä¸‹ï¼Œè§’å…ƒç´ çš„åˆå§‹å€¼ä¸º<span
class="math inline">\(0\)</span>ï¼Œå³<span
class="math inline">\(\varphi_0 = \omega_0 = \kappa_0 =
0\)</span>ï¼›çº¿å…ƒç´ ä¸­ï¼Œ<span class="math inline">\(Z_{s0} = H =
mf\)</span>ï¼Œ<span class="math inline">\(X_{s0}\)</span>ã€<span
class="math inline">\(Y_{s0}\)</span>çš„å–å€¼å¯ç”¨å››ä¸ªè§’ä¸Šæ§åˆ¶ç‚¹åæ ‡çš„å¹³å‡å€¼ï¼Œå³ï¼š<span
class="math inline">\(X_{s0} = \frac{1}{4} \sum_{i = 1}^{4}
X_i\)</span>ï¼Œ<span class="math inline">\(Y_{s0} = \frac{1}{4} \sum_{i =
1}^{4} Y_i\)</span>ã€‚</li>
<li>è®¡ç®—æ—‹è½¬çŸ©é˜µ<span
class="math inline">\(R\)</span>ï¼šåˆ©ç”¨è§’å…ƒç´ çš„è¿‘ä¼¼å€¼è®¡ç®—æ–¹å‘ä½™å¼¦å€¼ï¼Œç»„æˆ<span
class="math inline">\(R\)</span>é˜µã€‚</li>
<li>é€ç‚¹è®¡ç®—åƒç‚¹åæ ‡çš„è¿‘ä¼¼å€¼ï¼šåˆ©ç”¨æœªçŸ¥æ•°çš„è¿‘ä¼¼å€¼æŒ‰å…±çº¿æ–¹ç¨‹å¼è®¡ç®—æ§åˆ¶ç‚¹åƒç‚¹åæ ‡çš„è¿‘ä¼¼å€¼<span
class="math inline">\(\tilde{x}\)</span>ã€<span
class="math inline">\(\tilde{y}\)</span>ã€‚</li>
<li>ç»„æˆè¯¯å·®æ–¹ç¨‹å¼ï¼šæŒ‰å¼ <span
class="math inline">\(\eqref{å¯¹XYZåå¯¼}\eqref{å¯¹è§’åº¦åå¯¼åŒ–ç®€}\eqref{è¯¯å·®æ–¹ç¨‹}\)</span>
é€ç‚¹è®¡ç®—è¯¯å·®æ–¹ç¨‹å¼çš„ç³»æ•°å’Œå¸¸æ•°é¡¹ã€‚</li>
<li>ç»„æˆæ³•æ–¹ç¨‹å¼ï¼šè®¡ç®—æ³•æ–¹ç¨‹çš„ç³»æ•°çŸ©é˜µ<span
class="math inline">\(A^{\mathrm{T}}A\)</span>ä¸å¸¸æ•°é¡¹<span
class="math inline">\(A^{\mathrm{T}}L\)</span>ã€‚</li>
<li>è§£æ±‚å¤–æ–¹ä½å…ƒç´ ï¼šæ ¹æ®æ³•æ–¹ç¨‹ï¼ŒæŒ‰å¼<span
class="math inline">\(\eqref{å°é—­è§£}\)</span>è§£æ±‚å¤–æ–¹ä½å…ƒç´ æ”¹æ­£æ•°ï¼Œå¹¶ä¸ç›¸åº”çš„è¿‘ä¼¼å€¼æ±‚å’Œï¼Œå¾—åˆ°å¤–æ–¹ä½å…ƒç´ æ–°çš„è¿‘ä¼¼å€¼ã€‚</li>
<li>æ£€æŸ¥è®¡ç®—æ˜¯å¦æ”¶æ•›ï¼šå°†æ±‚å¾—çš„å¤–æ–¹ä½å…ƒç´ çš„æ”¹æ­£æ•°ä¸è§„å®šçš„é™å·®æ¯”è¾ƒï¼Œå°äºé™å·®åˆ™è®¡ç®—ç»ˆæ­¢ï¼Œå¦åˆ™ç”¨æ–°çš„è¿‘ä¼¼å€¼é‡å¤ç¬¬4è‡³ç¬¬8æ­¥éª¤çš„è®¡ç®—ï¼Œç›´åˆ°æ»¡è¶³è¦æ±‚ä¸ºæ­¢ã€‚</li>
</ol>
<h2 id="ç²¾åº¦">4. ç²¾åº¦</h2>
<p>ç”±å¹³å·®ç†è®ºå¯çŸ¥ï¼Œæ³•æ–¹ç¨‹ç³»æ•°çš„é€†çŸ©é˜µ <span
class="math inline">\((A^{\mathrm{T}}A)^{-1}\)</span>
ç­‰äºæœªçŸ¥æ•°çš„åå› æ•°é˜µ <span
class="math inline">\(Q_{x}\)</span>ï¼Œå› æ­¤å¯æŒ‰ä¸‹å¼è®¡ç®—æœªçŸ¥æ•°çš„ä¸­è¯¯å·®ï¼š
<span class="math display">\[
m_{i}=m_{0} \cdot \sqrt{Q_{ii}}
\]</span> å¼ä¸­ï¼Œ<span class="math inline">\(i\)</span>
è¡¨ç¤ºç›¸åº”çš„æœªçŸ¥æ•°ï¼Œ<span class="math inline">\(Q_{ii}\)</span> ä¸º <span
class="math inline">\(Q_{x}\)</span> é˜µä¸­çš„ä¸»å¯¹è§’çº¿å…ƒç´ ï¼Œ<span
class="math inline">\(m_{0}\)</span> ç§°ä¸ºå•ä½æƒä¸­è¯¯å·®ï¼Œè®¡ç®—å…¬å¼ä¸ºï¼š
<span class="math display">\[
m_{0}=\pm\sqrt{\frac{\|V^TV\|_{2}^{2}}{2n - 6}}
\]</span> è¿™é‡Œï¼Œ<span class="math inline">\(n\)</span>
è¡¨ç¤ºæ§åˆ¶ç‚¹çš„æ€»æ•°ã€‚</p>
<h2 id="python-å®ç°">5. python å®ç°</h2>
<p>ä»¥ <a href="#reference1">[1]</a> çš„è¯¾åé¢˜ä¸ºä¾‹</p>
<p>ç›®å½•ç»“æ„ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€mian.py</span><br><span class="line">â”œâ”€data.txt</span><br><span class="line">â”œâ”€result.txt</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><figcaption><span>main.py</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> numpy <span class="keyword">import</span> cos, sin</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_data</span>(<span class="params">path</span>):</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(path, <span class="string">&quot;r&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        raw_data = f.read()</span><br><span class="line">        <span class="comment"># print(raw_data)</span></span><br><span class="line">    raw_data = raw_data.split(<span class="string">&quot;\n&quot;</span>)</span><br><span class="line">    data = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="built_in">len</span>(raw_data)):</span><br><span class="line">        tmp = [np.float64(it) <span class="keyword">for</span> it <span class="keyword">in</span> raw_data[i].split()]</span><br><span class="line">        data.extend([tmp])</span><br><span class="line">    <span class="keyword">return</span> np.array(data)[:, <span class="number">1</span>:]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">data_path = <span class="string">&quot;data.txt&quot;</span></span><br><span class="line">save_path = <span class="string">&quot;result.txt&quot;</span></span><br><span class="line"></span><br><span class="line">m = <span class="number">4_0000</span>  <span class="comment"># æ¯”ä¾‹å°º 1/m</span></span><br><span class="line">f = <span class="number">0.15324</span>  <span class="comment"># ä¸»è·</span></span><br><span class="line">x0, y0 = <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">phi, omega, kappa = <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>  <span class="comment"># ä¿¯ä»°è§’ã€æ¨ªæ‘‡è§’å’Œåèˆªè§’</span></span><br><span class="line"></span><br><span class="line">data = get_data(data_path)  <span class="comment"># åƒåæ ‡å’Œåœ°é¢åæ ‡æ•°æ®</span></span><br><span class="line">n_points = data.shape[<span class="number">0</span>]  <span class="comment"># æ§åˆ¶ç‚¹çš„ä¸ªæ•°</span></span><br><span class="line">img_coord = data[:, :<span class="number">2</span>] / <span class="number">1000</span>  <span class="comment"># åƒç‚¹åæ ‡ï¼Œé™¤ä»¥ 1000 å°†å•ä½æ¢ç®—ä¸º m</span></span><br><span class="line">ground_coord = data[:, <span class="number">2</span>:]  <span class="comment"># åœ°é¢åæ ‡</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Xs = np.mean(ground_coord[:, <span class="number">0</span>])</span><br><span class="line">Ys = np.mean(ground_coord[:, <span class="number">1</span>])</span><br><span class="line">Zs = m * f</span><br><span class="line"><span class="comment"># print(f&quot;å¤–æ–¹ä½å…ƒç´ åˆå§‹å€¼ï¼š&#123;Xs,Ys,Zs,phi,omega,kappa&#125;&quot;)</span></span><br><span class="line"></span><br><span class="line">R = np.zeros((<span class="number">3</span>, <span class="number">3</span>))  <span class="comment"># æ—‹è½¬çŸ©é˜µ</span></span><br><span class="line">x = y = np.zeros((n_points, <span class="number">1</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># V = AX - L</span></span><br><span class="line">V = L = np.zeros((<span class="number">2</span> * n_points, <span class="number">1</span>))</span><br><span class="line">A = np.zeros((<span class="number">2</span> * n_points, <span class="number">6</span>))</span><br><span class="line">X = np.zeros((<span class="number">6</span>, <span class="number">1</span>))</span><br><span class="line"></span><br><span class="line">n_iter, MAX_ITER = <span class="number">0</span>, <span class="number">150</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    a1 = R[<span class="number">0</span>, <span class="number">0</span>] = cos(phi) * cos(kappa) - sin(phi) * sin(omega) * sin(kappa)</span><br><span class="line">    a2 = R[<span class="number">0</span>, <span class="number">1</span>] = (-<span class="number">1.0</span>) * cos(phi) * sin(kappa) - sin(phi) * sin(omega) * cos(kappa)</span><br><span class="line">    a3 = R[<span class="number">0</span>, <span class="number">2</span>] = (-<span class="number">1.0</span>) * sin(phi) * cos(omega)</span><br><span class="line">    b1 = R[<span class="number">1</span>, <span class="number">0</span>] = cos(omega) * sin(kappa)</span><br><span class="line">    b2 = R[<span class="number">1</span>, <span class="number">1</span>] = cos(omega) * cos(kappa)</span><br><span class="line">    b3 = R[<span class="number">1</span>, <span class="number">2</span>] = (-<span class="number">1.0</span>) * sin(omega)</span><br><span class="line">    c1 = R[<span class="number">2</span>, <span class="number">0</span>] = sin(phi) * cos(kappa) + cos(phi) * sin(omega) * sin(kappa)</span><br><span class="line">    c2 = R[<span class="number">2</span>, <span class="number">1</span>] = (-<span class="number">1.0</span>) * sin(phi) * sin(kappa) + cos(phi) * sin(omega) * cos(kappa)</span><br><span class="line">    c3 = R[<span class="number">2</span>, <span class="number">2</span>] = cos(phi) * cos(omega)</span><br><span class="line"></span><br><span class="line">    X_bar = a1 * (ground_coord[:, <span class="number">0</span>] - Xs) + b1 * (ground_coord[:, <span class="number">1</span>] - Ys) + c1 * (ground_coord[:, <span class="number">2</span>] - Zs)</span><br><span class="line">    Y_bar = a2 * (ground_coord[:, <span class="number">0</span>] - Xs) + b2 * (ground_coord[:, <span class="number">1</span>] - Ys) + c2 * (ground_coord[:, <span class="number">2</span>] - Zs)</span><br><span class="line">    Z_bar = a3 * (ground_coord[:, <span class="number">0</span>] - Xs) + b3 * (ground_coord[:, <span class="number">1</span>] - Ys) + c3 * (ground_coord[:, <span class="number">2</span>] - Zs)</span><br><span class="line"></span><br><span class="line">    x = (-<span class="number">1.0</span>) * f * X_bar / Z_bar</span><br><span class="line">    y = (-<span class="number">1.0</span>) * f * Y_bar / Z_bar</span><br><span class="line"></span><br><span class="line">    L = (img_coord - np.array((x, y)).T).flatten()</span><br><span class="line">    H = Zs - ground_coord[:, <span class="number">2</span>]</span><br><span class="line"></span><br><span class="line">    A[::<span class="number">2</span>, <span class="number">0</span>] = (-<span class="number">1.0</span>) * f / H</span><br><span class="line">    A[::<span class="number">2</span>, <span class="number">1</span>] = <span class="number">0</span></span><br><span class="line">    A[::<span class="number">2</span>, <span class="number">2</span>] = (-<span class="number">1.0</span>) * x / H</span><br><span class="line">    A[::<span class="number">2</span>, <span class="number">3</span>] = (-<span class="number">1.0</span>) * f * (<span class="number">1</span> + x**<span class="number">2</span> / f**<span class="number">2</span>)</span><br><span class="line">    A[::<span class="number">2</span>, <span class="number">4</span>] = (-<span class="number">1.0</span>) * x * y / f</span><br><span class="line">    A[::<span class="number">2</span>, <span class="number">5</span>] = y</span><br><span class="line"></span><br><span class="line">    A[<span class="number">1</span>::<span class="number">2</span>, <span class="number">0</span>] = <span class="number">0</span></span><br><span class="line">    A[<span class="number">1</span>::<span class="number">2</span>, <span class="number">1</span>] = (-<span class="number">1.0</span>) * f / H</span><br><span class="line">    A[<span class="number">1</span>::<span class="number">2</span>, <span class="number">2</span>] = (-<span class="number">1.0</span>) * y / H</span><br><span class="line">    A[<span class="number">1</span>::<span class="number">2</span>, <span class="number">3</span>] = (-<span class="number">1.0</span>) * x * y / f</span><br><span class="line">    A[<span class="number">1</span>::<span class="number">2</span>, <span class="number">4</span>] = (-<span class="number">1.0</span>) * f * (<span class="number">1</span> + y**<span class="number">2</span> / f**<span class="number">2</span>)</span><br><span class="line">    A[<span class="number">1</span>::<span class="number">2</span>, <span class="number">5</span>] = (-<span class="number">1.0</span>) * x</span><br><span class="line"></span><br><span class="line">    ATA_inv = np.linalg.inv(A.T @ A)</span><br><span class="line">    X = ATA_inv @ A.T @ L</span><br><span class="line"></span><br><span class="line">    Xs += X[<span class="number">0</span>]</span><br><span class="line">    Ys += X[<span class="number">1</span>]</span><br><span class="line">    Zs += X[<span class="number">2</span>]</span><br><span class="line">    phi += X[<span class="number">3</span>]</span><br><span class="line">    omega += X[<span class="number">4</span>]</span><br><span class="line">    kappa += X[<span class="number">5</span>]</span><br><span class="line"></span><br><span class="line">    n_iter += <span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> (X[<span class="number">3</span>] &lt; <span class="number">1e-6</span> <span class="keyword">and</span> X[<span class="number">4</span>] &lt; <span class="number">1e-6</span> <span class="keyword">and</span> X[<span class="number">5</span>] &lt; <span class="number">1e-6</span>) <span class="keyword">or</span> (n_iter &gt; MAX_ITER):</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># print(&quot;è¿­ä»£æ¬¡æ•°:%0.f\n&quot; % n_iter)</span></span><br><span class="line"></span><br><span class="line">R[<span class="number">0</span>, <span class="number">0</span>] = cos(phi) * cos(kappa) - sin(phi) * sin(omega) * sin(kappa)</span><br><span class="line">R[<span class="number">0</span>, <span class="number">1</span>] = (-<span class="number">1.0</span>) * cos(phi) * sin(kappa) - sin(phi) * sin(omega) * cos(kappa)</span><br><span class="line">R[<span class="number">0</span>, <span class="number">2</span>] = (-<span class="number">1.0</span>) * sin(phi) * cos(omega)</span><br><span class="line">R[<span class="number">1</span>, <span class="number">0</span>] = cos(omega) * sin(kappa)</span><br><span class="line">R[<span class="number">1</span>, <span class="number">1</span>] = cos(omega) * cos(kappa)</span><br><span class="line">R[<span class="number">1</span>, <span class="number">2</span>] = (-<span class="number">1.0</span>) * sin(omega)</span><br><span class="line">R[<span class="number">2</span>, <span class="number">0</span>] = sin(phi) * cos(kappa) + cos(phi) * sin(omega) * sin(kappa)</span><br><span class="line">R[<span class="number">2</span>, <span class="number">1</span>] = (-<span class="number">1.0</span>) * sin(phi) * sin(kappa) + cos(phi) * sin(omega) * cos(kappa)</span><br><span class="line">R[<span class="number">2</span>, <span class="number">2</span>] = cos(phi) * cos(omega)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç²¾åº¦è®¡ç®—</span></span><br><span class="line">V = A @ X - L</span><br><span class="line">VV = np.<span class="built_in">sum</span>(np.linalg.norm(V, <span class="built_in">ord</span>=<span class="number">2</span>) ** <span class="number">2</span>)</span><br><span class="line">m0 = np.sqrt(VV / (<span class="number">2</span> * n_points - <span class="number">6</span>))</span><br><span class="line">Qx = ATA_inv.diagonal()</span><br><span class="line">m = m0 * np.sqrt(Qx)</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(save_path, <span class="string">&quot;w&quot;</span>, encoding=<span class="string">&quot;utf-8&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.writelines(<span class="string">&quot;å¤–æ–¹ä½å…ƒç´ åŠå…¶ç²¾åº¦ï¼š \n&quot;</span>)</span><br><span class="line">    f.writelines(<span class="string">f&quot;Xs:<span class="subst">&#123;Xs:<span class="number">.6</span>f&#125;</span>  m:Â±<span class="subst">&#123;m[<span class="number">0</span>]:<span class="number">.6</span>f&#125;</span>\n&quot;</span>)</span><br><span class="line">    f.writelines(<span class="string">f&quot;Ys:<span class="subst">&#123;Ys:<span class="number">.6</span>f&#125;</span>  m:Â±<span class="subst">&#123;m[<span class="number">1</span>]:<span class="number">.6</span>f&#125;</span>\n&quot;</span>)</span><br><span class="line">    f.writelines(<span class="string">f&quot;Zs:<span class="subst">&#123;Zs:<span class="number">.6</span>f&#125;</span>  m:Â±<span class="subst">&#123;m[<span class="number">2</span>]:<span class="number">.6</span>f&#125;</span>\n&quot;</span>)</span><br><span class="line">    f.writelines(<span class="string">f&quot;phi:<span class="subst">&#123;phi:<span class="number">.6</span>f&#125;</span>  m:Â±<span class="subst">&#123;m[<span class="number">3</span>]:<span class="number">.6</span>f&#125;</span>\n&quot;</span>)</span><br><span class="line">    f.writelines(<span class="string">f&quot;omega:<span class="subst">&#123;omega:<span class="number">.6</span>f&#125;</span>  m:Â±<span class="subst">&#123;m[<span class="number">4</span>]:<span class="number">.6</span>f&#125;</span>\n&quot;</span>)</span><br><span class="line">    f.writelines(<span class="string">f&quot;kappa:<span class="subst">&#123;kappa:<span class="number">.6</span>f&#125;</span>  m:Â±<span class="subst">&#123;m[<span class="number">5</span>]:<span class="number">.6</span>f&#125;</span>\n&quot;</span>)</span><br><span class="line">    f.writelines(<span class="string">&quot;\næ—‹è½¬çŸ©é˜µï¼š\n&quot;</span>)</span><br><span class="line">    f.write(<span class="string">f&quot;<span class="subst">&#123;R&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><figcaption><span>data.txt</span></figcaption><table><tr><td class="code"><pre><span class="line">NO.            x(mm)          y(mm)          X(m)           Y(m)           Z(m)</span><br><span class="line">1              -86.15         -68.99         36589.41       25273.32       2195.17</span><br><span class="line">2              -53.40         82.21          37631.08       31324.51       728.69         </span><br><span class="line">3              -14.78         -76.63         39100.97       24934.98       2386.50</span><br><span class="line">4              10.46          64.43          40426.54       30319.81       757.31</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><figcaption><span>result.txt</span></figcaption><table><tr><td class="code"><pre><span class="line">å¤–æ–¹ä½å…ƒç´ åŠå…¶ç²¾åº¦ï¼š </span><br><span class="line">Xs:39795.443401  m:Â±1.125402</span><br><span class="line">Ys:27476.464840  m:Â±1.243674</span><br><span class="line">Zs:7572.688331  m:Â±0.483771</span><br><span class="line">phi:-0.003986  m:Â±0.000182</span><br><span class="line">omega:0.002114  m:Â±0.000160</span><br><span class="line">kappa:-0.067578  m:Â±0.000072</span><br><span class="line"></span><br><span class="line">æ—‹è½¬çŸ©é˜µï¼š</span><br><span class="line">[[ 0.99770901  0.06753409  0.00398554]</span><br><span class="line"> [-0.06752607  0.99771527 -0.00211367]</span><br><span class="line"> [-0.00411918  0.0018397   0.99998982]]</span><br></pre></td></tr></table></figure>
<p>å¦‚æœä½ è§‰å¾—è¿™ç¯‡åšå®¢å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼Œä¸å¦¨åœ¨ GitHub ä¸Šç»™å®ƒç‚¹ä¸ª
starğŸŒŸï¼Œè¿™å°†æ˜¯å¯¹æˆ‘è«å¤§çš„é¼“åŠ±ã€‚<br />
<a
href="https://github.com/Blackspace2/space-resection-of-single-image.git">Github
åœ°å€</a></p>
<h2 id="å‚è€ƒèµ„æ–™">6. å‚è€ƒèµ„æ–™</h2>
<p><strong>[1]</strong>
ç‹ä½©å†›ï¼Œå¾äºšæ˜ç­‰ç¼–è‘—<span>.</span>æ‘„å½±æµ‹é‡å­¦[M].æ­¦æ±‰ï¼šæ­¦æ±‰å¤§å­¦å‡ºç‰ˆç¤¾ï¼Œ2016.5
<span id="reference1"></span></p>
]]></content>
      <categories>
        <category>è®¡ç®—æœºè§†è§‰</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>åæ–¹äº¤ä¼š</tag>
        <tag>æ‘„å½±æµ‹é‡</tag>
      </tags>
  </entry>
  <entry>
    <title>ä¸»æˆåˆ†åˆ†æ-PCA</title>
    <url>/2025/01/18/%E4%B8%BB%E6%88%90%E5%88%86%E5%88%86%E6%9E%90-PCA/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><span id="more"></span>
<h2 id="æ¦‚è¦">1. æ¦‚è¦</h2>
<p>ä¸»æˆåˆ†åˆ†æ (principal component analysis,PCA)</p>
<ul>
<li>æ— ç›‘ç£å­¦ä¹ æ–¹æ³•</li>
<li><strong>çº¿æ€§</strong>é™ç»´</li>
<li>æ•°æ®å‹ç¼©</li>
</ul>
<h2 id="æ¨å¯¼">2. æ¨å¯¼</h2>
<h3 id="ç¬¦å·è¯´æ˜">2.1. ç¬¦å·è¯´æ˜</h3>
<ul>
<li>æ•°æ® <span class="math inline">\(X\in \mathbb{R}^{n\times
p}\)</span>ï¼Œ<span class="math inline">\(n\)</span> æ˜¯æ ·æœ¬ä¸ªæ•°ï¼Œ<span
class="math inline">\(p\)</span> æ˜¯ç‰¹å¾ä¸ªæ•°
<ul>
<li>æ•°æ®éœ€è¦<strong>é¢„å¤„ç†</strong>ï¼š<strong>å»ä¸­å¿ƒåŒ–</strong>ï¼Œæ¯ä¸ªæ ·æœ¬å‡å»å‡å€¼å³å¯</li>
</ul></li>
<li>æŠ•å½±çŸ©é˜µ <span class="math inline">\(W \in \mathbb{R}^{p\times
k}\)</span>ï¼Œ<span class="math inline">\(p\)</span> åŒä¸Šï¼Œ<span
class="math inline">\(k\)</span> æ˜¯é™ç»´åç‰¹å¾ä¸ªæ•°</li>
<li>çŸ©é˜µ <span class="math inline">\(A\)</span> çš„ <span
class="math inline">\(F\)</span> èŒƒæ•° <span
class="math display">\[\|A\|_{F} =
\sqrt{\sum_{i}\sum_j|a_{ij}|^2}=\sqrt{\mathrm{Tr}(A^TA)}\nonumber\]</span></li>
</ul>
<h3 id="æœ€å°é‡æ„è¯¯å·®">2.2. æœ€å°é‡æ„è¯¯å·®</h3>
<p>é‡æŠ•å½±çš„æ•°æ®å’ŒåŸå§‹æ•°æ®ä¹‹é—´çš„è¯¯å·®æœ€å°ï¼Œä»è€Œä¸¢å¤±çš„ä¿¡æ¯å°‘ã€‚<br />
æ•°å­¦æè¿°ï¼š <span class="math display">\[
\begin{array}{c}
\underset{W}{\min }\ \|X-XWW^T\|_{F}^{2}\\
\text{s.t.}\quad W^TW=I_k
\end{array}
\]</span></p>
<h3 id="æœ€å¤§å¯åˆ†æ€§">2.3. æœ€å¤§å¯åˆ†æ€§</h3>
<p>æ•°æ®ç»è¿‡æŠ•å½±çŸ©é˜µå˜æ¢åˆ°è¶…å¹³é¢ä¸Šä¹‹åçš„æ•°æ®å°½å¯èƒ½åˆ†å¼€ï¼Œå³æŠ•å½±åæ•°æ®çš„æ–¹å·®å°½å¯èƒ½çš„å¤§ï¼Œä»è€Œä¿ç•™çš„ä¿¡æ¯å¤šã€‚<br />
æ•°å­¦æè¿°ï¼š <span class="math display">\[
\begin{array}{c}
\underset{W}{\max }\ \|XW\|_{F}^{2}\\
\text{s.t.}\quad W^TW=I_k
\end{array}
\]</span></p>
<h3 id="æœ€å°é‡æ„å’Œæœ€å¤§å¯åˆ†ç­‰ä»·">2.4. æœ€å°é‡æ„å’Œæœ€å¤§å¯åˆ†ç­‰ä»·</h3>
<p><span class="math display">\[\label{ä¼˜åŒ–}
\begin{aligned}
\underset{W}{\min }\|X-XWW^T\|_{F}^{2}
&amp;=\underset{W}{\min } \
\mathrm{Tr}\left(\left(X-XWW^T\right)^T\left(X-XWW^T\right)\right)\\
&amp;={\small \underset{W}{\min } \
\mathrm{Tr}\left(X^TX-X^TXWW^T-WW^TX^TX+WW^TX^TXWW^T \right)}\\
&amp;=\underset{W}{\min } \ \mathrm{Tr}\left(-2W^TX^TXW
+W^TX^TXWW^TW\right)\\
&amp;=\underset{W}{\min } \ \mathrm{Tr}\left(-W^TX^TXW\right)\\
&amp;=\underset{W}{\max } \ \mathrm{Tr}\left(W^TX^TXW\right)\\
&amp;=\underset{W}{\max } \
\mathrm{Tr}\left(\left(XW\right)^TXW\right)\\
&amp;=\underset{W}{\max } \|XW\|_{F}^{2}
\end{aligned}
\]</span></p>
<h2 id="æ±‚è§£">3. æ±‚è§£</h2>
<p>ç”± <span class="math inline">\(\eqref{ä¼˜åŒ–}\)</span> å¯çŸ¥ï¼Œç›®æ ‡å‡½æ•°ä¸º
<span class="math display">\[\label{ç›®æ ‡å‡½æ•°}
\begin{array}{c}
\underset{W}{\min }\ -\mathrm{Tr}\left(W^TX^TXW\right)=\underset{W}{\max
} \ \mathrm{Tr}\left(W^TX^TXW\right) \\
\text{s.t.}\quad W^TW=I_k
\end{array}
\]</span></p>
<p>å¯ä»¥ç”¨<strong>æ‹‰æ ¼æœ—æ—¥ä¹˜å­æ³•</strong>æ±‚è§£å¸¦çº¦æŸçš„ä¼˜åŒ–é—®é¢˜ã€‚</p>
<p>æ‹‰æ ¼æœ—æ—¥å‡½æ•° <span class="math display">\[
\mathcal{L}\left(W,\Lambda\right)=-\mathrm{Tr}\left(W^TX^TXW\right)+\mathrm{Tr}\left(\Lambda^T
\left(W^TW-I_k\right)\right)
\]</span> å…¶ä¸­ <span class="math inline">\(\Lambda =
diag(\lambda_1,\lambda_2,\dots,\lambda_{k})\in \mathbb{R}^{k\times
k}\)</span></p>
<p>æ±‚è§£ <span class="math display">\[
\begin{aligned}
    \frac{\partial \mathcal{L}}{\partial W}&amp;= -2X^TXW +
2W\Lambda=0\\
    \frac{\partial \mathcal{L}}{\partial \Lambda}&amp;=W^TW-I_k=0 \\
\end{aligned}
\]</span></p>
<p>åˆ™æœ‰ <span class="math display">\[\label{æ˜¾å¼è§£}
X^TXW=W\Lambda
\]</span></p>
<p>å°† <span class="math inline">\(W,\Lambda\)</span> å±•å¼€ <span
class="math display">\[
\begin{aligned}\nonumber
W &amp;=
[\boldsymbol{w}_1,\boldsymbol{w}_2,\dots,\boldsymbol{w}_k]\in\mathbb{R}^{p\times
k} ,\quad \boldsymbol{w}_i\in\mathbb{R}^{p\times 1}\\
\Lambda &amp;= diag(\lambda_1,\lambda_2,\dots,\lambda_{k})\in
\mathbb{R}^{k\times k},\quad \lambda_i \in \mathbb{R}
\end{aligned}
\]</span> æ³¨æ„åˆ° <span class="math display">\[\label{çº¦æŸ}
\boldsymbol{w}_i^T\boldsymbol{w}_i=1 ,\quad
\boldsymbol{w}_i^T\boldsymbol{w}_j=0\ \left(i\neq j\right)
\]</span> åˆ™æœ‰ <span class="math display">\[\label{ç‰¹å¾è§£}
X^T X \boldsymbol{w}_i = \lambda_i \boldsymbol{w}_i \ ,\quad
i=1,2,\dots,k
\]</span> æ˜¾ç„¶ï¼Œæ­¤å¼ä¸ºçŸ©é˜µç‰¹å¾å€¼å’Œç‰¹å¾å‘é‡çš„å®šä¹‰å¼ï¼Œå…¶ä¸­ <span
class="math inline">\(\lambda_i,w_i\)</span> åˆ†åˆ«è¡¨ç¤ºçŸ©é˜µ <span
class="math inline">\(X^TX\)</span> çš„ç‰¹å¾å€¼å’Œå•ä½ç‰¹å¾å‘é‡ã€‚</p>
<p>å› ä¸º <span class="math inline">\(X^TX\)</span>
ä¸ºå®å¯¹ç§°é˜µï¼Œè€Œå®å¯¹ç§°é˜µä¸åŒç‰¹å¾å€¼å¯¹åº”çš„ç‰¹å¾å‘é‡ä¹‹é—´æ˜¯ç›¸äº’æ­£äº¤çš„ï¼ŒåŒä¸€ç‰¹å¾å€¼çš„ä¸åŒç‰¹å¾å‘é‡å¯ä»¥é€šè¿‡æ–½å¯†ç‰¹æ­£äº¤åŒ–ä½¿å…¶æ­£äº¤ï¼Œæ‰€ä»¥é€šè¿‡
<span class="math inline">\(\eqref{ç‰¹å¾è§£}\)</span> æ±‚çš„ <span
class="math inline">\(\boldsymbol{w}_i\)</span> æ»¡è¶³çº¦æŸ <span
class="math inline">\(\eqref{çº¦æŸ}\)</span>ã€‚<br />
æ ¹æ®æ‹‰æ ¼æœ—æ—¥ä¹˜å­æ³•çš„åŸç†å¯çŸ¥ï¼Œæ­¤æ—¶æ±‚å¾—çš„ç»“æœä»…æ˜¯æœ€ä¼˜è§£çš„å¿…è¦æ¡ä»¶ï¼Œè€Œä¸”
<span class="math inline">\(X^TX\)</span> æœ‰ <span
class="math inline">\(p\)</span>
ä¸ªç›¸äº’æ­£äº¤çš„å•ä½ç‰¹å¾å‘é‡ï¼Œæ‰€ä»¥è¿˜éœ€è¦ä»è¿™ <span
class="math inline">\(p\)</span> ä¸ªç‰¹å¾å‘é‡é‡Œæ‰¾å‡º <span
class="math inline">\(k\)</span>
ä¸ªèƒ½ä½¿å¾—ç›®æ ‡å‡½æ•°è¾¾åˆ°æœ€ä¼˜å€¼çš„ç‰¹å¾å‘é‡ä½œä¸ºæœ€ä¼˜è§£ã€‚</p>
<p>å°† <span class="math inline">\(\eqref{æ˜¾å¼è§£}\)</span> å¸¦å…¥ç›®æ ‡å‡½æ•°
<span class="math inline">\(\eqref{ç›®æ ‡å‡½æ•°}\)</span> <span
class="math display">\[
\begin{aligned}
\underset{W}{\max }\ \mathrm{Tr}\left(W^TX^TXW\right)
&amp;=\underset{W}{\max }\ \mathrm{Tr}\left(W^T W\Lambda\right)\\
&amp;=\underset{W}{\max }\ \mathrm{Tr}\left(\Lambda\right)\\
&amp;=\underset{W}{\max }\ \sum_{i=1}^{k}\lambda_i
\end{aligned}
\]</span> æ˜¾ç„¶æ­¤æ—¶åªéœ€è¦ä»¤ <span
class="math inline">\(\lambda_1,\lambda_2,\dots,\lambda_k\)</span> å’Œ
<span
class="math inline">\(\boldsymbol{w}_1,\boldsymbol{w}_2,\dots,\boldsymbol{w}_k\)</span>
åˆ†åˆ«ä¸ºçŸ©é˜µ <span class="math inline">\(X^TX\)</span> çš„å‰ <span
class="math inline">\(k\)</span>
å¤§ç‰¹å¾å€¼åŠå…¶å¯¹åº”çš„ç‰¹å¾å‘é‡å³å¯ä½¿ç›®æ ‡å‡½æ•°è¾¾åˆ°æœ€å¤§å€¼ã€‚</p>
<h2 id="ç®—æ³•æµç¨‹">4. ç®—æ³•æµç¨‹</h2>
<p><span class="math display">\[
\begin{array}{r l}
\textbf{PCA ç®—æ³•}\\
\hline
\textbf{è¾“å…¥ï¼š}
&amp;\text{1. æ ·æœ¬æ•°æ® } X\in\mathbb{R}^{n\times p},n \text{
æ˜¯æ ·æœ¬ä¸ªæ•°},p \text{ æ˜¯æ ·æœ¬ç‰¹å¾ä¸ªæ•°ï¼›}\\
&amp;\text{2. é™ç»´ç»´åº¦ }k \\
\textbf{è¿‡ç¨‹ï¼š}
&amp;\text{1. æ•°æ®é¢„å¤„ç†ï¼Œæ‰€æœ‰æ ·æœ¬å»ä¸­å¿ƒåŒ–ï¼›}\\
&amp;\text{2. è®¡ç®— }X^T X \text{ï¼Œå¹¶å¯¹å…¶ç‰¹å¾åˆ†è§£ï¼›}\\
&amp;\text{3. å–å‰ } k \text{ å¤§ä¸ªç‰¹å¾å€¼æ‰€å¯¹åº”çš„ç‰¹å¾å‘é‡ }
w_1,w_2,\dots,w_k \text{ ï¼›}\\
\textbf{è¾“å‡ºï¼š}
&amp;\text{æŠ•å½±çŸ©é˜µ } W=[w_1,w_2,\dots,w_k] \in \mathbb{R}^{p\times k}\\
\hline
\end{array}
\]</span></p>
<p>è¿‡ç¨‹ 2ã€3 ä¹Ÿå¯ä»¥ä½¿ç”¨ SVD åˆ†è§£ï¼Œå–å‰ <span
class="math inline">\(k\)</span> ä¸ªå³å¥‡å¼‚å‘é‡å³å¯ã€‚</p>
<h2 id="æ–¹å·®è´¡çŒ®ç‡">5. æ–¹å·®è´¡çŒ®ç‡</h2>
<p>ç¬¬ <span class="math inline">\(i\)</span> ä¸ªä¸»æˆåˆ†çš„æ–¹å·®è´¡çŒ®ç‡ <span
class="math display">\[
\eta_i = \frac{\lambda_i}{\sum_{j=1}^{p}\lambda_j}
\]</span></p>
<p>å‰ <span class="math inline">\(k\)</span> ä¸ªä¸»æˆåˆ†çš„æ–¹å·®è´¡çŒ®ç‡ <span
class="math display">\[
\eta = \frac{\sum_{i=1}^{k}\lambda_i}{\sum_{j=1}^{p}\lambda_j}
\]</span></p>
]]></content>
      <categories>
        <category>æœºå™¨å­¦ä¹ </category>
        <category>PCA</category>
      </categories>
      <tags>
        <tag>PCA</tag>
        <tag>æœºå™¨å­¦ä¹ </tag>
        <tag>é™ç»´</tag>
      </tags>
  </entry>
  <entry>
    <title>æ”¯æŒå‘é‡æœº-SVM</title>
    <url>/2025/01/18/%E6%94%AF%E6%8C%81%E5%90%91%E9%87%8F%E6%9C%BA-SVM/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><span id="more"></span>
<h2 id="æ¦‚è¦">1. æ¦‚è¦</h2>
<p>æ”¯æŒå‘é‡æœº (support vector machine, SVM)</p>
<ul>
<li>æœ‰ç›‘ç£å­¦ä¹ </li>
<li><strong>çº¿æ€§</strong>åˆ†ç±»å™¨</li>
<li>åˆ©ç”¨<strong>æ ¸æŠ€å·§</strong>è§£å†³<strong>éçº¿æ€§</strong>åˆ†ç±»é—®é¢˜</li>
</ul>
<p><strong>ä¸ºæ–¹ä¾¿å¯è§†åŒ–ï¼Œä»¥äºŒç»´äºŒåˆ†ç±»é—®é¢˜ä¸ºä¾‹å­å¯¹ SVM
è¿›è¡Œè¯´æ˜ã€‚</strong></p>
<strong>ç›®æ ‡</strong>ï¼š<span
id="SVM_purpose"></span>æ”¯æŒå‘é‡æœºæƒ³è¦æ±‚è§£çš„æ˜¯ç¦»æ­£è´Ÿæ ·æœ¬éƒ½å°½å¯èƒ½è¿œä¸”åˆšå¥½ä½äºâ€œæ­£ä¸­é—´â€çš„åˆ’åˆ†è¶…å¹³é¢ï¼Œå› ä¸ºè¿™æ ·çš„è¶…å¹³é¢ç†è®ºä¸Šæ³›åŒ–æ€§èƒ½æ›´å¥½ã€‚<br />
<span id="fig1"></span>
<figure>
<img src="SVMç¤ºæ„å›¾.svg" alt="SVMç¤ºæ„å›¾" width="50%" height="50%" loading="lazy"/>
<figcaption>
å›¾1. SVMç¤ºæ„å›¾ï¼Œè“è‰²ä¸ºè´Ÿä¾‹ï¼Œçº¢è‰²ä¸ºæ­£ä¾‹ï¼Œ<span
class="math inline">\(H_0\)</span> ä¸ºæ‰€æ±‚
</figcaption>
</figure>
<h2 id="ç¬¦å·è¯´æ˜ä¸ä¸€äº›å®šä¹‰">2. ç¬¦å·è¯´æ˜ä¸ä¸€äº›å®šä¹‰</h2>
<h3 id="ç¬¦å·è¯´æ˜">2.1. ç¬¦å·è¯´æ˜</h3>
<ul>
<li>æ•°æ®é›† <span
class="math inline">\(T=\{(x_1,y_1),(x_2,y_2),\dots,(x_n,y_n)\}\)</span>
<ul>
<li><span class="math inline">\(\boldsymbol{x}_i \in \mathbb{R}^d,\quad
y_i \in \{+1,-1\},\quad i=1,2,\dots,n\)</span></li>
<li><span class="math inline">\(y_i=1\)</span> æ—¶ <span
class="math inline">\(\boldsymbol{x}_i\)</span> ä¸ºæ­£ä¾‹ï¼Œ<span
class="math inline">\(y_i=-1\)</span> æ—¶ <span
class="math inline">\(\boldsymbol{x}_i\)</span> ä¸ºè´Ÿä¾‹</li>
<li><strong>å‡è®¾æ•°æ®æ˜¯çº¿æ€§å¯åˆ†çš„</strong>ï¼Œå³å­˜åœ¨ä¸€ä¸ªè¶…å¹³é¢èƒ½å¤Ÿå°†ä¸åŒç±»çš„æ ·æœ¬å®Œå…¨åˆ†å¼€ã€‚</li>
</ul></li>
<li>è¶…å¹³é¢ <span
class="math inline">\(\boldsymbol{w}^\mathrm{T}\boldsymbol{x}+b=0\)</span>ï¼Œç®€è®°ä¸º<span
class="math inline">\((\boldsymbol{w},b)\)</span>
<ul>
<li><strong>ç¼©æ”¾ä¸å˜æ€§</strong>ï¼š<span
class="math inline">\(\boldsymbol{w}^\mathrm{T}\boldsymbol{x}+b=0\)</span>
ä¸ <span
class="math inline">\((k\boldsymbol{w})^\mathrm{T}\boldsymbol{x}+kb=0\
(k\gt 0)\)</span> è¡¨ç¤ºçš„æ˜¯åŒä¸€ä¸ªè¶…å¹³é¢</li>
</ul></li>
</ul>
<details class="note info"><summary><p>å…³äº<strong>ç¼©æ”¾ä¸å˜æ€§</strong></p>
</summary>
<p>è™½ç„¶ <span class="math inline">\(k&lt;0\)</span>
åœ¨æ•°å­¦ä¸Šä¹Ÿæ»¡è¶³ç¼©æ”¾ä¸å˜æ€§ï¼Œä½†åœ¨ SVM çš„æ¨å¯¼å’Œå®ç°ä¸­ï¼Œé€šå¸¸é™åˆ¶ <span
class="math inline">\(k&gt;0\)</span>
ä»¥é¿å…åˆ†ç±»æ–¹å‘çš„åè½¬å’Œä¼˜åŒ–é—®é¢˜çš„å¤æ‚æ€§ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š</p>
<p>å‡è®¾åŸå§‹è¶…å¹³é¢å‚æ•°ä¸º <span class="math inline">\(\boldsymbol{w} = (1,
0)\)</span>ï¼Œ<span class="math inline">\(b =
0\)</span>ï¼Œåˆ†ç±»è§„åˆ™ä¸ºï¼š<br />
å¦‚æœ <span class="math inline">\(x_1 &gt; 0\)</span>ï¼Œåˆ™é¢„æµ‹ä¸º <span
class="math inline">\(y = +1\)</span>ï¼›<br />
å¦‚æœ <span class="math inline">\(x_1 &lt; 0\)</span>ï¼Œåˆ™é¢„æµ‹ä¸º <span
class="math inline">\(y = -1\)</span>ã€‚</p>
<p><strong>æƒ…å†µ 1ï¼š<span class="math inline">\(k &gt; 0\)</span>ï¼ˆä¾‹å¦‚
<span class="math inline">\(k = 2\)</span>ï¼‰</strong><br />
ç¼©æ”¾åçš„è¶…å¹³é¢å‚æ•°ä¸º <span class="math inline">\(\boldsymbol{w}&#39; =
(2, 0)\)</span>ï¼Œ<span class="math inline">\(b&#39; =
0\)</span>ï¼Œåˆ†ç±»è§„åˆ™ä¸å˜ï¼š<br />
å¦‚æœ <span class="math inline">\(2x_1 &gt; 0 \quad \Rightarrow \quad x_1
&gt; 0\)</span>ï¼Œåˆ™é¢„æµ‹ä¸º <span class="math inline">\(y =
+1\)</span>;<br />
å¦‚æœ <span class="math inline">\(2x_1 &lt; 0 \quad \Rightarrow \quad x_1
&lt; 0\)</span>ï¼Œåˆ™é¢„æµ‹ä¸º <span class="math inline">\(y =
-1\)</span>ã€‚</p>
<p><strong>æƒ…å†µ 2ï¼š<span class="math inline">\(k &lt; 0\)</span>ï¼ˆä¾‹å¦‚
<span class="math inline">\(k = -1\)</span>ï¼‰</strong><br />
ç¼©æ”¾åçš„è¶…å¹³é¢å‚æ•°ä¸º <span class="math inline">\(\boldsymbol{w}&#39; =
(-1, 0)\)</span>ï¼Œ<span class="math inline">\(b&#39; =
0\)</span>ï¼Œåˆ†ç±»è§„åˆ™åè½¬ï¼š<br />
å¦‚æœ <span class="math inline">\(-x_1 &gt; 0 \quad \Rightarrow \quad x_1
&lt; 0\)</span>ï¼Œåˆ™é¢„æµ‹ä¸º <span class="math inline">\(y =
+1\)</span>ï¼›<br />
å¦‚æœ <span class="math inline">\(-x_1 &lt; 0 \quad \Rightarrow \quad x_1
&gt; 0\)</span>ï¼Œåˆ™é¢„æµ‹ä¸º <span class="math inline">\(y =
-1\)</span>ã€‚</p>

</details>
<h3 id="å®šä¹‰">2.2. å®šä¹‰</h3>
<h4 id="æ”¯æŒå‘é‡">2.2.1. æ”¯æŒå‘é‡</h4>
<p><a href="#fig1">å›¾1</a> ä¸­ï¼Œ<span
class="math inline">\(H_1,H_{-1}\)</span>
ç»è¿‡çš„å‘é‡ï¼ˆä¸€ä¸ªè“è‰²ï¼Œä¸¤ä¸ªçº¢è‰²ï¼‰å³ä¸ºæ”¯æŒå‘é‡ã€‚<br />
æ”¯æŒå‘é‡ <span class="math inline">\(\boldsymbol{x}_*\)</span>æ»¡è¶³ <span
class="math display">\[\label{SV}
y_* \left(\boldsymbol{w}^\mathrm{T}\boldsymbol{x}_*+b\right) = 1
\]</span></p>
<hr />
<p>æ ¹æ® <a href="#SVM_purpose">SVM çš„ç›®æ ‡</a>ï¼Œè®°è¶…å¹³é¢ <span
class="math inline">\(H_1\)</span> ä¸ <span
class="math inline">\(H_{-1}\)</span> ä¹‹é—´çš„è·ç¦»ä¸º <span
class="math inline">\(d\)</span>ï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“æƒ³åˆ°éœ€è¦æ‰¾åˆ°åˆé€‚çš„ <span
class="math inline">\(H_1\)</span> ä¸ <span
class="math inline">\(H_{-1}\)</span> ä½¿å¾— <span
class="math inline">\(d\)</span> æœ€å¤§ï¼Œæ­¤æ—¶è¶…å¹³é¢ <span
class="math inline">\(H_1\)</span> ä¸ <span
class="math inline">\(H_{-1}\)</span> æ­£ä¸­é—´çš„è¶…å¹³é¢ <span
class="math inline">\(H_0\)</span> å³ä¸ºæˆ‘ä»¬æ‰€æ±‚ã€‚<br />
ä¸ºæ­¤æˆ‘ä»¬éœ€è¦å®šä¹‰å…³äºè·ç¦» <span class="math inline">\(d\)</span>
çš„æè¿°ï¼Œä¹Ÿå°±æ˜¯<strong>é—´éš” (margin)</strong>ã€‚</p>
<p><span id="I_think"></span>ä¸‹é¢æ‰€è¯´çš„è¶…å¹³é¢ <span
class="math inline">\((\boldsymbol{w},b)\)</span>
åº”è¯¥è®¤ä¸ºæ˜¯å·²ç»èƒ½å¤Ÿå°†æ‰€æœ‰æ ·æœ¬æ­£ç¡®åˆ’åˆ†çš„äº†ã€‚<small><em>å­˜ç–‘</em></small></p>
<h4 id="å‡½æ•°é—´éš”">2.2.2. å‡½æ•°é—´éš”</h4>
<p>å¯¹äºç»™å®šçš„è®­ç»ƒæ•°æ®é›† <span class="math inline">\(T\)</span> å’Œè¶…å¹³é¢
<span class="math inline">\((\boldsymbol{w},b)\)</span> ï¼Œå®šä¹‰è¶…å¹³é¢
<span class="math inline">\((\boldsymbol{w},b)\)</span> å…³äºæ ·æœ¬ç‚¹ <span
class="math inline">\((\boldsymbol{x}_i,y_i)\)</span> çš„å‡½æ•°é—´éš”ä¸º <span
class="math display">\[\hat{\gamma}_i = y_i
\left(\boldsymbol{w}^\mathrm{T}\boldsymbol{x}_i + b\right)\]</span></p>
<p>å®šä¹‰è¶…å¹³é¢ <span class="math inline">\((\boldsymbol{w},b)\)</span>
å…³äºè®­ç»ƒæ•°æ®é›† <span class="math inline">\(T\)</span> çš„å‡½æ•°é—´éš”ä¸ºè¶…å¹³é¢
<span class="math inline">\((\boldsymbol{w},b)\)</span> å…³äº <span
class="math inline">\(T\)</span> ä¸­æ‰€æœ‰æ ·æœ¬ç‚¹ <span
class="math inline">\((\boldsymbol{x}_i,y_i)\)</span>
çš„å‡½æ•°é—´éš”ä¹‹æœ€å°å€¼ï¼Œå³ <span class="math display">\[\hat{\gamma} =
\min_{i = 1,2,\dots,n}
\hat{\gamma}_i=y_*\left(\boldsymbol{w}^\mathrm{T}\boldsymbol{x}_*+b\right)\]</span>
å…¶ä¸­ <span class="math inline">\(\boldsymbol{x}_*\)</span>
ä¸ºæ”¯æŒå‘é‡ã€‚</p>
<p>å‡½æ•°é—´éš”å¯ä»¥è¡¨ç¤ºåˆ†ç±»çš„æ­£ç¡®æ€§ä»¥åŠç¡®ä¿¡åº¦ã€‚<br />
æ³¨æ„åˆ°å‡½æ•°é—´éš”å­˜åœ¨ä¸€äº›é—®é¢˜ï¼šå½“ <span
class="math inline">\(\boldsymbol{w},b\)</span>
æˆæ¯”ä¾‹çš„æ”¹å˜æ—¶ï¼Œè™½ç„¶è¶…å¹³é¢æ²¡æœ‰æ”¹å˜ï¼Œä½†å‡½æ•°é—´éš”ä¹Ÿä¼šä»¥åŒæ ·çš„æ¯”ä¾‹å˜åŒ–ï¼Œå› æ­¤ä¸é€‚åˆç”¨äºä¼˜åŒ–ã€‚</p>
<h4 id="å‡ ä½•é—´éš”">2.2.3. å‡ ä½•é—´éš”</h4>
<p>å¯¹äºç»™å®šçš„è®­ç»ƒæ•°æ®é›† <span class="math inline">\(T\)</span> å’Œè¶…å¹³é¢
<span class="math inline">\((\boldsymbol{w},b)\)</span>ï¼Œå®šä¹‰è¶…å¹³é¢
<span class="math inline">\((\boldsymbol{w},b)\)</span> å…³äºæ ·æœ¬ç‚¹ <span
class="math inline">\((\boldsymbol{x}_i,y_i)\)</span> çš„å‡ ä½•é—´éš”ä¸º <span
class="math display">\[\gamma_i =
\frac{y_i\left(\boldsymbol{w}^\mathrm{T}\boldsymbol{x}_i +
b\right)}{\|\boldsymbol{w}\|}\]</span></p>
<p>å®šä¹‰è¶…å¹³é¢ <span class="math inline">\((\boldsymbol{w},b)\)</span>
å…³äºè®­ç»ƒæ•°æ®é›† <span class="math inline">\(T\)</span> çš„å‡ ä½•é—´éš”ä¸ºè¶…å¹³é¢
<span class="math inline">\((\boldsymbol{w},b)\)</span> å…³äº <span
class="math inline">\(T\)</span> ä¸­æ‰€æœ‰æ ·æœ¬ç‚¹ <span
class="math inline">\((\boldsymbol{x}_i,y_i)\)</span>
çš„å‡ ä½•é—´éš”ä¹‹æœ€å°å€¼ï¼Œå³ <span class="math display">\[\gamma = \min_{i =
1,2,\dots,n}
\gamma_i=\frac{y_*\left(\boldsymbol{w}^\mathrm{T}\boldsymbol{x}_* +
b\right)}{\|\boldsymbol{w}\|}\]</span> å…¶ä¸­ <span
class="math inline">\(\boldsymbol{x}_*\)</span> ä¸ºæ”¯æŒå‘é‡ã€‚</p>
<p>è¶…å¹³é¢å…³äºæ ·æœ¬ç‚¹çš„å‡ ä½•é—´éš”æŒ‡çš„å°±æ˜¯ç‚¹åˆ°è¶…å¹³é¢å¸¦ç¬¦å·çš„è·ç¦»ï¼Œå½“æ ·æœ¬ç‚¹è¢«è¶…å¹³é¢åˆ†ç±»æ­£ç¡®çš„æ—¶å€™å°±æ˜¯å®é™…çš„è·ç¦»äº†ã€‚</p>
<p>å¦å¤–ï¼Œå‡ ä½•é—´éš”å¼¥è¡¥äº†å‡½æ•°é—´éš”å­˜åœ¨çš„ç¼ºé™·ï¼Œå³ä¾¿ <span
class="math inline">\(\boldsymbol{w},b\)</span> æˆæ¯”ä¾‹çš„æ”¹å˜ï¼Œä½†å› ä¸ºæœ‰äº†
<span class="math inline">\(\|\boldsymbol{w}\|\)</span>
è¿™ä¸ªåˆ†æ¯é¡¹ï¼Œä½¿å¾—å‡ ä½•é—´éš”ä¸å˜ã€‚<br />
ä¹Ÿå°±æ˜¯è¯´å‡ ä½•é—´éš”åªä¸è¶…å¹³é¢çš„ä½ç½®æœ‰å…³ï¼Œæ¯”å‡½æ•°é—´éš”æ›´é€‚åˆä½œä¸ºä¸€ä¸ªå˜é‡è¿›è¡Œæœ€ä¼˜åŒ–ã€‚</p>
<p>æ ¹æ®å‡½æ•°é—´éš”å’Œå‡ ä½•é—´éš”çš„å®šä¹‰ï¼Œæˆ‘ä»¬å¯ä»¥çŸ¥é“äºŒè€…å­˜åœ¨å¦‚ä¸‹å…³ç³» <span
class="math display">\[
\begin{align}
\label{é—´éš”å…³ç³»1} \gamma_i = \frac{\hat{\gamma}_i}{\|\boldsymbol{w}\|}
\\
\label{é—´éš”å…³ç³»2} \gamma = \frac{\hat{\gamma}}{\|\boldsymbol{w}\|}
\end{align}
\]</span> å½“ <span class="math inline">\(\|\boldsymbol{w}\|=1\)</span>
æ—¶ï¼Œå‡½æ•°é—´éš”å’Œå‡ ä½•é—´éš”äºŒè€…ç›¸ç­‰ã€‚</p>
<h2 id="æ¨å¯¼">3. æ¨å¯¼</h2>
<h3 id="ç›®æ ‡å‡½æ•°">3.1. ç›®æ ‡å‡½æ•°</h3>
<p>ç”±å‰æ–‡å¯çŸ¥ï¼Œæˆ‘ä»¬éœ€è¦æœ€å¤§åŒ–å‡ ä½•é—´éš”ï¼Œåˆç§°ä¸ºç¡¬é—´éš”æœ€å¤§åŒ–ã€‚</p>
<p>é—´éš”æœ€å¤§åŒ–çš„ç›´è§‚è§£é‡Šæ˜¯ï¼šå¯¹è®­ç»ƒæ•°æ®é›†æ‰¾åˆ°å‡ ä½•é—´éš”æœ€å¤§çš„è¶…å¹³é¢æ„å‘³ç€ä»¥å……åˆ†å¤§çš„ç¡®ä¿¡åº¦å¯¹è®­ç»ƒæ•°æ®è¿›è¡Œåˆ†ç±»ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸ä»…å°†æ­£è´Ÿå®ä¾‹ç‚¹åˆ†å¼€ï¼Œè€Œä¸”å¯¹æœ€éš¾åˆ†çš„å®ä¾‹ç‚¹ï¼ˆç¦»è¶…å¹³é¢æœ€è¿‘çš„ç‚¹ï¼‰ä¹Ÿæœ‰è¶³å¤Ÿå¤§çš„ç¡®ä¿¡åº¦å°†å®ƒä»¬åˆ†å¼€ã€‚è¿™æ ·çš„è¶…å¹³é¢åº”è¯¥å¯¹æœªçŸ¥çš„æ–°å®ä¾‹æœ‰å¾ˆå¥½çš„åˆ†ç±»é¢„æµ‹èƒ½åŠ›ã€‚</p>
<p>å› æ­¤æˆ‘ä»¬è€ƒè™‘å¦‚ä½•æ±‚å¾—ä¸€ä¸ªå‡ ä½•é—´éš”æœ€å¤§çš„åˆ†ç¦»è¶…å¹³é¢ï¼Œå³æœ€å¤§é—´éš”åˆ†ç¦»è¶…å¹³é¢ã€‚ç”¨æ•°å­¦è¯­è¨€å¯ä»¥è¡¨ç¤ºä¸ºå¦‚ä¸‹çš„ä¼˜åŒ–é—®é¢˜
<span class="math display">\[
\begin{equation}\label{opt}
\begin{aligned}
\max_{\boldsymbol{w},b} \quad&amp;\gamma = \max_{\boldsymbol{w},b} \min
\gamma_i \ ,\ i=1,2,\dots,n\\
\text{s.t.} \quad&amp; y_i
\frac{\boldsymbol{w}^\mathrm{T}\boldsymbol{x}_i + b}{\|\boldsymbol{w}\|}
\ge \gamma,\quad i=1,2,\dots,n
\end{aligned}
\end{equation}
\]</span></p>
<p>å³æœ€å¤§åŒ–æœ€å°å‡ ä½•é—´éš”ï¼Œæˆ‘ä»¬å¸Œæœ›æœ€å¤§åŒ–è¶…å¹³é¢ <span
class="math inline">\((\boldsymbol{w},b)\)</span>
å…³äºè®­ç»ƒæ•°æ®é›†çš„å‡ ä½•é—´éš” <span
class="math inline">\(\gamma\)</span>ï¼›çº¦æŸæ¡ä»¶è¡¨æ˜ï¼Œè¶…å¹³é¢ <span
class="math inline">\((\boldsymbol{w},b)\)</span>
å…³äºæ¯ä¸ªè®­ç»ƒæ ·æœ¬çš„ç‚¹çš„å‡ ä½•é—´éš”è‡³å°‘ä¸º <span
class="math inline">\(\gamma\)</span>ã€‚</p>
<p>è€ƒè™‘å‡½æ•°é—´éš”å’Œå‡ ä½•é—´éš”çš„å…³ç³» <span
class="math inline">\(\eqref{é—´éš”å…³ç³»2}\)</span>ï¼Œä»£å…¥ <span
class="math inline">\(\eqref{opt}\)</span> æœ‰ <span
class="math display">\[
\begin{align}
\max_{\boldsymbol{w},b} \quad&amp;
\frac{\hat{\gamma}}{\|\boldsymbol{w}\|}\\
\text{s.t.} \quad&amp; y_i
\left(\boldsymbol{w}^\mathrm{T}\boldsymbol{x}_i + b\right) \ge
\hat{\gamma},\quad i=1,2,\dots,n
\end{align}
\]</span> æ³¨æ„åˆ°ï¼Œå‡½æ•°é—´éš” <span
class="math inline">\(\hat{\gamma}\)</span>
çš„å–å€¼å¹¶ä¸å½±å“æœ€ä¼˜åŒ–é—®é¢˜çš„è§£ã€‚ä¾‹å¦‚ <span
class="math inline">\(\boldsymbol{w},b\)</span> å˜ä¸º <span
class="math inline">\(\lambda\boldsymbol{w},\lambda b\ (\lambda \gt
0)\)</span>ï¼Œåˆ™æœ‰ <span class="math display">\[
\begin{equation}
\begin{aligned}
&amp;\frac{\hat{\gamma}}{\|\boldsymbol{w}\|}\rightarrow\frac{\lambda
\hat{\gamma}}{\lambda \|\boldsymbol{w}\|}\\
&amp;y_i \left(\boldsymbol{w}^\mathrm{T}\boldsymbol{x}_i + b\right) \ge
\hat{\gamma} \rightarrow y_i
\left(\left(\lambda\boldsymbol{w}\right)^\mathrm{T}\boldsymbol{x}_i +
\lambda b\right)=y_i \left(\boldsymbol{w}^\mathrm{T}\boldsymbol{x}_i +
b\right) \ge \lambda\hat{\gamma}
\end{aligned}
\end{equation}
\]</span></p>
<p>æ ¹æ®<strong>ç¼©æ”¾ä¸å˜æ€§</strong>ä»¥åŠæ•°æ®çš„çº¿æ€§å¯åˆ†æ€§å¯çŸ¥ï¼Œå– <span
class="math inline">\(\lambda \hat{\gamma}=1\)</span>ã€‚</p>
<details class="note info"><summary><p>è¯´æ˜</p>
</summary>
<p>æˆ‘è¿˜æ˜¯è®¤ä¸ºä» B ç«™è¿™ä¸ª<a
href="https://b23.tv/UuJtZE5">è®²è§£</a>çš„è§’åº¦æ¯”è¾ƒå¥½ç†è§£<br />
ä»è·ç¦»å…¬å¼å…¥æ‰‹ï¼Œç»“åˆç¼©æ”¾ä¸å˜æ€§ <span class="math display">\[\nonumber
d=\frac{|\boldsymbol{w}^\mathrm{T}\boldsymbol{x}_0+b|}{\|\boldsymbol{w}\|}\quad
\xrightarrow{\text{ç»è¿‡ç¼©æ”¾}} \frac{1}{\|\boldsymbol{w}\|}
\]</span> è¿™é‡Œå…¶å®æ¯”è¾ƒçº ç»“çš„æ˜¯ <span
class="math inline">\(\hat{\gamma}\)</span> çš„æ­£è´Ÿï¼Œå¯¼è‡´å¯¹äº <span
class="math inline">\(\lambda\)</span> æ­£è´Ÿçš„åˆ¤æ–­ä¸æ¸…æ¥šï¼Œå› ä¸ºå®é™…ä¸Šè¿™é‡Œ
<span class="math inline">\(\lambda\)</span> åªèƒ½å–æ­£çš„ã€‚<br />
æ‰€ä»¥æˆ‘åœ¨å‰æ–‡<a
href="#I_think">å¼•å…¥é—´éš”å®šä¹‰å‰</a>åŠ äº†ä¸€å¥è¯´æ˜ï¼Œè®¤ä¸ºè¿™é‡Œçš„è¶…å¹³é¢å·²ç»èƒ½å¤Ÿå°†æ‰€æœ‰æ ·æœ¬æ­£ç¡®åˆ’åˆ†ï¼Œæ‰èƒ½å¤Ÿæ‰“æ¶ˆç¬¦å·çš„ç–‘è™‘ã€‚<br />
ä¸è¿‡æ®è¯´è¿™æœ¬ä¹¦ <a href="#ref3">[3]</a>
å°†çš„å¾ˆæ˜ç™½ï¼Œä½†æ˜¯ä»‹äºç¯‡å¹…æœ‰ç‚¹é•¿ï¼Œå¹¶ä¸”æ˜¯è‹±æ–‡çš„ï¼Œæš‚æ—¶ä¸æƒ³çœ‹ã€‚ã€‚ã€‚ã€‚</p>

</details>
<p>æœ€ç»ˆä¼˜åŒ–é—®é¢˜å¯ä»¥å†™ä¸º <span class="math display">\[
\begin{equation}\label{final_opt}
\begin{aligned}
\min_{\boldsymbol{w},b} \quad&amp;\frac{1}{2}\|\boldsymbol{w}\|^2\\
\text{s.t.} \quad&amp; y_i
\left(\boldsymbol{w}^\mathrm{T}\boldsymbol{x}_i + b\right) \ge 1,\quad
i=1,2,\dots,n
\end{aligned}
\end{equation}
\]</span></p>
<p>çº¦æŸæ¡ä»¶è¡¨æ˜ï¼Œæ¯ä¸ªæ ·æœ¬éƒ½è¢«æ­£ç¡®åˆ†ç±»ã€‚</p>
<h3 id="æ±‚è§£">3.2. æ±‚è§£</h3>
<p>æ‹‰æ ¼æœ—æ—¥å‡½æ•° <span class="math display">\[
\begin{equation}
\begin{aligned}
\mathcal{L}(\boldsymbol{w},b,\boldsymbol{\alpha})&amp;=\frac{1}{2}\|\boldsymbol{w}\|^2
+ \sum_{i = 1}^{n} \alpha_i(1 - y_i(\boldsymbol{w}^T\boldsymbol{x}_i +
b)),\quad \alpha_i \ge 0\\
&amp;=\frac{1}{2}\|\boldsymbol{w}\|^2 + \sum_{i = 1}^{n} (\alpha_i -
\alpha_iy_i\boldsymbol{w}^T\boldsymbol{x}_i - \alpha_iy_ib)\\
&amp;=\frac{1}{2}\boldsymbol{w}^T\boldsymbol{w}+\sum_{i = 1}^{n}
\alpha_i - \sum_{i = 1}^{n} \alpha_iy_i\boldsymbol{w}^T\boldsymbol{x}_i
- \sum_{i = 1}^{n} \alpha_iy_ib
\end{aligned}
\end{equation}
\]</span></p>
<p>å¯¹ <span class="math inline">\(\boldsymbol{w}\)</span> å’Œ <span
class="math inline">\(b\)</span> åˆ†åˆ«æ±‚åå¯¼æ•°å¹¶ä»¤å…¶ä¸ºé›¶</p>
<p><span class="math display">\[
\begin{align}
\label{diff_w}&amp;\frac{\partial L}{\partial\boldsymbol{w}}=\frac{1}{2}
\times 2\boldsymbol{w}+0 - \sum_{i = 1}^{n} \alpha_iy_i\boldsymbol{x}_i
- 0 = 0 \Longrightarrow \boldsymbol{w}=\sum_{i = 1}^{n}
\alpha_iy_i\boldsymbol{x}_i\\
\label{diff_b}&amp;\frac{\partial L}{\partial b}=0 + 0 - 0 - \sum_{i =
1}^{n} \alpha_iy_i = 0 \Longrightarrow \sum_{i = 1}^{n} \alpha_iy_i = 0
\end{align}
\]</span></p>
<p>å°†ç»“æœä»£å›æ‹‰æ ¼æœ—æ—¥å‡½æ•°ä¸­æ¶ˆå» <span
class="math inline">\(\boldsymbol{w},b\)</span>ï¼Œå†è€ƒè™‘ <span
class="math inline">\(\eqref{diff_b}\)</span> çš„çº¦æŸæ¡ä»¶ï¼Œå³å¯å¾—åˆ° <span
class="math inline">\(\eqref{final_opt}\)</span> çš„å¯¹å¶é—®é¢˜ <span
class="math display">\[
\begin{equation}\label{dual_problem}
\begin{aligned}
\max_{\boldsymbol{\alpha}}
\quad&amp;\sum_{i=1}^{n}\alpha_i-\frac{1}{2}\sum_{i=1}^n\sum_{j=1}^n\alpha_i
\alpha_j y_i y_j \boldsymbol{x}_i^\mathrm{T}\boldsymbol{x}_j\\
\text{s.t.} \quad&amp; \sum_{i=1}^n \alpha_i y_i=0,\quad \alpha_i \ge 0
\end{aligned}
\end{equation}
\]</span></p>
<p>è§£å‡º <span class="math inline">\(\alpha\)</span> å³å¯é€šè¿‡ <span
class="math inline">\(\eqref{diff_w}\)</span> è§£å‡º <span
class="math inline">\(\boldsymbol{w}\)</span>ï¼Œæ ¹æ®æ”¯æŒå‘é‡ï¼Œä»£å…¥ <span
class="math inline">\(\eqref{SV}\)</span> ä¸­å¯å¾— <span
class="math display">\[
y_* \left(\sum_{i = 1}^{n}
\alpha_iy_i\boldsymbol{x}_i^\mathrm{T}\boldsymbol{x}_*+b\right) =
1\Longrightarrow b=y_* - \sum_{i = 1}^{n}
\alpha_iy_i\boldsymbol{x}_i^\mathrm{T}\boldsymbol{x}_*
\]</span></p>
<p>ä¸ºäº†æé«˜æ•°å€¼ç¨³å®šæ€§ï¼Œè€ƒè™‘å¯¹å…¨éƒ¨æ”¯æŒå‘é‡çš„è®¡ç®— <span
class="math inline">\(b\)</span> å¹¶å–å¹³å‡å€¼ <span
class="math display">\[
b=\frac{1}{N}\sum_{k=1}^{N}\left(y_k - \sum_{i = 1}^{n}
\alpha_iy_i\boldsymbol{x}_i^\mathrm{T}\boldsymbol{x}_k\right)
\]</span> å…¶ä¸­ï¼Œ <span class="math inline">\(N\)</span>
æ˜¯æ”¯æŒå‘é‡çš„æ€»æ•°</p>
<details class="note info"><summary><p>è¡¥å…… æ±‚è§£ <span
class="math inline">\(\eqref{dual_problem}\)</span></p>
</summary>
<p><strong>çº¿æ€§çº¦æŸäºŒæ¬¡è§„åˆ’é—®é¢˜</strong> Linearly Constraint Quadratic
Programming<br />
<span class="math inline">\(\eqref{dual_problem}\)</span>
å±äºçº¿æ€§çº¦æŸäºŒæ¬¡è§„åˆ’é—®é¢˜ã€‚<br />
è¯¥ç±»å‹é—®é¢˜æœ‰ä¸¤ä¸ªç‰¹ç‚¹ï¼š</p>
<ul>
<li>ç›®æ ‡å‡½æ•°ä¸ºäºŒæ¬¡é¡¹</li>
<li>çº¦æŸæ¡ä»¶ä¸ºä¸€æ¬¡é¡¹</li>
</ul>
<p>è¯¥é—®é¢˜è¦ä¹ˆæ— è§£ï¼Œè¦ä¹ˆåªæœ‰ä¸€ä¸ªæå€¼ã€‚</p>
<p>æ±‚è§£ <span class="math inline">\(\eqref{dual_problem}\)</span>
å¯ä»¥ç”¨é«˜æ•ˆçš„ SMO ç®—æ³•</p>
<p>todo</p>

</details>
<h3 id="æ ¸å‡½æ•°">3.3. æ ¸å‡½æ•°</h3>
åœ¨å‰æ–‡ä¸­ï¼Œæˆ‘ä»¬å§‹ç»ˆæ˜¯åœ¨æ•°æ®é›†æ˜¯çº¿æ€§å¯åˆ†çš„æ¡ä»¶ä¸‹è®¨è®ºçš„ï¼Œå¦‚ <a
href="#fig1">å›¾1</a>ï¼Œå³å­˜åœ¨ä¸€ä¸ªè¶…å¹³é¢èƒ½å¤Ÿå°†ä¸åŒç±»çš„æ ·æœ¬å®Œå…¨åˆ†å¼€ã€‚ä½†æ˜¯ç°å®ä»»åŠ¡ä¸­åœ¨<strong>åŸå§‹æ ·æœ¬ç©ºé—´</strong>ä¸­æˆ–è®¸å¹¶ä¸å­˜åœ¨ä¸€ä¸ªèƒ½æ­£ç¡®åˆ’åˆ†ä¸¤ç±»æ ·æœ¬çš„è¶…å¹³é¢ã€‚ä¾‹å¦‚å¦‚ä¸‹è¿™ç§â€œç”œç”œåœˆâ€å½¢çŠ¶çš„æ•°æ®
<span id="fig2"></span>
<figure>
<img src="2d.svg" alt="2d" width="40%" height="40%" loading="lazy"/>
<figcaption>
å›¾2. éçº¿æ€§æ•°æ®
</figcaption>
</figure>
å¯¹äºè¿™æ ·çš„é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ ·æœ¬æ•°æ®ä»åŸå§‹ç©ºé—´æ˜ å°„åˆ°æ›´é«˜çº¬çš„çº¿æ€§ç©ºé—´ï¼Œä½¿å¾—æ ·æœ¬åœ¨è¿™ä¸ªç‰¹å¾ç©ºé—´å†…çº¿æ€§å¯åˆ†ã€‚ä¾‹å¦‚å°†
<a href="#fig2">å›¾2</a>
ä¸­çš„æ•°æ®ä»åŸå§‹çš„äºŒç»´ç©ºé—´æ˜ å°„åˆ°ä¸€ä¸ªåˆé€‚çš„ä¸‰ç»´ç©ºé—´ï¼ˆå¦‚ä¸‹å›¾ï¼‰ï¼Œé‚£ä¹ˆå°±èƒ½æ‰¾åˆ°ä¸€ä¸ªåˆé€‚çš„åˆ’åˆ†è¶…å¹³é¢ã€‚
<span id="fig3"></span>
<figure>
<img src="2d_kernel_3d.svg" alt="3d" width="80%" height="80%" loading="lazy"/>
<figcaption>
å›¾3. éçº¿æ€§æ˜ å°„
</figcaption>
</figure>
<p>å¹¸è¿çš„æ˜¯ï¼Œæ ¹æ® <a
href="https://en.wikipedia.org/wiki/Cover%27s_theorem">Cover å®šç†</a>
å¯çŸ¥ï¼Œ<strong>å¦‚æœåŸå§‹ç©ºé—´æ˜¯æœ‰é™ç»´ï¼Œå³å±æ€§æ•°æœ‰é™ï¼Œé‚£ä¹ˆä¸€å®šå­˜åœ¨ä¸€ä¸ªé«˜ç»´ç‰¹å¾ç©ºé—´ä½¿æ ·æœ¬å¯åˆ†</strong>
ï¼ˆè¿™é‡Œçš„"ä¸€å®š"æŒ‡çš„æ˜¯æ¦‚ç‡ä¸Šè¶‹è¿‘äº 1ï¼‰ã€‚</p>
<p><a href="#fig3">å›¾3</a> ä¸­ <span
class="math inline">\(\phi(\boldsymbol{x})\)</span> è¡¨ç¤ºå°† <span
class="math inline">\(\boldsymbol{x}\)</span>
æ˜ å°„åçš„ç»“æœï¼Œåˆ™åœ¨è¯¥ç‰¹å¾ç©ºé—´ä¸­å¯¹åº”çš„ä¼˜åŒ–é—®é¢˜ä¸º <span
class="math display">\[
\begin{equation}\label{kernel_opt}
\begin{aligned}
\min_{\boldsymbol{w},b} \quad&amp;\frac{1}{2}\|\boldsymbol{w}\|^2\\
\text{s.t.} \quad&amp; y_i
\left(\boldsymbol{w}^\mathrm{T}\phi\left(\boldsymbol{x}_i\right) +
b\right) - 1\ge 0,\quad i=1,2,\dots,n
\end{aligned}
\end{equation}
\]</span> å…¶å¯¹å¶é—®é¢˜ä¸º <span class="math display">\[
\begin{equation}\label{phi_dual}
\begin{aligned}
\max_{\boldsymbol{\alpha}}
\quad&amp;\sum_{i=1}^{n}\alpha_i-\frac{1}{2}\sum_{i=1}^n\sum_{j=1}^n\alpha_i
\alpha_j y_i
y_j\  \phi\left(\boldsymbol{x}_i\right)^\mathrm{T}\phi\left(\boldsymbol{x}_j\right)\\
\text{s.t.} \quad&amp; \sum_{i=1}^n \alpha_i y_i=0,\quad \alpha_i \ge 0
\end{aligned}
\end{equation}
\]</span></p>
<p>æ˜ å°„åçš„ç‰¹å¾ç©ºé—´ç»´åº¦å¯èƒ½å¾ˆé«˜ï¼Œä¸ºäº†é¿å…æ˜¾å¼è®¡ç®—æ˜ å°„ <span
class="math inline">\(\phi(\boldsymbol{x})\)</span>ï¼Œå¼•å…¥æ ¸å‡½æ•° <span
class="math inline">\(\kappa\left(\boldsymbol{x}_i,\boldsymbol{x}_j\right)\)</span>
ç›´æ¥è®¡ç®—é«˜ç»´ç©ºé—´çš„å†…ç§¯ <span
class="math inline">\(\phi\left(\boldsymbol{x}_i\right)^\mathrm{T}\phi\left(\boldsymbol{x}_j\right)\)</span>ï¼Œå³
<span class="math display">\[
\kappa\left(\boldsymbol{x}_i,\boldsymbol{x}_j\right)=\phi\left(\boldsymbol{x}_i\right)^\mathrm{T}\phi\left(\boldsymbol{x}_j\right)
\]</span></p>
<p>æ ¸å‡½æ•°é€šè¿‡ç›´æ¥åˆ©ç”¨åŸå§‹æ•°æ® <span
class="math inline">\(\boldsymbol{x}_i,\boldsymbol{x}_j\)</span>
æ¥è®¡ç®—æ˜ å°„åˆ°é«˜ç»´ç©ºé—´åçš„å†…ç§¯ï¼Œä»è€Œé¿å…å› ç»´åº¦çˆ†ç‚¸äº§ç”Ÿçš„é«˜å¤æ‚åº¦çš„è®¡ç®—ä»¥åŠå­˜å‚¨é—®é¢˜ã€‚</p>
<p>å› æ­¤ <span class="math inline">\(\eqref{phi_dual}\)</span> å¯é‡å†™ä¸º
<span class="math display">\[
\begin{equation}\label{kernel_dual}
\begin{aligned}
\max_{\boldsymbol{\alpha}}
\quad&amp;\sum_{i=1}^{n}\alpha_i-\frac{1}{2}\sum_{i=1}^n\sum_{j=1}^n\alpha_i
\alpha_j y_i y_j
\  \kappa\left(\boldsymbol{x}_i,\boldsymbol{x}_j\right)\\
\text{s.t.} \quad&amp; \sum_{i=1}^n \alpha_i y_i=0,\quad \alpha_i \ge 0
\end{aligned}
\end{equation}
\]</span></p>
<p>åªè¦ä¸€ä¸ªå¯¹ç§°å‡½æ•°æ‰€å¯¹åº”çš„æ ¸çŸ©é˜µ <span class="math inline">\(K\)</span>
æ˜¯åŠæ­£å®šçš„ï¼Œé‚£å®ƒå°±èƒ½ä½œä¸ºæ ¸å‡½æ•°ï¼Œå³ <span class="math display">\[
K=\begin{bmatrix}
\kappa\left(\boldsymbol{x}_1,\boldsymbol{x}_1\right) &amp; \dots &amp;
\kappa\left(\boldsymbol{x}_1,\boldsymbol{x}_j\right) &amp; \dots &amp;
\kappa\left(\boldsymbol{x}_1,\boldsymbol{x}_n\right)\\
\vdots &amp; \ddots &amp; \vdots &amp; \ddots &amp; \vdots\\
\kappa\left(\boldsymbol{x}_i,\boldsymbol{x}_1\right) &amp; \dots &amp;
\kappa\left(\boldsymbol{x}_i,\boldsymbol{x}_j\right) &amp; \dots &amp;
\kappa\left(\boldsymbol{x}_i,\boldsymbol{x}_n\right)\\
\vdots &amp; \ddots &amp; \vdots &amp; \ddots &amp; \vdots\\
\kappa\left(\boldsymbol{x}_n,\boldsymbol{x}_1\right) &amp; \dots &amp;
\kappa\left(\boldsymbol{x}_n,\boldsymbol{x}_j\right) &amp; \dots &amp;
\kappa\left(\boldsymbol{x}_n,\boldsymbol{x}_n\right)\\
\end{bmatrix}
\succeq 0
\]</span></p>
<p>ä¸‹è¡¨åˆ—å‡ºäº†å‡ ä¸ªå¸¸ç”¨çš„æ ¸å‡½æ•°</p>
<table>
<caption>
è¡¨1. å¸¸è§æ ¸å‡½æ•°
</caption>
<tr>
<th>
åç§°
</th>
<th>
è¡¨è¾¾å¼
</th>
<th>
å‚æ•°
</th>
</tr>
<tr>
<td>
çº¿æ€§æ ¸
</td>
<td>
<span class="math inline">\(\kappa(x_i, x_j) = x_i^T x_j\)</span>
</td>
<td>
</td>
</tr>
<tr>
<td>
å¤šé¡¹å¼æ ¸
</td>
<td>
<span class="math inline">\(\kappa(x_i, x_j) = (x_i^T x_j)^d\)</span>
</td>
<td>
<span class="math inline">\(d \geq 1\)</span> ä¸ºå¤šé¡¹å¼çš„æ¬¡æ•°
</td>
</tr>
<tr>
<td>
é«˜æ–¯æ ¸ï¼ŒRBF æ ¸
</td>
<td>
<span class="math inline">\(\kappa(x_i, x_j) = \exp \left( -\frac{\|x_i
- x_j\|^2}{2\sigma^2} \right)\)</span>
</td>
<td>
<span class="math inline">\(\sigma &gt; 0\)</span> ä¸ºé«˜æ–¯æ ¸çš„å¸¦å®½
</td>
</tr>
<tr>
<td>
æ‹‰æ™®æ‹‰æ–¯æ ¸
</td>
<td>
<span class="math inline">\(\kappa(x_i, x_j) = \exp \left( -\frac{\|x_i
- x_j\|}{\sigma} \right)\)</span>
</td>
<td>
<span class="math inline">\(\sigma &gt; 0\)</span>
</td>
</tr>
<tr>
<td>
Sigmoidæ ¸
</td>
<td>
<span class="math inline">\(\kappa(x_i, x_j) = \tanh (\beta x_i^T x_j +
\theta)\)</span>
</td>
<td>
<span class="math inline">\(\tanh\)</span> ä¸ºåŒæ›²æ­£åˆ‡å‡½æ•°ï¼Œ<span
class="math inline">\(\beta &gt; 0, \theta &lt; 0\)</span>
</td>
</tr>
</table>
<h3 id="è½¯é—´éš”">3.4. è½¯é—´éš”</h3>
<p>å‰æ–‡è®¨è®ºéƒ½æ˜¯å»ºç«‹åœ¨æ•°æ®åœ¨åŸå§‹æ ·æœ¬ç©ºé—´æˆ–ç‰¹å¾ç©ºé—´ä¸­æ˜¯çº¿æ€§å¯åˆ†çš„ï¼Œå³ç¡¬é—´éš”ï¼Œä½†æ˜¯å®é™…ä»»åŠ¡ä¸­ï¼Œå¾€å¾€å¾ˆéš¾ç¡®å®šä¸€ä¸ªè¶…å¹³é¢å°†ä¸åŒç±»çš„æ ·æœ¬å®Œå…¨åˆ†å¼€ï¼Œå³ä½¿æ°å¥½æ‰¾åˆ°äº†æŸä¸ªæ ¸å‡½æ•°ä½¿å¾—æ ·æœ¬åœ¨ç‰¹å¾ç©ºé—´ä¸­çº¿æ€§å¯åˆ†ï¼Œä¹Ÿå¾ˆéš¾åˆ¤å®šä¸æ˜¯ç”±è¿‡æ‹Ÿåˆé€ æˆçš„ã€‚</p>
è§£å†³è¯¥é—®é¢˜çš„ä¸€ä¸ªåŠæ³•æ˜¯å…è®¸æ”¯æŒå‘é‡æœºåœ¨ä¸€äº›æ ·æœ¬ä¸Šå‡ºé”™ï¼Œå› æ­¤å¼•å…¥è½¯é—´éš”çš„æ¦‚å¿µ
<span id="fig4"></span>
<figure>
<img src="soft_svm.svg" alt="soft_svm" width="60%" height="60%" loading="lazy"/>
<figcaption>
å›¾4. è½¯é—´éš”
</figcaption>
</figure>
<p>æ˜æ˜¾çš„å¯ä»¥çœ‹åˆ°è®­ç»ƒæ•°æ®ä¸­å­˜åœ¨ä¸€äº›<strong>ç¦»ç¾¤ç‚¹
(outliers)</strong>ï¼Œä¹Ÿå°±æ˜¯ç±³é»„è‰²èƒŒæ™¯çš„æ ·æœ¬ï¼Œé™¤å»è¿™äº›ç¦»ç¾¤ç‚¹åå‰©ä¸‹çš„å¤§éƒ¨åˆ†æ ·æœ¬ç‚¹ç»„æˆçš„é›†åˆæ˜¯çº¿æ€§å¯åˆ†çš„ã€‚å¯¹äºè¿™äº›ç¦»ç¾¤ç‚¹ï¼Œå®ƒä»¬æ˜¾ç„¶ä¸æ»¡è¶³
<span class="math inline">\(\eqref{final_opt}\)</span> ä¸­çš„çº¦æŸæ¡ä»¶
<span class="math inline">\(y_i
\left(\boldsymbol{w}^\mathrm{T}\boldsymbol{x}_i + b\right)  \ge
1\)</span>ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¯¹æ¯ä¸ªæ ·æœ¬ç‚¹å¼•å…¥ä¸€ä¸ª<strong>æ¾å¼›å˜é‡</strong>
<span class="math inline">\(\xi_i \ge
0\)</span>ï¼Œä½¿å‡½æ•°é—´éš”åŠ ä¸Šæ¾å¼›å˜é‡å¤§äºç­‰äº1ã€‚è¿™æ ·çº¦æŸå˜ä¸º <span
class="math display">\[
y_i\left(\boldsymbol{w}^\mathrm{T}\boldsymbol{x}_i+1\right) \ge 1-\xi_i
\]</span></p>
<p>åŒæ—¶å¯¹æ¯ä¸ªæ¾å¼›å˜é‡æ”¯ä»˜ä¸€ä¸ªä»£ä»·ã€‚ç›®æ ‡å‡½æ•°åˆ™å˜ä¸º <span
class="math display">\[
\frac{1}{2}\|\boldsymbol{w}\|^2+C\sum_{i=1}^{n}\xi_i,\quad C \gt 0
\]</span> <span class="math inline">\(C\)</span> ä¸ºæƒ©ç½šå‚æ•°ï¼Œ<span
class="math inline">\(C\)</span>
è¶Šå¤§ï¼Œè¯´æ˜å¯¹è¯¯åˆ†ç±»çš„æƒ©ç½šè¶Šå¤§ï¼›åä¹‹ï¼Œå¯¹è¯¯åˆ†ç±»çš„æƒ©ç½šè¶Šå°ã€‚</p>
<p>æ­¤æ—¶ï¼Œæ”¯æŒå‘é‡æœºåœ¨è½¯é—´éš”ä¸‹çš„ä¼˜åŒ–é—®é¢˜å¯ä»¥æè¿°ä¸º <span
class="math display">\[
\begin{equation}\label{soft_opt}
\begin{aligned}
\min_{\boldsymbol{w},b,\xi}\quad &amp;
\frac{1}{2}\|\boldsymbol{w}\|^2+C\sum_{i=1}^{n}\xi_i\\
\text{s.t.}\quad &amp; y_i
\left(\boldsymbol{w}^\mathrm{T}\boldsymbol{x}_i + b\right) \ge
1-\xi_i,\quad i=1,2,\dots,n\\
&amp; \xi_i \gt 0,\quad i=1,2,\dots,n
\end{aligned}
\end{equation}
\]</span> æœ€å°åŒ–ç›®æ ‡å‡½æ•°åŒ…å«ä¸¤å±‚å«ä¹‰ï¼šä½¿ <span
class="math inline">\(\frac{1}{2}\|\boldsymbol{w}\|^2\)</span>
å°½å¯èƒ½å°ï¼Œå³å‡ ä½•é—´éš”å°½å¯èƒ½å¤§ï¼›åŒæ—¶ä½¿è¯¯åˆ†ç±»çš„æ ·æœ¬å°½å¯èƒ½å°‘ã€‚<span
class="math inline">\(C\)</span> å…¶å®ä¹Ÿç›¸å½“äºäºŒè€…çš„è°ƒå’Œç³»æ•°ã€‚</p>
<p><span class="math inline">\(\eqref{spft_opt}\)</span> çš„æ‹‰æ ¼æœ—æ—¥å‡½æ•°
<span class="math display">\[
\mathcal{L}\left(\boldsymbol{w},b,\boldsymbol{\xi},\boldsymbol{\alpha},\boldsymbol{\mu}\right)=\frac{1}{2}\|\boldsymbol{w}\|^2
+ C\sum_{i=1}^{n}\xi_i +
\sum_{i=1}^{n}\alpha_i\left(1-\xi_i-y_i\left(\boldsymbol{w}^\mathrm{T}\boldsymbol{x}_i+b\right)\right)-\sum_{i=1}^{n}\mu_i\xi_i
\]</span> å…¶ä¸­ï¼Œ<span class="math inline">\(\xi_i \ge 0,\mu_i \ge
0\)</span>ã€‚</p>
<p>å¯¹å¶é—®é¢˜ä¸º <span class="math display">\[
\begin{aligned}
\max_{\boldsymbol{\alpha}} \quad &amp;-\frac{1}{2} \sum_{i = 1}^{n}
\sum_{j = 1}^{n} \alpha_i \alpha_j y_i y_j
\boldsymbol{x_i}^\mathrm{T}\boldsymbol{x_j} + \sum_{i = 1}^{n} \alpha_i
\\
\text{s.t.} \quad &amp;\sum_{i = 1}^{n} \alpha_i y_i = 0 \\
&amp; C - \alpha_i - \mu_i = 0 \\
&amp; \alpha_i \geq 0 \\
&amp; \mu_i \geq 0, \quad i = 1,2,\cdots,n
\end{aligned}
\]</span> æ ¹æ®ç¬¬äºŒä¸ªç­‰å¼çº¦æŸæ¡ä»¶æ¶ˆå» <span
class="math inline">\(\mu_i\)</span> å¾— <span class="math display">\[
\begin{aligned}
\max_{\boldsymbol{\alpha}} \quad &amp;-\frac{1}{2} \sum_{i = 1}^{n}
\sum_{j = 1}^{n} \alpha_i \alpha_j y_i y_j
\boldsymbol{x_i}^\mathrm{T}\boldsymbol{x_j} + \sum_{i = 1}^{n} \alpha_i
\\
\text{s.t.} \quad &amp;\sum_{i = 1}^{n} \alpha_i y_i = 0 \\
&amp; 0\le\alpha_i \le C,\quad i = 1,2,\cdots,n
\end{aligned}
\]</span></p>
<details class="note info"><summary><p>SMOæ±‚è§£</p>
</summary>
<p>todo</p>

</details>
<h2 id="å‚è€ƒèµ„æ–™">4. å‚è€ƒèµ„æ–™</h2>
<p><strong>[1]</strong>
æèˆªè‘—<span>.</span>æœºå™¨å­¦ä¹ æ–¹æ³•[M].åŒ—äº¬ï¼šæ¸…åå¤§å­¦å‡ºç‰ˆç¤¾ï¼Œ2022.1<br />
<strong>[2]</strong> <a
href="https://blog.csdn.net/v_july_v/article/details/7624837">æ”¯æŒå‘é‡æœºé€šä¿—å¯¼è®ºâ€”â€”ç†è§£SVMçš„ä¸‰å±‚å¢ƒç•Œ</a><br />
<strong>[3]</strong> <a
href="https://timofey.pro/static/pdfdocs/AI_024_support_vector_machines_succinctly.pdf">Support
Vector Machines Succinctly</a><span id="ref3"></span><br />
<strong>[4]</strong>
å‘¨å¿—åè‘—<span>.</span>æœºå™¨å­¦ä¹ [M].åŒ—äº¬ï¼šæ¸…åå¤§å­¦å‡ºç‰ˆç¤¾ï¼Œ2016</p>
]]></content>
      <categories>
        <category>æœºå™¨å­¦ä¹ </category>
        <category>SVM</category>
      </categories>
      <tags>
        <tag>æœºå™¨å­¦ä¹ </tag>
        <tag>SVM</tag>
      </tags>
  </entry>
  <entry>
    <title>python è£…é¥°å™¨</title>
    <url>/2025/01/17/python-%E8%A3%85%E9%A5%B0%E5%99%A8/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><span id="more"></span>
<h2 id="è£…é¥°å™¨ç®€ä»‹">1. è£…é¥°å™¨ç®€ä»‹</h2>
<h3 id="å‡½æ•°è£…é¥°å‡½æ•°">1.1 å‡½æ•°è£…é¥°å‡½æ•°</h3>
<p>python ä¸­çš„è£…é¥°å™¨ä¹Ÿæ˜¯<strong>è¯­æ³•ç³–</strong>çš„ä¸€ç§ã€‚<br />
é€šå¸¸å¯ä»¥æŠŠè£…é¥°å™¨ç†è§£ä¸ºè¾“å…¥å’Œè¾“å‡ºéƒ½æ˜¯å‡½æ•°çš„å‡½æ•°ã€‚
å‡½æ•°è°ƒç”¨å‡½æ•°è¿”å›ä¸€ä¸ªå‡½æ•° (æˆ–è€…è¯´ callab)ã€‚</p>
<p>è£…é¥°å™¨çš„ä¸€å¤§ç‰¹æ€§æ˜¯ï¼Œèƒ½æŠŠè¢«è£…é¥°çš„å‡½æ•°æ›¿æ¢æˆå…¶ä»–å‡½æ•°ï¼›ç¬¬äºŒä¸ªç‰¹æ€§æ˜¯ï¼Œè£…é¥°å™¨åœ¨åŠ è½½æ¨¡å—æ—¶ç«‹å³æ‰§è¡Œï¼Œå‡½æ•°è£…é¥°å™¨åœ¨å¯¼å…¥æ¨¡å—æ—¶ç«‹å³æ‰§è¡Œï¼Œè€Œè¢«è£…é¥°çš„å‡½æ•°åªåœ¨æ˜ç¡®è°ƒç”¨æ—¶è¿è¡Œã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿™æ˜¯ä¸€ä¸ªè®¡æ—¶çš„è£…é¥°å™¨</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">timeit</span>(<span class="params">f</span>):</span><br><span class="line">    <span class="comment"># ä½¿ç”¨ *args, **kwargs å…è®¸å‡½æ•°æ¥å—å˜é•¿çš„å‚æ•°</span></span><br><span class="line">    <span class="comment"># å°±æ˜¯è¯´ä½ è¿™ä¸ªå‡½æ•°æ¥äº†ä»€ä¹ˆå‚æ•° æˆ‘éƒ½èƒ½æ¥å—</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">wrapper</span>(<span class="params">*args, **kwargs</span>):</span><br><span class="line">        start = time.time()</span><br><span class="line">        ret = f(*args, **kwargs)</span><br><span class="line">        <span class="built_in">print</span>(time.time() - start)</span><br><span class="line">        <span class="keyword">return</span> ret</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> wrapper</span><br><span class="line"></span><br><span class="line"><span class="meta">@timeit</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">myfunc</span>(<span class="params">x</span>):</span><br><span class="line">    time.sleep(x)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç­‰ä»·äºä¸‹é¢è¿™ç§å†™æ³•</span></span><br><span class="line"><span class="comment"># def myfunc(x):</span></span><br><span class="line"><span class="comment">#     time.sleep(x)</span></span><br><span class="line"><span class="comment"># myfunc = timeit(myfunc)</span></span><br></pre></td></tr></table></figure>
<p>å¸¦å‚æ•°çš„è£…é¥°å™¨ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">timeit</span>(<span class="params">iteration</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">inner</span>(<span class="params">f</span>):</span><br><span class="line"></span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">wrapper</span>(<span class="params">*args, **kwargs</span>):</span><br><span class="line">            start = time.time()</span><br><span class="line">            <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(iteration):</span><br><span class="line">                ret = f(*args, **kwargs)</span><br><span class="line">            <span class="built_in">print</span>(time.time() - start)</span><br><span class="line">            <span class="keyword">return</span> ret</span><br><span class="line">        <span class="keyword">return</span> wrapper</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> inner</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@timeit(<span class="params"><span class="number">10</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">double</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="keyword">return</span> x * <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸Šé¢ç­‰ä»·äºï¼š</span></span><br><span class="line"><span class="comment"># def double(x):</span></span><br><span class="line"><span class="comment">#     return x * 2</span></span><br><span class="line"><span class="comment"># double = timeit(10)(double)</span></span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œ <code>timeit(10)</code>
çš„è¿”å›å€¼ä¹Ÿæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶ä¸”è¿™ä¸ªå‡½æ•°çš„è¾“å…¥å’Œè¾“å‡ºéƒ½æ˜¯å‡½æ•°</p>
<h3 id="ç±»è£…é¥°å‡½æ•°">1.2 ç±»è£…é¥°å‡½æ•°</h3>
<p>ç±»è°ƒç”¨ä¸€ä¸ªå‡½æ•°è¿”å›ä¸€ä¸ª objectï¼Œä¾ç„¶æ˜¯ callable</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Timer</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, func</span>):</span><br><span class="line">        <span class="variable language_">self</span>.func = func</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å˜ä¸º callable çš„</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__call__</span>(<span class="params">self, *args, **kwargs</span>):</span><br><span class="line">        start = time.time()</span><br><span class="line">        ret = <span class="variable language_">self</span>.func(*args, **kwargs)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;Time: <span class="subst">&#123;time.time() - start&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> ret</span><br><span class="line"></span><br><span class="line"><span class="meta">@Timer</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">add</span>(<span class="params">a, b</span>):</span><br><span class="line">    <span class="keyword">return</span> a + b</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç­‰ä»·äº</span></span><br><span class="line"><span class="comment"># def add(a, b):</span></span><br><span class="line"><span class="comment">#     return a + b</span></span><br><span class="line"><span class="comment"># add = Timer(add)</span></span><br><span class="line"><span class="comment"># ç›¸å½“äºæŠŠä¸€ä¸ªå‡½æ•°å˜ä¸ºäº†ä¸€ä¸ªç±»çš„å¯¹è±¡</span></span><br><span class="line"><span class="keyword">if</span> __name__==<span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    <span class="built_in">print</span>(add(<span class="number">2</span>, <span class="number">3</span>))</span><br></pre></td></tr></table></figure>
<p>å¸¦å‚æ•°çš„ç±»ä½œä¸ºè£…é¥°å™¨ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Timer</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, prefix</span>):</span><br><span class="line">        <span class="variable language_">self</span>.prefix = prefix</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å˜ä¸º callable çš„</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__call__</span>(<span class="params">self, prefix</span>):</span><br><span class="line"></span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">wrapper</span>(<span class="params">self, *args, **kwargs</span>):</span><br><span class="line">            start = time.time()</span><br><span class="line">            ret = <span class="variable language_">self</span>.func(*args, **kwargs)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;self.prefix&#125;</span><span class="subst">&#123;time.time() - start&#125;</span>&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span> ret</span><br><span class="line">        <span class="keyword">return</span> wrapper</span><br><span class="line"></span><br><span class="line"><span class="meta">@Timer(<span class="params">prefix=<span class="string">&quot;cost_time:&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">add</span>(<span class="params">a, b</span>):</span><br><span class="line">    <span class="keyword">return</span> a + b</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç­‰ä»·äº</span></span><br><span class="line"><span class="comment"># def add(a, b):</span></span><br><span class="line"><span class="comment">#     return a + b</span></span><br><span class="line"><span class="comment"># add = Timer(prefix=&quot;cost_time&quot;)(add)</span></span><br><span class="line"><span class="comment"># ç›¸å½“äºæŠŠä¸€ä¸ªå‡½æ•°å˜ä¸ºäº†ä¸€ä¸ªç±»çš„å¯¹è±¡</span></span><br><span class="line"><span class="keyword">if</span> __name__==<span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    <span class="built_in">print</span>(add(<span class="number">2</span>, <span class="number">3</span>))</span><br></pre></td></tr></table></figure>
<h3 id="å‡½æ•°è£…é¥°ç±»">1.3 å‡½æ•°è£…é¥°ç±»</h3>
<p>è£…é¥°å™¨å»è£…é¥°ç±»</p>
<p>å½“æ‰“å°ä¸€ä¸ªè‡ªå®šä¹‰ç±»çš„æ—¶å€™ï¼Œä¸ä¼šè¾“å‡ºä»»ä½•æœ‰ä»·å€¼çš„å†…å®¹ï¼Œåªä¼šå‘Šè¯‰ä½ è¿™æ˜¯ä¸€ä¸ªäººä»€ä¹ˆç±»ï¼Œé™¤éé‡è½½ä»–çš„
<code>__str__</code> æ–¹æ³•æ¥æ”¹å˜ä»–çš„ <code>print</code>
ç»“æœï¼Œä½†æ˜¯æ¯æ¬¡éƒ½é‡è½½å¾ˆéº»çƒ¦ï¼Œæ‰€ä»¥å¯ä»¥å†™ä¸€ä¸ªè£…é¥°å™¨æ¥è£…é¥°ç±»ç”¨äºé‡è½½å…¶
<code>__str__</code> æ–¹æ³•ã€‚ä¸‹é¢å°±æ˜¯ä¸€ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">add_str</span>(<span class="params">cls</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__str__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">str</span>(<span class="variable language_">self</span>.__dict__)</span><br><span class="line">    cls.__str__ = __str__</span><br><span class="line">    <span class="keyword">return</span> cls</span><br><span class="line"></span><br><span class="line"><span class="meta">@add_str</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyObject</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, a, b</span>):</span><br><span class="line">        <span class="variable language_">self</span>.a = a</span><br><span class="line">        <span class="variable language_">self</span>.b = b</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç­‰ä»·äºï¼š</span></span><br><span class="line"><span class="comment"># class MyObject:</span></span><br><span class="line"><span class="comment">#     def __init__(self, a, b):</span></span><br><span class="line"><span class="comment">#         self.a = a</span></span><br><span class="line"><span class="comment">#         self.b = b</span></span><br><span class="line"><span class="comment"># add_str(MyObject)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__==<span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    obj = MyObject(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">    <span class="built_in">print</span>(obj)</span><br></pre></td></tr></table></figure>
<h3 id="ç±»è£…é¥°ç±»">1.4 ç±»è£…é¥°ç±»ï¼Ÿ</h3>
<p>emmmï¼Œæœ¬è´¨ä¸Šå…¶å®è¿˜æ˜¯å‡½æ•°ï¼Œæ˜¯ä¸€ä¸ªè¾“å…¥å’Œè¾“å‡ºéƒ½æ˜¯ç±»çš„å‡½æ•°</p>
<h3 id="å°ç»“">1.5 å°ç»“</h3>
<p>å…¶å®åªè¦è½¬åŒ–ä¸ºç­‰ä»·å½¢å¼å°±çŸ¥é“è£…é¥°å™¨åœ¨å¹²ä»€ä¹ˆäº†ï¼Œå› ä¸ºè£…é¥°å™¨çš„æœ¬è´¨æ¯•ç«Ÿè¿˜æ˜¯è¯­æ³•ç³–ã€‚</p>
<h2 id="ä¸€äº›å¸¸è§çš„è£…é¥°å™¨">2. ä¸€äº›å¸¸è§çš„è£…é¥°å™¨</h2>
<h3 id="staticmethod">2.1 <span class="citation"
data-cites="staticmethod">@staticmethod</span></h3>
<p>ç”¨äºå®šä¹‰é™æ€æ–¹æ³•ï¼Œæ„å‘³ç€è¢«å®ƒè£…é¥°çš„å‡½æ•°ä¸éœ€è¦åˆ›å»ºç±»çš„å®ä¾‹ï¼ˆä¸éœ€è¦ä¼ é€’
<code>self</code> å‚æ•°ï¼‰å°±å¯ä»¥ç›´æ¥è°ƒç”¨ï¼Œå³å˜ä¸ºé™æ€å‡½æ•°ã€‚</p>
<h3 id="classmethod">2.2 <span class="citation"
data-cites="classmethod">@classmethod</span></h3>
<p>ç”¨äºå®šä¹‰ç±»çš„æ–¹æ³•ï¼Œè¢«å®ƒè£…é¥°çš„å‡½æ•°ç¬¬ä¸€ä¸ªå‚æ•°åº”è¯¥ä¸ºç±» <code>cls</code>
ï¼Œå˜ä¸ºç±»çš„æ–¹æ³•ï¼Œä½†ä¸èƒ½è®¿é—®å®ä¾‹çš„å±æ€§ï¼Œå› ä¸ºä¼ å…¥çš„æ˜¯ç±»æœ¬èº«
<code>cls</code> ï¼Œè€Œä¸æ˜¯å®ä¾‹ <code>self</code> ã€‚</p>
<p>ç±»æ–¹æ³•å¯ä»¥è®¿é—®ç±»çš„å±æ€§å’Œå…¶ä»–ç±»æ–¹æ³•ï¼Œä½†ä¸èƒ½è®¿é—®å®ä¾‹çš„å±æ€§ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span>:</span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">static_method</span>(<span class="params">x, y</span>):</span><br><span class="line">        <span class="keyword">return</span> x + y</span><br><span class="line"></span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">class_method</span>(<span class="params">cls, x, y</span>):</span><br><span class="line">        <span class="keyword">return</span> x * y</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(MyClass.static_method(<span class="number">2</span>, <span class="number">3</span>))  <span class="comment"># è¾“å‡º: 5</span></span><br><span class="line"><span class="built_in">print</span>(MyClass.class_method(<span class="number">2</span>, <span class="number">3</span>))   <span class="comment"># è¾“å‡º: 6</span></span><br></pre></td></tr></table></figure>
<h3 id="property">2.3 <span class="citation"
data-cites="property">@property</span></h3>
<p>ç”¨äºå°†ä¸€ä¸ªæ–¹æ³•è½¬åŒ–ä¸ºå±æ€§ï¼Œå¯ä»¥è®©ä½ åœ¨è®¿é—®å±æ€§æ—¶è°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œä»è€Œå°è£…å¯¹å±æ€§çš„è®¿é—®ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Circle</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, radius</span>):</span><br><span class="line">        <span class="variable language_">self</span>._radius = radius   <span class="comment"># ç§æœ‰å±æ€§</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">radius</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">self</span>._radius  <span class="comment"># åªè¯»å±æ€§     </span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># @&lt;property_name&gt;.setter æ˜¯ä¸€ä¸ªè£…é¥°å™¨ï¼Œ</span></span><br><span class="line">    <span class="comment"># ç”¨äºä¸º @property è£…é¥°çš„å±æ€§æä¾›è®¾ç½®å™¨å³å®šä¹‰å±æ€§çš„å†™æ“ä½œã€‚</span></span><br><span class="line">    <span class="comment"># é€šè¿‡è¿™ä¸ªè£…é¥°å™¨ï¼Œä½ å¯ä»¥æŒ‡å®šå¦‚ä½•ä¿®æ”¹æŸä¸ªå±æ€§çš„å€¼ï¼Œä»è€Œè®©è¿™ä¸ªå±æ€§å˜ä¸ºå¯å†™çš„ã€‚</span></span><br><span class="line"><span class="meta">    @radius.setter</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">radius</span>(<span class="params">self, value</span>):</span><br><span class="line">        <span class="keyword">if</span> value &lt; <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">&quot;Radius cannot be negative&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>._radius = value</span><br><span class="line"></span><br><span class="line">c = Circle(<span class="number">5</span>)</span><br><span class="line"><span class="built_in">print</span>(c.radius)  <span class="comment"># è¾“å‡º: 5</span></span><br><span class="line">c.radius = <span class="number">10</span>    <span class="comment"># è®¾ç½® radius</span></span><br><span class="line"><span class="built_in">print</span>(c.radius)  <span class="comment"># è¾“å‡º: 10</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>python</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>è£…é¥°å™¨</tag>
      </tags>
  </entry>
  <entry>
    <title>python å¸¸ç”¨è¯­æ³•ç³–</title>
    <url>/2025/01/17/python-%E5%B8%B8%E7%94%A8%E8%AF%AD%E6%B3%95%E7%B3%96/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><span id="more"></span>
<h2 id="æ•°å­—åˆ†éš”ç¬¦">1. æ•°å­—åˆ†éš”ç¬¦</h2>
<p>å½“æ•°å€¼è¾ƒå¤§æ—¶ï¼Œå¯ä»¥ç”¨æ•°å­—åˆ†éš”ç¬¦æ¥è¿›è¡Œåˆ’åˆ†</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = <span class="number">1_000_000</span> <span class="comment"># ç­‰åŒäº 1000000</span></span><br></pre></td></tr></table></figure>
<h2 id="äº¤æ¢å˜é‡å€¼">2. äº¤æ¢å˜é‡å€¼</h2>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a, b = b, a</span><br></pre></td></tr></table></figure>
<h2 id="è¿ç»­æ¯”è¾ƒå¼">3. è¿ç»­æ¯”è¾ƒå¼</h2>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="number">10</span> &lt; a &lt; <span class="number">20</span>:</span><br><span class="line">    <span class="comment"># do something</span></span><br></pre></td></tr></table></figure>
<h2 id="å­—ç¬¦ä¸²ä¹˜æ³•">4. å­—ç¬¦ä¸²ä¹˜æ³•</h2>
<p>å¯ç”¨äºå¿«é€Ÿæ„é€ å­—ç¬¦ä¸²</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;-&#x27;</span> * <span class="number">20</span>)</span><br></pre></td></tr></table></figure>
<h2 id="åˆ—è¡¨æ‹¼æ¥">5. åˆ—è¡¨æ‹¼æ¥</h2>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">b = [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]</span><br><span class="line">c = a + b  <span class="comment"># c = [1, 2, 3, 4, 5, 6]</span></span><br><span class="line"><span class="comment"># a.extend(b) åç›¸å½“äº a = a + b = [1, 2, 3, 4, 5, 6], a è¢«æ”¹å˜äº†</span></span><br><span class="line"><span class="comment"># ä¸èƒ½ç”¨ä¸€ä¸ªå˜é‡å»æ¥æ”¶ï¼Œå³ c = a.extend(b) è¿™æ · c çš„å€¼æ˜¯ Noneï¼Œå¹¶ä¸ä¼šèµ‹å€¼ç»™ c </span></span><br></pre></td></tr></table></figure>
<h2 id="æ‰“åŒ…è§£åŒ…">6. æ‰“åŒ…è§£åŒ…</h2>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = (<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line">x, y, z = a</span><br></pre></td></tr></table></figure>
<h2 id="with-è¯­å¥">7. with è¯­å¥</h2>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;file_name&quot;</span>,<span class="string">&#x27;mode&#x27;</span>) <span class="keyword">as</span> new_name:</span><br><span class="line">    <span class="comment"># do something</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>python</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>è¯­æ³•ç³–</tag>
      </tags>
  </entry>
  <entry>
    <title>git å‘½ä»¤æ€ç»´å¯¼å›¾</title>
    <url>/2025/01/17/git-%E5%91%BD%E4%BB%A4%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><span id="more"></span>
<figure>
<img src="git.jpg" alt="git å‘½ä»¤æ€ç»´å¯¼å›¾" />
<figcaption aria-hidden="true">git å‘½ä»¤æ€ç»´å¯¼å›¾</figcaption>
</figure>
<p>æ¥æºï¼š<a
href="https://github.com/toypipi/graph_bed/blob/master/image/20200810/git%E5%91%BD%E4%BB%A4%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE.jpg">github</a></p>
]]></content>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title>å¸¸ç”¨çŸ©é˜µè®¡ç®—</title>
    <url>/2025/01/15/%E5%B8%B8%E7%94%A8%E7%9F%A9%E9%98%B5%E8%AE%A1%E7%AE%97/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><span id="more"></span>
<h2 id="ç¬¦å·çº¦å®š">1. ç¬¦å·çº¦å®š</h2>
<p>æ­£å¸¸å°å†™å­—æ¯è¡¨ç¤ºæ ‡é‡ï¼›<br />
åŠ ç²—å°å†™å­—æ¯è¡¨ç¤ºå‘é‡ï¼Œæ— ç‰¹æ®Šè¯´æ˜æ—¶é€šå¸¸ä¸º<strong>åˆ—å‘é‡</strong>ï¼›<br />
å¤§å†™å­—æ¯è¡¨ç¤ºçŸ©é˜µï¼›</p>
<h2 id="æ±‚å¯¼">2. æ±‚å¯¼</h2>
<p>çŸ©é˜µæ±‚å¯¼ä¸­çš„ <strong>åˆ†å­å¸ƒå±€</strong> å’Œ <strong>åˆ†æ¯å¸ƒå±€</strong>
æ˜¯ä¸¤ç§ä¸åŒçš„çº¦å®šæ–¹å¼ï¼Œå®ƒä»¬çš„ä¸»è¦åŒºåˆ«åœ¨äºçº¦å®šå¯¼æ•°çš„ç»“æœçš„ç»´åº¦å’Œæ’åˆ—æ–¹å¼ï¼ŒäºŒè€…å‡æ­£ç¡®ï¼Œä½†éœ€è¦ä¿éšœåœ¨åŒä¸€ç¯å¢ƒä¸‹åªèƒ½ä½¿ç”¨ä¸€ç§å¸ƒå±€æ–¹å¼ã€‚<br />
åŒºåˆ†æ˜¯åˆ†å­å¸ƒå±€è¿˜æ˜¯åˆ†æ¯å¸ƒå±€ï¼Œå¯ä»¥çœ‹æ±‚å¯¼ç»“æœçš„ç¬¬ä¸€ä¸ªç»´åº¦æ˜¯ç­‰äºåˆ†å­çš„ç¬¬ä¸€ä¸ªç»´åº¦è¿˜æ˜¯åˆ†æ¯çš„ç¬¬ä¸€ä¸ªç»´åº¦ã€‚<br />
å¯ä»¥æ³¨æ„åˆ°åˆ†å­å¸ƒå±€å’Œåˆ†æ¯å¸ƒå±€çš„ç»“æœäº’ä¸ºè½¬ç½®ã€‚</p>
<table>
<colgroup>
<col style="width: 27%" />
<col style="width: 36%" />
<col style="width: 36%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;"></th>
<th style="text-align: center;">åˆ†æ¯å¸ƒå±€</th>
<th style="text-align: center;">åˆ†å­å¸ƒå±€</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><span class="math display">\[\nonumber
\frac{\partial A\boldsymbol{x}}{\partial \boldsymbol{x}}\]</span></td>
<td style="text-align: center;"><span class="math display">\[\nonumber
A^T\]</span></td>
<td style="text-align: center;"><span class="math display">\[\nonumber
A\]</span></td>
</tr>
<tr class="even">
<td style="text-align: center;"><span class="math display">\[\nonumber
\frac{\partial \boldsymbol{\alpha}^{T}\boldsymbol{x}}{\partial
\boldsymbol{x}} = \frac{\partial
\boldsymbol{x}^{T}\boldsymbol{\alpha}}{\partial
\boldsymbol{x}}\]</span></td>
<td style="text-align: center;"><span class="math display">\[\nonumber
\boldsymbol{\alpha}\]</span></td>
<td style="text-align: center;"><span class="math display">\[\nonumber
\boldsymbol{\alpha}^T\]</span></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><span class="math display">\[\nonumber
\frac{\partial\boldsymbol{y}^{T}\boldsymbol{Ax}}{\partial
A}\]</span></td>
<td style="text-align: center;"><span class="math display">\[\nonumber
\boldsymbol{y}\boldsymbol{x}^{T}\]</span></td>
<td style="text-align: center;"><span class="math display">\[\nonumber
\boldsymbol{y}^{T}\boldsymbol{x}\]</span></td>
</tr>
<tr class="even">
<td style="text-align: center;"><span class="math display">\[\nonumber
\frac{\partial
\boldsymbol{x}^TA\boldsymbol{x}}{\partial\boldsymbol{x}}\]</span></td>
<td style="text-align: center;"><span class="math display">\[\nonumber
\boldsymbol{Ax}+A^T\boldsymbol{x}\,,\ 2\boldsymbol{Ax}\]</span></td>
<td style="text-align: center;"><span class="math display">\[\nonumber
\boldsymbol{x}^TA^T+\boldsymbol{x}^TA\,,\ 2\boldsymbol{x}^T
A\]</span></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><span class="math display">\[\nonumber
\frac{\partial\  \mathrm{Tr}\left(X^TAX\right)}{\partial
X}=\frac{\partial\  \mathrm{Tr}\left(AXX^T\right)}{\partial
X}\]</span></td>
<td style="text-align: center;"><span class="math display">\[\nonumber
(A+A^T)X\]</span></td>
<td style="text-align: center;"><span class="math display">\[\nonumber
X^T(A+A^T)\]</span></td>
</tr>
<tr class="even">
<td style="text-align: center;"><span class="math display">\[\nonumber
\frac{\partial\  \mathrm{Tr}\left(XAX^T\right)}{\partial
X}\]</span></td>
<td style="text-align: center;"><span class="math display">\[\nonumber
X(A^T+A)\]</span></td>
<td style="text-align: center;"><span class="math display">\[\nonumber
(A^T+A)X^T\]</span></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><span class="math display">\[\nonumber
\frac{\partial \ \mathrm{Tr}(AX)}{\partial X} = \frac{\partial \
\mathrm{Tr}(XA)}{\partial X}\]</span></td>
<td style="text-align: center;"><span class="math display">\[\nonumber
A^T\]</span></td>
<td style="text-align: center;"><span class="math display">\[\nonumber
A\]</span></td>
</tr>
<tr class="even">
<td style="text-align: center;"><span class="math display">\[\nonumber
\frac{\partial \ \mathrm{Tr}(AX^T)}{\partial X} = \frac{\partial \
\mathrm{Tr}(X^TA)}{\partial X}\]</span></td>
<td style="text-align: center;"><span class="math display">\[\nonumber
A\]</span></td>
<td style="text-align: center;"><span class="math display">\[\nonumber
A^T\]</span></td>
</tr>
</tbody>
</table>
<h2 id="é›…å¯æ¯”-jacobi-çŸ©é˜µ">3. é›…å¯æ¯” (Jacobi) çŸ©é˜µ</h2>
<h2 id="é»‘å¡-hessian-çŸ©é˜µ">4. é»‘å¡ (Hessian) çŸ©é˜µ</h2>
]]></content>
      <categories>
        <category>æ•°å­¦</category>
        <category>çŸ©é˜µè®¡ç®—</category>
      </categories>
      <tags>
        <tag>çŸ©é˜µè®¡ç®—</tag>
      </tags>
  </entry>
  <entry>
    <title>éçº¿æ€§æœ€å°äºŒä¹˜</title>
    <url>/2025/01/15/%E9%9D%9E%E7%BA%BF%E6%80%A7%E6%9C%80%E5%B0%8F%E4%BA%8C%E4%B9%98/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><span id="more"></span>
<h2 id="å‰è¨€">1. å‰è¨€</h2>
<p>å…ˆè€ƒè™‘ä¸€ä¸ªæœ€ç®€å•çš„æœ€å°äºŒä¹˜é—®é¢˜ï¼š <span class="math display">\[
\underset{x}{min} \frac{1}{2} \|f(\boldsymbol{x}) \|_{2}^{2}
\]</span> è¿™é‡Œè‡ªå˜é‡ <span class="math inline">\(\boldsymbol{x} \in
\mathbb{R}^n\)</span> ï¼Œ <span class="math inline">\(f\)</span>
æ˜¯ä»»æ„ä¸€ä¸ªéçº¿æ€§å‡½æ•°ï¼Œå‡è®¾ä»–æœ‰ <span class="math inline">\(m\)</span>
ç»´ï¼š <span class="math inline">\(f(\boldsymbol{x}) \in
\mathbb{R}^m\)</span> ã€‚</p>
<p>è€ƒè™‘ <span class="math inline">\(f\)</span>
çš„å½¢å¼åŸºæœ¬æœ‰ä¸¤ç§è§£å†³æ–¹æ³•ï¼šè§£ææ³•å’Œè¿­ä»£æ³•ã€‚</p>
<h3 id="è§£ææ³•">1.1 è§£ææ³•</h3>
<p>å½“ <span class="math inline">\(f\)</span>
çš„æ•°å­¦å½¢å¼æ¯”è¾ƒç®€å•çš„æ—¶å€™ï¼Œæˆ–è®¸é—®é¢˜å¯ä»¥ç›´æ¥ç”¨è§£æå½¢å¼æ¥æ±‚è§£ã€‚ä¹Ÿå°±æ˜¯è®©ç›®æ ‡å‡½æ•°çš„å¯¼æ•°ä¸º
0 ï¼Œç„¶åæ±‚è§£ <span class="math inline">\(\boldsymbol{x}\)</span>
çš„æœ€ä¼˜å€¼ï¼š <span class="math display">\[
\frac{\partial f}{\partial \boldsymbol{x}}=0 \nonumber
\]</span> è§£ä¸Šè¿°æ–¹ç¨‹å³å¯å¾—åˆ°ç›®æ ‡å‡½æ•°å¯¼æ•°ä¸º 0
çš„æå€¼ï¼Œå®ƒå¯èƒ½æ˜¯æå¤§å€¼ã€æå°å€¼æˆ–è€…éç‚¹å¤„çš„å€¼ï¼Œä¾æ¬¡æ¯”è¾ƒå³å¯å¾—åˆ°æœ€å°å€¼ã€‚<br />
æ˜¾ç„¶è¿™ç§æ–¹æ³•è¾ƒä¸ºå±€é™ã€‚</p>
<h3 id="è¿­ä»£æ³•">1.2 è¿­ä»£æ³•</h3>
<p>å¯¹äºä¸æ˜“ç›´æ¥æ±‚å¯¼çš„ç›®æ ‡å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨è¿­ä»£çš„æ–¹æ³•æ¥æ±‚æå°å€¼ã€‚æ ¹æ®ç»™å®šçš„åˆå€¼ï¼Œä¸æ–­åœ°æ›´æ–°å½“å‰çš„ä¼˜åŒ–å˜é‡ï¼Œä½¿å¾—ç›®æ ‡å‡½æ•°æœç€ä¸‹é™çš„æ–¹å‘å˜åŒ–ã€‚å…·ä½“æ­¥éª¤åˆ—å†™å¦‚ä¸‹ï¼š</p>
<ol type="1">
<li>ç»™å®šåˆå€¼ <span class="math inline">\(\boldsymbol{x}_0\)</span>
ï¼›<br />
</li>
<li>å¯¹äºç¬¬ <span class="math inline">\(k\)</span> æ¬¡è¿­ä»£ï¼Œå¯»æ‰¾ä¸€ä¸ªå¢é‡
<span class="math inline">\(\Delta \boldsymbol{x}_k\)</span>ï¼Œä½¿å¾— <span
class="math inline">\(\|f(\boldsymbol{x}_k + \Delta
\boldsymbol{x}_k)\|_{2}^{2}\)</span> è¾¾åˆ°æå°å€¼ï¼›<br />
</li>
<li>å¦‚æœ <span class="math inline">\(\Delta \boldsymbol{x}_k\)</span>
è¶³å¤Ÿå°ï¼Œåˆ™åœæ­¢ï¼›<br />
</li>
<li>å¦åˆ™ï¼Œä»¤ <span
class="math inline">\(\boldsymbol{x}_{k+1}=\boldsymbol{x}_k + \Delta
\boldsymbol{x}_k\)</span>ï¼Œè¿”å›2ã€‚</li>
</ol>
<p>è¿™æ ·é—®é¢˜å°±è½¬åŒ–ä¸ºå¦‚ä½•ç¡®å®šå¢é‡ <span class="math inline">\(\Delta
\boldsymbol{x}_k\)</span>ï¼Œä½¿ä¸Šè¿°è¿‡ç¨‹æ”¶æ•›ï¼Œé€šå¸¸æœ‰ä¸‹é¢çš„å‡ ç§æ–¹æ³•ã€‚</p>
<h2 id="ä¸€é˜¶å’ŒäºŒé˜¶æ¢¯åº¦æ³•æœ€é€Ÿä¸‹é™æ³•å’Œç‰›é¡¿æ³•">2.
ä¸€é˜¶å’ŒäºŒé˜¶æ¢¯åº¦æ³•ï¼ˆæœ€é€Ÿä¸‹é™æ³•å’Œç‰›é¡¿æ³•ï¼‰</h2>
<p>æ±‚è§£å¢é‡æœ€ç›´è§‚çš„æ–¹æ³•å°±æ˜¯å°† <strong>ç›®æ ‡å‡½æ•°</strong> <span
id="GM"></span> åœ¨ <span class="math inline">\(\boldsymbol{x}\)</span>
è¿›è¡Œæ³°å‹’å±•å¼€ï¼š <span class="math display">\[
\|f(\boldsymbol{x}+\Delta\boldsymbol{x})
\|_{2}^{2}=\|f(\boldsymbol{x})\|_{2}^{2}+\boldsymbol{J}(\boldsymbol{x})\Delta
\boldsymbol{x}+\frac{1}{2}\Delta \boldsymbol{x }^T \boldsymbol{H} \Delta
\boldsymbol{x}.
\]</span></p>
<p>è¿™é‡Œ <span class="math inline">\(\boldsymbol{J}\)</span> æ˜¯ <span
class="math inline">\(\|f(\boldsymbol{x}) \|_{2}^{2}\)</span> å…³äº <span
class="math inline">\(x\)</span> çš„å¯¼æ•°ï¼ˆé›…å¯æ¯”çŸ©é˜µï¼‰ï¼Œ<span
class="math inline">\(\boldsymbol{H}\)</span>
åˆ™æ˜¯äºŒé˜¶å¯¼æ•°ï¼ˆé»‘å¡çŸ©é˜µï¼‰ã€‚æˆ‘ä»¬å¯ä»¥é€‰æ‹©ä¿ç•™æ³°å‹’å±•å¼€çš„ä¸€é˜¶æˆ–äºŒé˜¶é¡¹ï¼Œå¯¹åº”çš„æ±‚è§£æ–¹æ³•åˆ™ä¸ºä¸€é˜¶æ¢¯åº¦æˆ–äºŒé˜¶æ¢¯åº¦æ³•ã€‚</p>
<p>å¦‚æœä¿ç•™ä¸€é˜¶æ¢¯åº¦ï¼Œé‚£ä¹ˆå¢é‡çš„æ–¹å‘ä¸ºï¼š <span class="math display">\[
\Delta \boldsymbol{x}^{*}=-\boldsymbol{J}^T(\boldsymbol{x})
\]</span> è¿™é‡Œçš„è½¬ç½®æ˜¯ä¸ºäº†æ»¡è¶³çŸ©é˜µä¹˜æ³•çš„ç»´åº¦åŒ¹é…ã€‚<br />
å®ƒçš„ç›´è§‚æ„ä¹‰éå¸¸ç®€å•ï¼Œåªè¦æˆ‘ä»¬æ²¿ç€åå‘æ¢¯åº¦æ–¹å‘å‰è¿›å³å¯ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬è¿˜éœ€è¦è¯¥æ–¹å‘ä¸Šå–ä¸€ä¸ªæ­¥é•¿
Î»ï¼Œæ±‚å¾—æœ€å¿«çš„ä¸‹é™æ–¹å¼ã€‚è¿™ç§æ–¹æ³•è¢«ç§°ä¸º<strong>æœ€é€Ÿä¸‹é™æ³•</strong>ã€‚</p>
<p>å¦‚æœä¿ç•™äºŒé˜¶æ¢¯åº¦ï¼Œé‚£ä¹ˆå¢é‡çš„è§£ä¸ºï¼š <span
class="math display">\[\label{äºŒé˜¶æ¢¯åº¦æ³•}
\boldsymbol{H} \Delta \boldsymbol{x}^{*}= - \boldsymbol{J}^T
\]</span> è¯¥æ–¹æ³•ç§°åˆä¸º<strong>ç‰›é¡¿æ³•</strong>ã€‚</p>
<h3 id="å°ç»“">2.1 å°ç»“</h3>
<p>æˆ‘ä»¬çœ‹åˆ°ï¼Œä¸€é˜¶å’ŒäºŒé˜¶æ¢¯åº¦æ³•éƒ½ååˆ†ç›´è§‚ï¼Œåªè¦æŠŠå‡½æ•°åœ¨è¿­ä»£ç‚¹é™„è¿‘è¿›è¡Œæ³°å‹’å±•å¼€ï¼Œå¹¶é’ˆå¯¹æ›´æ–°é‡ä½œæœ€å°åŒ–å³å¯ã€‚ç”±äºæ³°å‹’å±•å¼€ä¹‹åå‡½æ•°å˜æˆäº†å¤šé¡¹å¼ï¼Œæ‰€ä»¥æ±‚è§£å¢é‡æ—¶åªéœ€è§£çº¿æ€§æ–¹ç¨‹å³å¯ï¼Œé¿å…äº†ç›´æ¥æ±‚å¯¼å‡½æ•°ä¸ºé›¶è¿™æ ·çš„éçº¿æ€§æ–¹ç¨‹çš„å›°éš¾ã€‚</p>
<p>ä¸è¿‡ï¼Œè¿™ä¸¤ç§æ–¹æ³•ä¹Ÿå­˜åœ¨å®ƒä»¬è‡ªèº«çš„é—®é¢˜ã€‚æœ€é€Ÿä¸‹é™æ³•è¿‡äºè´ªå¿ƒï¼Œå®¹æ˜“èµ°å‡ºé”¯é½¿è·¯çº¿ï¼Œåè€Œå¢åŠ äº†è¿­ä»£æ¬¡æ•°ã€‚è€Œç‰›é¡¿æ³•åˆ™éœ€è¦è®¡ç®—ç›®æ ‡å‡½æ•°çš„
<span class="math inline">\(\boldsymbol{H}\)</span>
çŸ©é˜µï¼Œè¿™åœ¨é—®é¢˜è§„æ¨¡è¾ƒå¤§æ—¶éå¸¸å›°éš¾ï¼Œæˆ‘ä»¬é€šå¸¸å€¾å‘äºé¿å… <span
class="math inline">\(\boldsymbol{H}\)</span>
çš„è®¡ç®—ã€‚æ‰€ä»¥ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬è¯¦ç»†åœ°ä»‹ç»ä¸¤ç±»æ›´åŠ å®ç”¨çš„æ–¹æ³•ï¼š Gauss-Newton å’Œ
Levenberg-Marquadt ã€‚</p>
<h2 id="gauss-newton">3. Gauss-Newton</h2>
<p>Gauss Newton æ˜¯æœ€ä¼˜åŒ–ç®—æ³•é‡Œé¢æœ€ç®€å•çš„æ–¹æ³•ä¹‹ä¸€ã€‚å®ƒçš„æ€æƒ³æ˜¯å°† <span
class="math inline">\(f(\boldsymbol{x})\)</span>
è¿›è¡Œä¸€é˜¶çš„æ³°å‹’å±•å¼€ï¼š<br />
<span class="math display">\[\label{å±€éƒ¨è¿‘ä¼¼}
f(\boldsymbol{x}+\Delta \boldsymbol{x}) \approx
f(\boldsymbol{x})+\boldsymbol{J}(\boldsymbol{x})\Delta\boldsymbol{x}
\]</span> è¿™é‡Œ <span
class="math inline">\(\boldsymbol{J}(\boldsymbol{x})\)</span> æ˜¯ <span
class="math inline">\(f(\boldsymbol{x})\)</span> å…³äº <span
class="math inline">\(\boldsymbol{x}\)</span> çš„å¯¼æ•°ï¼Œå®é™…ä¸Šæ˜¯ä¸€ä¸ª <span
class="math inline">\(m\times m\)</span>
çš„çŸ©é˜µï¼Œä¹Ÿæ˜¯ä¸€ä¸ªé›…å¯æ¯”çŸ©é˜µã€‚</p>
<div class="note danger"><p>è¿™é‡Œæ˜¯å¯¹ <span class="math inline">\(f(\boldsymbol{x})\)</span> åœ¨
<span class="math inline">\(\boldsymbol{x}\)</span>
å¤„è¿›è¡Œæ³°å‹’å±•å¼€ï¼Œè€Œä¸æ˜¯å¯¹ç›®æ ‡å‡½æ•°è¿›è¡Œæ³°å‹’å±•å¼€ï¼Œéœ€è¦å’Œ <a
href="#GM">æ¢¯åº¦æ³•</a> ä¸­è¿›è¡ŒåŒºåˆ†å¯¹æ¯”ï¼</p>
</div>
<p>æ ¹æ®å‰é¢çš„æ€æƒ³ï¼Œæˆ‘ä»¬å½“å‰çš„ç›®æ ‡æ˜¯ä¸ºäº†å¯»æ‰¾ä¸‹é™çŸ¢é‡ <span
class="math inline">\(\Delta\boldsymbol{x}\)</span>ï¼Œä½¿ <span
class="math inline">\(\|f(\boldsymbol{x}+\Delta\boldsymbol{x})\|_{2}^{2}\)</span>
è¾¾åˆ°æœ€å°ã€‚å³<br />
<span class="math display">\[
\Delta \boldsymbol{x}^{*}=arg\  \underset{\Delta \boldsymbol{x}}{min}
\frac{1}{2}\|f(\boldsymbol{x})+\boldsymbol{J}(\boldsymbol{x})\Delta\boldsymbol{x}\|_{2}^{2}
\]</span> å°†ç›®æ ‡å‡½æ•°å±•å¼€åŒ–ç®€å¾—ï¼š <span class="math display">\[
\begin{equation*}
\begin{aligned}
\frac{1}{2}\|f(\boldsymbol{x})+\boldsymbol{J}(\boldsymbol{x})\Delta\boldsymbol{x}\|_{2}^{2}&amp;=\frac{1}{2}(f(\boldsymbol{x})+\boldsymbol{J}(\boldsymbol{x})\Delta\boldsymbol{x})^T(f(\boldsymbol{x})+\boldsymbol{J}(\boldsymbol{x})\Delta\boldsymbol{x})
\\
&amp;=\frac{1}{2}(\|f(\boldsymbol{x})\|_{2}^{2} +
2f(\boldsymbol{x})^T\boldsymbol{J}(\boldsymbol{x}+\Delta\boldsymbol{x}^T
\boldsymbol{J}(\boldsymbol{x})^T\boldsymbol{J}(x)^T\Delta
\boldsymbol{x}))
\end{aligned}
\end{equation*}
\]</span></p>
<p>æ±‚ä¸Šè¿°ç›®æ ‡å‡½æ•°å¯¹ <span class="math inline">\(\Delta
\boldsymbol{x}\)</span> çš„å¯¼æ•°ï¼Œå¹¶ä»¤å…¶ä¸º 0ï¼š <span
class="math display">\[\nonumber
2\boldsymbol{J}(\boldsymbol{x})^T \boldsymbol{J}(\boldsymbol{x})\Delta
\boldsymbol{x}+2\boldsymbol{J}(\boldsymbol{x})^T f(\boldsymbol{x})=0
\]</span></p>
<p>å¯ä»¥å¾—åˆ°ï¼š <span class="math display">\[
\boldsymbol{J}(\boldsymbol{x})^T \boldsymbol{J}(\boldsymbol{x})\Delta
\boldsymbol{x}=-\boldsymbol{J}(\boldsymbol{x})^T f(\boldsymbol{x})
\]</span></p>
<p>æ³¨æ„ï¼Œæˆ‘ä»¬è¦æ±‚è§£çš„å˜é‡æ˜¯ <span class="math inline">\(\Delta
\boldsymbol{x}\)</span>ï¼Œå› æ­¤è¿™æ˜¯ä¸€ä¸ªçº¿æ€§æ–¹ç¨‹ç»„ï¼Œæˆ‘ä»¬ç§°å®ƒä¸º<strong>å¢é‡æ–¹ç¨‹</strong>ï¼Œä¹Ÿå¯ä»¥ç§°ä¸º<strong>é«˜æ–¯ç‰›é¡¿æ–¹ç¨‹</strong>
(Gauss Newton equations) æˆ–è€…<strong>æ­£è§„æ–¹ç¨‹</strong> (Normal
equations)ã€‚æˆ‘ä»¬æŠŠå·¦è¾¹çš„ç³»æ•°å®šä¹‰ä¸º <span
class="math inline">\(\boldsymbol{H}\)</span>ï¼Œå³è¾¹å®šä¹‰ä¸º <span
class="math inline">\(\boldsymbol{g}\)</span>ï¼Œé‚£ä¹ˆä¸Šå¼å˜ä¸ºï¼š<br />
<span class="math display">\[
\boldsymbol{H}\Delta \boldsymbol{x} = \boldsymbol{g}
\]</span></p>
<p>Gauss-Newton çš„æ­¥éª¤å¯ä»¥å†™ä¸ºï¼š</p>
<ol type="1">
<li>ç»™å®šåˆå€¼ <span
class="math inline">\(\boldsymbol{x}_0\)</span>ï¼›<br />
</li>
<li>å¯¹äºç¬¬ <span class="math inline">\(k\)</span>
æ¬¡è¿­ä»£ï¼Œæ±‚å‡ºå½“å‰çš„é›…å¯æ¯”çŸ©é˜µ <span
class="math inline">\(\boldsymbol{J}(\boldsymbol{x}_k)\)</span>
å’Œè¯¯å·®<span class="math inline">\(f(\boldsymbol{x}_k)\)</span>ï¼›<br />
</li>
<li>æ±‚è§£å¢é‡æ–¹ç¨‹ï¼š <span class="math inline">\(\boldsymbol{H}\Delta
\boldsymbol{x}_k = \boldsymbol{g}\)</span> ï¼›<br />
</li>
<li>å¦‚æœ <span class="math inline">\(\Delta \boldsymbol{x}_k\)</span>
è¶³å¤Ÿå°ï¼Œåˆ™åœæ­¢ï¼›å¦åˆ™ï¼Œä»¤ <span
class="math inline">\(\boldsymbol{x}_{k+1}=\boldsymbol{x}_k+\Delta
\boldsymbol{x}_k\)</span> ï¼Œè¿”å› 2ã€‚</li>
</ol>
<p><strong>æ±‚è§£å¢é‡æ–¹ç¨‹æ˜¯æ•´ä¸ªä¼˜åŒ–é—®é¢˜çš„æ ¸å¿ƒæ‰€åœ¨</strong>ã€‚</p>
<h3 id="å°ç»“-1">3.1 å°ç»“</h3>
<p>å’Œ äºŒé˜¶æ¢¯åº¦æ³•ï¼ˆç‰›é¡¿æ³•ï¼‰<span
class="math inline">\(\eqref{äºŒé˜¶æ¢¯åº¦æ³•}\)</span>
çš„å¢é‡è§£è¿›è¡Œå¯¹æ¯”ï¼Œå¯ä»¥å‘ç° Gauss-Newton ä¸­ç”¨ <span
class="math inline">\(\boldsymbol{J}^{T}\boldsymbol{J}\)</span>
ä½œä¸ºç‰›é¡¿æ³•ä¸­äºŒé˜¶ Hessian çŸ©é˜µçš„è¿‘ä¼¼ï¼Œä»è€Œçœç•¥äº†è®¡ç®— <span
class="math inline">\(\boldsymbol{H}\)</span> çš„è¿‡ç¨‹ã€‚</p>
<p>Gauss-Newton çš„æ ¸å¿ƒåœ¨äºæ±‚è§£å¢é‡æ–¹ç¨‹ï¼Œä½†å®ƒè¦æ±‚ <span
class="math inline">\(\boldsymbol{H}\)</span>
æ˜¯å¯é€†ä¸”æ­£å®šçš„ï¼Œä½†å®é™…ä¸­è®¡ç®—çš„ <span
class="math inline">\(\boldsymbol{H}=\boldsymbol{J}^{T}\boldsymbol{J}\)</span>
é€šå¸¸åªæ˜¯åŠæ­£å®šçš„ã€‚å› æ­¤ï¼Œåœ¨ä½¿ç”¨ Gauss-Newton çš„æ—¶å€™å¯èƒ½ä¼šå‡ºç° <span
class="math inline">\(\boldsymbol{H}\)</span>
æ˜¯å¥‡å¼‚æˆ–è€…ç—…æ€çš„æƒ…å†µï¼Œå¯¼è‡´ç®—æ³•ä¸æ”¶æ•›ã€‚æ›´ä¸¥é‡çš„æ˜¯ï¼Œå°±ç®—æˆ‘ä»¬å‡è®¾ <span
class="math inline">\(\boldsymbol{H}\)</span>
éå¥‡å¼‚ä¹Ÿéç—…æ€ï¼Œå¦‚æœæˆ‘ä»¬æ±‚å‡ºæ¥çš„æ­¥é•¿ <span class="math inline">\(\Delta
\boldsymbol{x}\)</span> å¤ªå¤§ï¼Œä¹Ÿä¼šå¯¼è‡´æˆ‘ä»¬é‡‡ç”¨çš„å±€éƒ¨è¿‘ä¼¼ <span
class="math inline">\(\eqref{å±€éƒ¨è¿‘ä¼¼}\)</span>
ä¸å¤Ÿå‡†ç¡®ï¼Œè¿™æ ·ä¸€æ¥æˆ‘ä»¬ç”šè‡³éƒ½æ— æ³•ä¿è¯å®ƒçš„è¿­ä»£æ”¶æ•›ï¼Œå“ªæ€•æ˜¯è®©ç›®æ ‡å‡½æ•°å˜å¾—æ›´å¤§éƒ½æ˜¯æœ‰å¯èƒ½çš„ã€‚</p>
<p>å°½ç®¡ Gauss-Newton
æœ‰è¿™äº›ç¼ºç‚¹ï¼Œä½†æ˜¯å®ƒä¾ç„¶å€¼å¾—æˆ‘ä»¬å»å­¦ä¹ ï¼Œå› ä¸ºåœ¨éçº¿æ€§ä¼˜åŒ–é‡Œï¼Œç›¸å½“å¤šçš„ç®—æ³•éƒ½å¯ä»¥å½’ç»“ä¸º
Gauss-Newton çš„å˜ç§ã€‚è¿™äº›ç®—æ³•éƒ½å€ŸåŠ©äº† Gauss-Newton
æ³•çš„æ€æƒ³å¹¶ä¸”é€šè¿‡è‡ªå·±çš„æ”¹è¿›ä¿®æ­£ Gauss-Newton æ³•çš„ç¼ºç‚¹ã€‚ä¾‹å¦‚ä¸€äº›çº¿æœç´¢æ–¹æ³•
(line search method)ï¼Œè¿™ç±»æ”¹è¿›å°±æ˜¯åŠ å…¥äº†ä¸€ä¸ªæ ‡é‡ <span
class="math inline">\(\alpha\)</span>ï¼Œåœ¨ç¡®å®šäº† <span
class="math inline">\(\Delta \boldsymbol{x}\)</span> è¿›ä¸€æ­¥æ‰¾åˆ° <span
class="math inline">\(\alpha\)</span> ä½¿å¾— <span
class="math inline">\(\|f(\boldsymbol{x}+\alpha \Delta
\boldsymbol{x})\|_{2}^{2}\)</span> è¾¾åˆ°æœ€å°ï¼Œè€Œä¸æ˜¯åƒ Gauss-Newton
æ³•é‚£æ ·ç®€å•åœ°ä»¤ <span class="math inline">\(Î± = 1\)</span>ã€‚</p>
<p>Levenberg-Marquadt
æ–¹æ³•åœ¨ä¸€å®šç¨‹åº¦ä¸Šä¿®æ­£äº†è¿™äº›é—®é¢˜ï¼Œè¢«ç§°ä¹‹ä¸ºé˜»å°¼ç‰›é¡¿æ³•(Damped Newton
Method)ï¼Œä¸€èˆ¬è®¤ä¸ºå®ƒæ¯”é«˜æ–¯ç‰›é¡¿æ›´ä¸ºé²æ£’ã€‚å°½ç®¡å®ƒçš„æ”¶æ•›é€Ÿåº¦å¯èƒ½ä¼šæ¯”é«˜æ–¯ç‰›é¡¿æ›´æ…¢ï¼Œä½†æ˜¯åœ¨
SLAM é‡Œé¢å´è¢«å¤§é‡åº”ç”¨ã€‚</p>
<h2 id="levenberg-marquadt">4. Levenberg-Marquadt</h2>
<p>å‰æ–‡æåˆ°å½“ <span class="math inline">\(\Delta \boldsymbol{x}\)</span>
å¤ªå¤§æ—¶ï¼ŒGauss-Newton æ–¹æ³•ä¸­é‡‡ç”¨çš„è¿‘ä¼¼äºŒé˜¶æ³°å‹’å±•å¼€ <span
class="math inline">\(\eqref{å±€éƒ¨è¿‘ä¼¼}\)</span>
å­˜åœ¨ä¸å¤Ÿå‡†ç¡®çš„é—®é¢˜ï¼Œå¾ˆè‡ªç„¶çš„æƒ³åˆ°å¯¹ <span class="math inline">\(\Delta
\boldsymbol{x}\)</span> å¢åŠ ä¸€ä¸ªä¿¡èµ–åŒºåŸŸ (Trust Region)ï¼Œä¸èƒ½è®© <span
class="math inline">\(\Delta \boldsymbol{x}\)</span>
å› å¤ªå¤§è€Œä½¿å¾—è¿‘ä¼¼ä¸å¤Ÿå‡†å´ã€‚è¿™ç§æ·»åŠ ä¿¡èµ–åŒºåŸŸçš„æ–¹æ³•åœ¨éçº¿æ€§ä¼˜åŒ–ä¸­è¢«ç§°ä¸º
<strong>ä¿¡èµ–åŒºåŸŸæ–¹æ³• (Trust Region Method)</strong>
ã€‚åªæœ‰åœ¨è§„å®šçš„ä¿¡èµ–åŒºåŸŸä¸­çš„ <span class="math inline">\(\Delta
\boldsymbol{x}\)</span> æ‰è®¤ä¸ºè¿‘ä¼¼æ˜¯æœ‰æ•ˆçš„ã€‚<br />
é‚£ä¹ˆå¦‚ä½•ç¡®å®šè¿™ä¸ªä¿¡èµ–åŒºåŸŸçš„èŒƒå›´å‘¢ï¼Ÿä¸€ä¸ªæ¯”è¾ƒå¥½çš„æ–¹æ³•æ˜¯æ ¹æ®æˆ‘ä»¬çš„è¿‘ä¼¼æ¨¡å‹è·Ÿå®é™…å‡½æ•°ä¹‹é—´çš„å·®å¼‚æ¥ç¡®å®šè¿™ä¸ªèŒƒå›´ï¼šå¦‚æœå·®å¼‚å°ï¼Œæˆ‘ä»¬å°±è®©èŒƒå›´å°½å¯èƒ½å¤§ï¼›å¦‚æœå·®å¼‚å¤§ï¼Œæˆ‘ä»¬å°±ç¼©å°è¿™ä¸ªè¿‘ä¼¼èŒƒå›´ã€‚å› æ­¤ï¼Œè€ƒè™‘ä½¿ç”¨ä¸‹å¼æ¥åˆ¤æ–­æ³°å‹’è¿‘ä¼¼æ˜¯å¦å¤Ÿå¥½ã€‚
<span class="math display">\[
\rho=\frac{f(\boldsymbol{x+\Delta
\boldsymbol{x}})-f(\boldsymbol{x})}{\boldsymbol{J}(\boldsymbol{x})\Delta
\boldsymbol{x}}=\frac{å®é™…å‡½æ•°ä¸‹é™å€¼}{è¿‘ä¼¼æ¨¡å‹ä¸‹é™å€¼}
\]</span> æ˜¾ç„¶ï¼Œå½“ <span class="math inline">\(\rho \rightarrow
1\)</span> æ—¶ï¼Œè¿‘ä¼¼æ•ˆæœæœ€å¥½ï¼›<br />
å½“ <span class="math inline">\(\rho \ll 1\)</span>
æ—¶ï¼Œè¯´æ˜å®é™…ä¸‹é™å€¼è¿œå°äºè¿‘ä¼¼ä¸‹é™å€¼ï¼Œæˆ‘ä»¬éœ€è¦ç¼©å°è¿‘ä¼¼èŒƒå›´ï¼Œå³å‡å° <span
class="math inline">\(\Delta \boldsymbol{x}\)</span> ï¼›<br />
å½“ <span class="math inline">\(\rho \gg 1\)</span>
æ—¶ï¼Œè¯´æ˜å®é™…ä¸‹é™å€¼è¿œå¤§äºè¿‘ä¼¼ä¸‹é™å€¼ï¼Œæˆ‘ä»¬éœ€è¦å¢å¤§è¿‘ä¼¼èŒƒå›´ï¼Œå³å¢å¤§ <span
class="math inline">\(\Delta \boldsymbol{x}\)</span> ã€‚</p>
<p>ä¾æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥æ”¹è¿› Gauss-Newton éçº¿æ€§ä¼˜åŒ–çš„æ¡†æ¶ï¼š</p>
<ol type="1">
<li>ç»™å®šåˆå§‹å€¼ <span
class="math inline">\(\boldsymbol{x}_0\)</span>ï¼Œä»¥åŠåˆå§‹ä¼˜åŒ–åŠå¾„ <span
class="math inline">\(\mu\)</span>ï¼›</li>
<li>å¯¹äºç¬¬ <span class="math inline">\(k\)</span> æ¬¡è¿­ä»£ï¼Œæ±‚è§£ï¼š<span
class="math display">\[\label{L-M} \underset{\Delta
\boldsymbol{x}_k}{min}
\frac{1}{2}\|f(\boldsymbol{x}_k)+\boldsymbol{J}(\boldsymbol{x}_k)\Delta
\boldsymbol{x}_k\|_{2}^{2},\ s.t.\|\boldsymbol{D}\Delta
\boldsymbol{x}_k\|^{2}\le \mu\]</span> è¿™é‡Œ <span
class="math inline">\(\mu\)</span> æ˜¯ä¿¡èµ–åŒºåŸŸçš„åŠå¾„ï¼Œ<span
class="math inline">\(\boldsymbol{D}\)</span> æ˜¯ä¸€ä¸ªè°ƒæ•´çŸ©é˜µ</li>
<li>è®¡ç®— <span class="math inline">\(\rho\)</span>ï¼›</li>
<li>å¦‚æœ <span class="math inline">\(\rho \gt \frac{3}{4}\)</span>ï¼Œåˆ™
<span class="math inline">\(\mu = 2\mu\)</span>ï¼›å¦‚æœ <span
class="math inline">\(\rho \lt \frac{1}{4}\)</span>ï¼Œåˆ™ <span
class="math inline">\(\mu = 0.5\mu\)</span>ï¼›å¦åˆ™ï¼Œ<span
class="math inline">\(\mu\)</span>
ä¿æŒä¸å˜ã€‚è¿™é‡Œçš„é˜ˆå€¼å’Œæ‰©å¤§å€æ•°éƒ½æ˜¯ç»éªŒå€¼ï¼Œå¯è§†æƒ…å†µè°ƒæ•´ï¼›</li>
<li>å¦‚æœ <span class="math inline">\(\rho\)</span>
å¤§äºæŸé˜ˆå€¼ï¼Œè®¤ä¸ºè¿‘ä¼¼å¯è¡Œã€‚ä»¤ <span
class="math inline">\(\boldsymbol{x}_{k+1}=\boldsymbol{x}_k+\Delta
\boldsymbol{x}_k\)</span>ï¼›</li>
<li>åˆ¤æ–­ç®—æ³•æ˜¯å¦æ”¶æ•›ã€‚å¦‚æœä¸æ”¶æ•›åˆ™è¿”å›2ï¼Œå¦åˆ™ç»“æŸã€‚</li>
</ol>
<p>å…³äº <span class="math inline">\(\eqref{L-M}\)</span> ä¸­ <span
class="math inline">\(\boldsymbol{D}\)</span> çš„è¯´æ˜ï¼š<br />
å½“ <span class="math inline">\(\boldsymbol{D}=\boldsymbol{I}\)</span>
æ—¶ï¼Œè¿™é‡Œçš„çº¦æŸæ¡ä»¶å¯çœ‹ä½œæ˜¯å°† <span class="math inline">\(\Delta
\boldsymbol{x}\)</span> çº¦æŸåœ¨ä¸€ä¸ªåŠå¾„ä¸º <span
class="math inline">\(\mu\)</span> çš„çƒå†…ï¼›å½“ <span
class="math inline">\(\boldsymbol{D} \ne \boldsymbol{I}\)</span>
æ—¶ï¼Œå¯ä»¥è®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªæ¤­çƒã€‚ åœ¨ L-M ç®—æ³•ä¸­ï¼Œå– <span
class="math inline">\(\boldsymbol{D}\)</span> ä¸ºéè´Ÿå¯¹è§’çŸ©é˜µï¼ˆç”± <span
class="math inline">\(\boldsymbol{J}^{T}\boldsymbol{J}\)</span>
çš„å¯¹è§’å…ƒç´ å¹³æ–¹æ ¹æ„æˆï¼‰ï¼Œä½¿å¾—åœ¨æ¢¯åº¦å°çš„ç»´åº¦ä¸Šçº¦æŸèŒƒå›´æ›´å¤§ä¸€äº›ã€‚</p>
<p>æ ¹æ®<span class="math inline">\(\eqref{L-M}\)</span> æ±‚è§£å¢é‡ï¼Œ
æ‹‰æ ¼æœ—æ—¥æ³•ï¼š <span class="math display">\[
\nonumber
L=\frac{1}{2}\|f(\boldsymbol{x}_k)+\boldsymbol{J}(\boldsymbol{x}_k)\Delta
\boldsymbol{x}_k\|_{2}^{2}+\frac{\lambda}{2}\|\boldsymbol{D}\Delta\boldsymbol{x}_k\|_{2}^{2},\lambda
\gt 0
\]</span> ä»¤åå¯¼ä¸º0ï¼Œå¯å¾—å¢é‡æ–¹ç¨‹ï¼š <span class="math display">\[
\frac{\partial L}{\partial \Delta\boldsymbol{x}_k}=\boldsymbol{0}
\Longrightarrow (\boldsymbol{H}+\lambda
\boldsymbol{D}^{T}\boldsymbol{D})\Delta \boldsymbol{x}_k=\boldsymbol{g}
\]</span></p>
<p>ä»ç»“æœæ¥çœ‹ï¼Œå½“ <span class="math inline">\(\lambda\)</span>
è¾ƒå°æ—¶ï¼Œ<span class="math inline">\(\boldsymbol{H}\)</span>
å ä¸»å¯¼åœ°ä½ï¼Œè¯´æ˜äºŒæ¬¡è¿‘ä¼¼æ¨¡å‹æ•ˆæœåœ¨è¯¥èŒƒå›´å†…æ˜¯æ¯”è¾ƒå¥½çš„ï¼Œæ­¤æ—¶ L-M æ³•æ¥è¿‘äº
G-N æ³•ï¼›å½“ <span class="math inline">\(\lambda\)</span> è¾ƒå¤§æ—¶ï¼Œè€ƒè™‘
<span class="math inline">\(\boldsymbol{D}=\boldsymbol{I}\)</span>
çš„ç®€åŒ–å½¢å¼ï¼Œæ­¤æ—¶ <span class="math inline">\(\lambda \boldsymbol{D}^T
\boldsymbol{D}=\lambda \boldsymbol{I}\)</span>
å ä¸»å¯¼åœ°ä½ï¼Œè¯´æ˜äºŒæ¬¡è¿‘ä¼¼çš„ä¸å¤Ÿå¥½ï¼Œæ­¤æ—¶ L-M æ³•æ›´æ¥è¿‘äº
ä¸€é˜¶æ¢¯åº¦ä¸‹é™æ³•ï¼ˆæœ€é€Ÿä¸‹é™æ³•ï¼‰ã€‚</p>
<p>L-M
çš„æ±‚è§£æ–¹å¼ï¼Œå¯åœ¨ä¸€å®šç¨‹åº¦ä¸Šé¿å…çº¿æ€§æ–¹ç¨‹ç»„çš„ç³»æ•°çŸ©é˜µçš„éå¥‡å¼‚å’Œç—…æ€é—®é¢˜ï¼Œæä¾›æ›´ç¨³å®šæ›´å‡†ç¡®çš„å¢é‡
<span class="math inline">\(\Delta \boldsymbol{x}\)</span>ã€‚</p>
<p>æ€»è€Œè¨€ä¹‹ï¼Œéçº¿æ€§ä¼˜åŒ–é—®é¢˜çš„æ¡†æ¶ï¼Œåˆ†ä¸º Line Search å’Œ Trust Region
ä¸¤ç±»ã€‚<br />
Line Search å…ˆå›ºå®šæœç´¢æ–¹å‘ï¼Œç„¶ååœ¨è¯¥æ–¹å‘å¯»æ‰¾æ­¥é•¿ï¼Œä»¥æœ€é€Ÿä¸‹é™æ³•å’Œ
Gauss-Newton æ³•ä¸ºä»£è¡¨ã€‚è€Œ TrustRegion
åˆ™å…ˆå›ºå®šæœç´¢åŒºåŸŸï¼Œå†è€ƒè™‘æ‰¾è¯¥åŒºåŸŸå†…çš„æœ€ä¼˜ç‚¹ã€‚æ­¤ç±»æ–¹æ³•ä»¥ L-M
ä¸ºä»£è¡¨ã€‚å®é™…é—®é¢˜ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸é€‰æ‹© G-N æˆ– L-M ä¹‹ä¸€ä½œä¸ºæ¢¯åº¦ä¸‹é™ç­–ç•¥ã€‚</p>
<h2 id="å‚è€ƒèµ„æ–™">5. å‚è€ƒèµ„æ–™</h2>
<p><strong>[1]</strong> è§†è§‰ SLAM åå››è®² â€”â€” é«˜ç¿”</p>
]]></content>
      <categories>
        <category>æœ€ä¼˜åŒ–</category>
        <category>éçº¿æ€§æœ€å°äºŒä¹˜</category>
      </categories>
      <tags>
        <tag>Levenberg-Marquadt</tag>
      </tags>
  </entry>
  <entry>
    <title>Bæ ·æ¡æ›²çº¿ç®€ä»‹åŠå…¶pythonå®ç°</title>
    <url>/2025/01/08/B%E6%A0%B7%E6%9D%A1%E6%9B%B2%E7%BA%BF/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><span id="more"></span>
<h2 id="bæ ·æ¡æ›²çº¿çš„è®¡ç®—å…¬å¼">1. Bæ ·æ¡æ›²çº¿çš„è®¡ç®—å…¬å¼</h2>
<p>B æ ·æ¡æ›²çº¿ <span class="math inline">\(P(u)\)</span>
å¯ä»¥è¡¨ç¤ºä¸ºæ§åˆ¶ç‚¹å’ŒåŸºå‡½æ•°çš„åŠ æƒå’Œï¼š <span class="math display">\[
P(u)=\sum_{i=0}^{n} {p_i B_{i,k}(u)} \ ,u\in \left[ u_{k-1}, u_{k+1}
\right]
\tag{1}
\]</span></p>
<h2 id="ç¬¦å·è§£é‡Š">2. ç¬¦å·è§£é‡Š</h2>
<h3 id="pu">2.1 <span class="math inline">\(P(u)\)</span></h3>
<p>B æ ·æ¡æ›²çº¿ä¸Šçš„ç‚¹ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬æ‰€è¦æ±‚çš„ç»“æœã€‚</p>
<h3 id="p_i">2.2 <span class="math inline">\(p_i\)</span></h3>
<p>æ§åˆ¶ç‚¹ï¼Œ <span class="math inline">\(i=0,1,2,..,n\)</span>ï¼Œä¸€å…±æœ‰
<span class="math inline">\(n+1\)</span> ä¸ªã€‚</p>
<h3 id="b_ik">2.3 <span class="math inline">\(B_{i,k}\)</span></h3>
<p>åŸºå‡½æ•°</p>
<h3 id="u">2.4 <span class="math inline">\(u\)</span> <span
id="2.4"></span></h3>
<p>ç›¸å½“äºè‡ªå˜é‡ï¼Œæœ‰æ•ˆåŒºé—´ä¸º <span class="math inline">\(\left[ u_{k-1},
u_{k+1} \right]\)</span>ã€‚</p>
<h3 id="k">2.5 <span class="math inline">\(k\)</span></h3>
<p>B
æ ·æ¡æ›²çº¿çš„<strong>æ¬¡æ•°</strong>ï¼Œè¿™é‡Œè¦æ³¨æ„æ¬¡æ•°å’Œé˜¶æ•°çš„åŒºåˆ«å’Œè”ç³»ï¼šæ¬¡æ•°
= é˜¶æ•° - 1ã€‚</p>
<p>å¯¹äº B æ ·æ¡çš„æ¬¡æ•° <span
class="math inline">\(k\)</span>ï¼Œå¿…é¡»æ»¡è¶³ï¼š<span id="(2)"></span> <span
class="math display">\[k = m - n - 1 \tag{2}\]</span> å…¶ä¸­ <span
class="math inline">\(m\)</span><span id="m"></span> æ˜¯ <strong>èŠ‚ç‚¹
(knots)</strong> å°† B æ ·æ¡æ›²çº¿åˆ’åˆ†çš„æ®µæ•°ï¼Œ<span
class="math inline">\(n\)</span> ä¸ºæ§åˆ¶ç‚¹çš„ä¸ªæ•°å‡ä¸€ã€‚</p>
<p>ä¸Šé¢è¯´çš„èŠ‚ç‚¹å°±æ˜¯åˆ’åˆ† B
æ ·æ¡çš„æ¯”ä¾‹ï¼Œç”±èŠ‚ç‚¹ç»„æˆçš„ä¸€ç»„å‘é‡å°±æˆä¸ºèŠ‚ç‚¹çŸ¢é‡ï¼Œä¾‹å¦‚
<code>[0, 0.2, 0.4, 0.6, 0.8, 1]</code>ã€‚ä¸åŒçš„èŠ‚ç‚¹çŸ¢é‡è¿›è€Œäº§ç”Ÿäº†ä¸åŒçš„
B æ ·æ¡ç§ç±»ï¼Œä¾‹å¦‚å‡åŒ€ B æ ·æ¡ã€å‡†å‡åŒ€ B æ ·æ¡ã€åˆ†æ®µ B æ ·æ¡ä»¥åŠéå‡åŒ€ B
æ ·æ¡ç­‰ç­‰ã€‚</p>
<h2 id="åŸºå‡½æ•°çš„è®¡ç®—">3. åŸºå‡½æ•°çš„è®¡ç®—</h2>
<p>de Boor-Coxé€’å½’æ–¹æ³•<br />
<span class="math display">\[
B_{i,k}(u)=\frac{u-u_i}{u_{i+1}-u_i}B_{i,k-1}(u)+\frac{u_{i+k}-u}{u_{i+k}-u_{i+1}}B_{i+1,k-1}(u)
\tag{3}
\]</span></p>
<p>è¿™é‡Œéœ€è¦ç»™å‡ºè¯´æ˜ï¼Œä¸å¸¦ä¸‹æ ‡çš„ <span class="math inline">\(u\)</span>
æŒ‡çš„æ˜¯ <a href="#2.4">2.4</a> ä¸­çš„ <span
class="math inline">\(u\)</span>ï¼Œè€Œå¸¦ä¸‹æ ‡åˆ™æŒ‡çš„æ˜¯èŠ‚ç‚¹çŸ¢é‡ã€‚</p>
<p>åœ¨ä»£ç å®ç°ä¸­ï¼Œæˆ‘ä»¬è§„å®š <span
class="math inline">\(\frac{0}{0}=0\)</span>ã€‚</p>
<h2 id="èŠ‚ç‚¹çŸ¢é‡-knots-çš„è®¡ç®—">4. èŠ‚ç‚¹çŸ¢é‡ (knots) çš„è®¡ç®—</h2>
<p>èŠ‚ç‚¹çŸ¢é‡çš„å–å€¼å¯ä»¥æ˜¯åœ¨ 0 åˆ° 1
ä¹‹é—´ï¼Œä¹Ÿå¯ä»¥æ˜¯å…¶ä»–èŒƒå›´ï¼Œä½†æ˜¯åœ¨ä»£ç æ˜¯å®ç°çš„æ—¶å€™ä¸€å®šè¦æ³¨æ„å‰åä¿æŒä¸€è‡´ã€‚<br />
æœ¬æ–‡ä½¿ç”¨èŠ‚ç‚¹çŸ¢é‡å–å€¼ä¸º 0 åˆ° 1ï¼Œè¿™æ ·ä¹Ÿå¯ä»¥è¡¨ç¤ºæ¯”ä¾‹å˜›ã€‚</p>
<p>è¿™é‡Œéœ€è¦æ³¨æ„èŠ‚çŸ¢é‡çš„é•¿åº¦ï¼Œä¹Ÿå°±æ˜¯ <span
class="math inline">\(m\)</span>ï¼Œé€šè¿‡å¼ <a href="#(2)">(2)</a>
å¯çŸ¥ï¼Œ<span class="math inline">\(m=k+n+1\)</span>ã€‚</p>
<h3 id="å‡åŒ€èŠ‚ç‚¹-uniform-node">4.1 å‡åŒ€èŠ‚ç‚¹ (uniform node)</h3>
<p>æ˜¾ç„¶ï¼ŒèŠ‚ç‚¹çš„åˆ†å¸ƒæ˜¯å‡åŒ€çš„ï¼Œæ•…ä» 0 åˆ°
1æŒ‰ç…§èŠ‚ç‚¹çŸ¢é‡çš„é•¿åº¦å‡åŒ€åˆ’åˆ†å³å¯ã€‚<br />
ï¼ˆå› ä¸ºè¦å°†æ›²çº¿åˆ’åˆ†ä¸º <a href="#m">m</a> æ®µï¼Œå½“ç„¶éœ€è¦ m+1ä¸ªç‚¹ï¼‰</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">uniform_node</span>(<span class="params">control_points, k=<span class="number">3</span></span>):</span><br><span class="line">    num, _ = control_points.shape</span><br><span class="line">    n = num - <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> np.linspace(<span class="number">0</span>, <span class="number">1</span>, n + k + <span class="number">2</span>)  <span class="comment"># m = n + k + 1</span></span><br></pre></td></tr></table></figure>
<p>å‡åŒ€ B æ ·æ¡æ›²çº¿ä¸ä¸€å®šè¿‡é¦–å°¾æ§åˆ¶ç‚¹ï¼Œå¹¶ä¸”åœ¨å›¾åƒä¸Šæ˜¯é—­åˆçš„</p>
<h3 id="å‡†å‡åŒ€èŠ‚ç‚¹-quasi-uniform-node">4.2 å‡†å‡åŒ€èŠ‚ç‚¹ (quasi uniform
node)</h3>
<p>å‡†å‡åŒ€èŠ‚ç‚¹å¯ä»¥ç›®çš„åœ¨äºå¯¹æ›²çº¿çš„ç«¯ç‚¹è¿›è¡Œè¡Œä¸ºæ§åˆ¶ï¼Œé€šè¿‡è®¾è®¡èŠ‚ç‚¹çŸ¢é‡ï¼Œä½¿å¾—ç”Ÿæˆçš„
B æ ·æ¡æ›²çº¿ç»è¿‡é¦–å°¾æ§åˆ¶ç‚¹ã€‚<br />
<span class="math inline">\(k\)</span>
æ¬¡å‡†å‡åŒ€èŠ‚ç‚¹çŸ¢é‡ä¸­ï¼Œä¸¤ç«¯èŠ‚ç‚¹å…·æœ‰é‡å¤åº¦ <span
class="math inline">\(k+1\)</span>ï¼Œæ‰€æœ‰å†…èŠ‚ç‚¹å‘ˆç°å‡åŒ€åˆ†å¸ƒã€‚<br />
åœ¨ä»£ç å®ç°ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è®©èŠ‚ç‚¹çŸ¢é‡é¦–å°¾åˆ†åˆ«ä¸º <span
class="math inline">\(k\)</span> ä¸ª 0 å’Œ 1ï¼Œç„¶åä¸­é—´ <span
class="math inline">\(n-k+2\)</span> ä¸º 0 åˆ° 1 çš„å‡åŒ€åˆ†å¸ƒå°±è¡Œäº†ï¼Œå³
<span class="math display">\[ \nonumber
\left[ \begin{matrix}
\underset{k}{\underbrace{0,0,...,0}},\
\underset{n-k+2}{\underbrace{0,...,1}},\
\underset{k}{\underbrace{1,1,...,1}}\\
\end{matrix} \right]
\]</span></p>
<figure class="highlight python"><figcaption><span>python</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">quasi_uniform_node</span>(<span class="params">control_points, k=<span class="number">3</span></span>):</span><br><span class="line">    num, _ = control_points.shape</span><br><span class="line">    n = num - <span class="number">1</span></span><br><span class="line">    mid = np.linspace(<span class="number">0</span>, <span class="number">1</span>, n - k + <span class="number">2</span>)</span><br><span class="line">    <span class="keyword">return</span> np.r_[np.zeros(k), mid, np.ones(k)]  <span class="comment"># æ‹¼æ¥</span></span><br></pre></td></tr></table></figure>
<h3 id="åˆ†æ®µèŠ‚ç‚¹-piecewise-node">4.3 åˆ†æ®µèŠ‚ç‚¹ (piecewise node)</h3>
<p>åŸºäºè¯¥èŠ‚ç‚¹çŸ¢é‡çš„ B æ ·æ ·æ¡æ›²çº¿åˆç§°ä¸ºåˆ†æ®µ Bezier
æ›²çº¿ï¼Œæ˜¯ä¸€ç»„é¡ºåºé¦–å°¾ç›¸æ¥ä¸”åŒä¸º <span class="math inline">\(k\)</span>
æ¬¡çš„ Bezier æ›²çº¿ã€‚<br />
<span class="math inline">\(k\)</span>
æ¬¡çš„åˆ†æ®µèŠ‚ç‚¹çŸ¢é‡ä¸­ï¼Œé¦–æœ«ç«¯èŠ‚ç‚¹é‡å¤åº¦ä¾æ—§ä¸º <span
class="math inline">\(k+1\)</span>ï¼Œå†…èŠ‚ç‚¹é‡å¤åº¦ä¸º <span
class="math inline">\(k\)</span></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">piecewise_node</span>(<span class="params">control_points, k=<span class="number">3</span></span>):</span><br><span class="line">    num, _ = control_points.shape</span><br><span class="line">    n = num - <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">## restricted condition</span></span><br><span class="line">    <span class="keyword">assert</span> (n - k) % k == <span class="number">0</span>, <span class="string">&quot;input is valid.&quot;</span></span><br><span class="line"></span><br><span class="line">    tmp = np.linspace(<span class="number">0</span>, <span class="number">1</span>, <span class="built_in">int</span>((n - k) / k + <span class="number">2</span>))</span><br><span class="line">    mid = np.r_[tmp[<span class="number">0</span>], np.repeat(tmp[<span class="number">1</span>:-<span class="number">1</span>], k), tmp[-<span class="number">1</span>]]</span><br><span class="line">    <span class="keyword">return</span> np.r_[np.zeros(k), mid, np.ones(k)]</span><br></pre></td></tr></table></figure>
<p>éœ€è¦æ³¨æ„ <span class="math inline">\(n-k\)</span> å¿…é¡»æ˜¯ <span
class="math inline">\(k\)</span> çš„æ•´æ•°å€ï¼Œå¦åˆ™ä¸èƒ½ç”Ÿæˆæ›²çº¿ã€‚</p>
<h3 id="éå‡åŒ€èŠ‚ç‚¹-non-uniform-node">4.4 éå‡åŒ€èŠ‚ç‚¹ (non-uniform
node)</h3>
<p>Hartley-Judd ç®—æ³• é¦–å°¾é‡åˆåº¦ä¸º <span
class="math inline">\(k+1\)</span>ï¼Œå†…èŠ‚ç‚¹å®šä¹‰ä¸ºï¼š</p>
<p><span class="math display">\[
\begin{cases}
t_k=0\\
t_i=\sum_{j=k+1}^i{\bigl( t_j-t_{j-1} \bigr)} \\
t_{n+1}=1\\
\end{cases}
\tag{4}
\]</span> <span class="math display">\[
t_i-t_{i-1}=\frac{\sum_{j=i-k}^{i-1}{l_j}}{\sum_{i=k+1}^{n+1}{\sum_{j=i-k}^{i-1}{l_j}}}
\tag{5}
\]</span></p>
<figure class="highlight python"><figcaption><span>python</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">non_uniform_node</span>(<span class="params">control_points, k=<span class="number">3</span></span>):</span><br><span class="line">    num, _ = control_points.shape</span><br><span class="line">    n = num - <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    l = np.sqrt(np.<span class="built_in">sum</span>(np.diff(control_points, axis=<span class="number">0</span>) ** <span class="number">2</span>, axis=<span class="number">1</span>))</span><br><span class="line">    ll = l[<span class="number">0</span> : <span class="built_in">len</span>(l) - <span class="number">1</span>] + l[<span class="number">1</span>::]</span><br><span class="line">    L = np.<span class="built_in">sum</span>(ll)</span><br><span class="line"></span><br><span class="line">    mid_size = n - k</span><br><span class="line">    mid = np.zeros(mid_size)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(mid_size):</span><br><span class="line">        mid[i] = np.<span class="built_in">sum</span>(ll[<span class="number">0</span> : i + <span class="number">1</span>]) / L</span><br><span class="line"></span><br><span class="line">    knots = np.r_[np.zeros(k + <span class="number">1</span>), mid, np.ones(k + <span class="number">1</span>)]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> knots</span><br></pre></td></tr></table></figure>
<h2 id="python-å®ç°">5. python å®ç°</h2>
<figure class="highlight python"><figcaption><span>python</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">uniform_node</span>(<span class="params">control_points, k=<span class="number">3</span></span>):</span><br><span class="line">    num, _ = control_points.shape</span><br><span class="line">    n = num - <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> np.linspace(<span class="number">0</span>, <span class="number">1</span>, n + k + <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">quasi_uniform_node</span>(<span class="params">control_points, k=<span class="number">3</span></span>):</span><br><span class="line">    num, _ = control_points.shape</span><br><span class="line">    n = num - <span class="number">1</span></span><br><span class="line">    mid = np.linspace(<span class="number">0</span>, <span class="number">1</span>, n - k + <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> np.r_[np.zeros(k), mid, np.ones(k)]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">piecewise_node</span>(<span class="params">control_points, k=<span class="number">3</span></span>):</span><br><span class="line">    num, _ = control_points.shape</span><br><span class="line">    n = num - <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">## restricted condition</span></span><br><span class="line">    <span class="keyword">assert</span> (n - k) % k == <span class="number">0</span>, <span class="string">&quot;input is valid.&quot;</span></span><br><span class="line"></span><br><span class="line">    tmp = np.linspace(<span class="number">0</span>, <span class="number">1</span>, <span class="built_in">int</span>((n - k) / k + <span class="number">2</span>))</span><br><span class="line">    mid = np.r_[tmp[<span class="number">0</span>], np.repeat(tmp[<span class="number">1</span>:-<span class="number">1</span>], k), tmp[-<span class="number">1</span>]]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> np.r_[np.zeros(k), mid, np.ones(k)]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">non_uniform_node</span>(<span class="params">control_points, k=<span class="number">3</span></span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    Hartley-Judd algorithem</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    num, _ = control_points.shape</span><br><span class="line">    n = num - <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    l = np.sqrt(np.<span class="built_in">sum</span>(np.diff(control_points, axis=<span class="number">0</span>) ** <span class="number">2</span>, axis=<span class="number">1</span>))</span><br><span class="line">    ll = l[<span class="number">0</span> : <span class="built_in">len</span>(l) - <span class="number">1</span>] + l[<span class="number">1</span>::]</span><br><span class="line">    L = np.<span class="built_in">sum</span>(ll)</span><br><span class="line"></span><br><span class="line">    mid_size = n - k</span><br><span class="line">    mid = np.zeros(mid_size)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(mid_size):</span><br><span class="line">        mid[i] = np.<span class="built_in">sum</span>(ll[<span class="number">0</span> : i + <span class="number">1</span>]) / L</span><br><span class="line"></span><br><span class="line">    knots = np.r_[np.zeros(k + <span class="number">1</span>), mid, np.ones(k + <span class="number">1</span>)]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> knots</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">cal_B</span>(<span class="params">i, k, knots, u</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    de Boor-Cox recursion</span></span><br><span class="line"><span class="string">    Args:</span></span><br><span class="line"><span class="string">        i (int): ith point idx</span></span><br><span class="line"><span class="string">        k (int): degree of b-spline , equal to ord - 1</span></span><br><span class="line"><span class="string">        knots (ndarray): 1 dim</span></span><br><span class="line"><span class="string">        u : independent variable</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Returns:</span></span><br><span class="line"><span class="string">        B: B_&#123;i,k&#125;</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">if</span> k == <span class="number">1</span>:</span><br><span class="line">        B = <span class="number">1</span> <span class="keyword">if</span> knots[i] &lt;= u &lt;= knots[i + <span class="number">1</span>] <span class="keyword">else</span> <span class="number">0</span>  <span class="comment">##</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        coef1 = coef2 = <span class="number">0</span></span><br><span class="line">        <span class="keyword">if</span> knots[i + k - <span class="number">1</span>] - knots[i] != <span class="number">0</span>:</span><br><span class="line">            coef1 = (u - knots[i]) / (knots[i + k - <span class="number">1</span>] - knots[i])</span><br><span class="line">        <span class="keyword">if</span> knots[i + k] - knots[i + <span class="number">1</span>] != <span class="number">0</span>:</span><br><span class="line">            coef2 = (knots[i + k] - u) / (knots[i + k] - knots[i + <span class="number">1</span>])</span><br><span class="line"></span><br><span class="line">        B = coef1 * cal_B(i, k - <span class="number">1</span>, knots, u) + coef2 * cal_B(i + <span class="number">1</span>, k - <span class="number">1</span>, knots, u)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> B</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">cal_curve</span>(<span class="params">control_points, knots, t</span>):</span><br><span class="line"></span><br><span class="line">    num, dims = control_points.shape</span><br><span class="line">    n = num - <span class="number">1</span></span><br><span class="line">    k = <span class="built_in">len</span>(knots) - n - <span class="number">1</span>  <span class="comment"># degree of b-spline</span></span><br><span class="line"></span><br><span class="line">    N = <span class="built_in">len</span>(t)</span><br><span class="line">    P = np.zeros((N, dims))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> idx <span class="keyword">in</span> <span class="built_in">range</span>(N):</span><br><span class="line">        u = t[idx]</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, num):</span><br><span class="line">            P[idx, :] += control_points[i, :] * cal_B(i, k, knots, u)</span><br><span class="line">    <span class="keyword">return</span> P</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ä½“éªŒ https://superjerryshen.github.io/b-spline-demos/##/uniform-b-spline-of-order-3</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">    control_points = np.array([[<span class="number">50</span>, <span class="number">50</span>], [<span class="number">100</span>, <span class="number">300</span>], [<span class="number">300</span>, <span class="number">100</span>], [<span class="number">380</span>, <span class="number">200</span>], [<span class="number">400</span>, <span class="number">600</span>], [<span class="number">500</span>, <span class="number">400</span>], [<span class="number">300</span>, <span class="number">600</span>]])</span><br><span class="line">    </span><br><span class="line">    N = <span class="number">500</span></span><br><span class="line">    t = np.linspace(<span class="number">0.0</span>, <span class="number">1.0</span>, N)</span><br><span class="line"></span><br><span class="line">    uniform_knots = uniform_node(control_points)</span><br><span class="line">    quasi_knots = quasi_uniform_node(control_points)</span><br><span class="line">    piecewise_knots = piecewise_node(control_points)</span><br><span class="line">    non_knots = non_uniform_node(control_points)</span><br><span class="line"></span><br><span class="line">    P_uniform = cal_curve(control_points, uniform_knots, t)</span><br><span class="line">    P_quasi = cal_curve(control_points, quasi_knots, t)</span><br><span class="line">    P_piecewise = cal_curve(control_points, piecewise_knots, t)</span><br><span class="line">    P_non = cal_curve(control_points, non_knots, t)</span><br><span class="line"></span><br><span class="line">    fig, axs = plt.subplots(<span class="number">2</span>, <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">## å‡åŒ€ ä¼šé—­åˆ</span></span><br><span class="line">    axs[<span class="number">0</span>, <span class="number">0</span>].scatter(control_points[:, <span class="number">0</span>], control_points[:, <span class="number">1</span>], color=<span class="string">&quot;C0&quot;</span>, facecolors=<span class="string">&quot;none&quot;</span>, label=<span class="string">&quot;control points&quot;</span>)</span><br><span class="line">    axs[<span class="number">0</span>, <span class="number">0</span>].plot(control_points[:, <span class="number">0</span>], control_points[:, <span class="number">1</span>], color=<span class="string">&quot;C0&quot;</span>, linewidth=<span class="number">0.2</span>)</span><br><span class="line">    axs[<span class="number">0</span>, <span class="number">0</span>].plot(P_uniform[:, <span class="number">0</span>], P_uniform[:, <span class="number">1</span>], color=<span class="string">&quot;C3&quot;</span>, label=<span class="string">&quot;uniform&quot;</span>)</span><br><span class="line">    axs[<span class="number">0</span>, <span class="number">0</span>].legend()</span><br><span class="line"></span><br><span class="line">    <span class="comment">## å‡†å‡åŒ€</span></span><br><span class="line">    axs[<span class="number">0</span>, <span class="number">1</span>].scatter(control_points[:, <span class="number">0</span>], control_points[:, <span class="number">1</span>], color=<span class="string">&quot;C0&quot;</span>, facecolors=<span class="string">&quot;none&quot;</span>, label=<span class="string">&quot;control points&quot;</span>)</span><br><span class="line">    axs[<span class="number">0</span>, <span class="number">1</span>].plot(control_points[:, <span class="number">0</span>], control_points[:, <span class="number">1</span>], color=<span class="string">&quot;C0&quot;</span>, linewidth=<span class="number">0.2</span>)</span><br><span class="line">    axs[<span class="number">0</span>, <span class="number">1</span>].plot(P_quasi[:, <span class="number">0</span>], P_quasi[:, <span class="number">1</span>], color=<span class="string">&quot;C3&quot;</span>, label=<span class="string">&quot;quasi&quot;</span>)</span><br><span class="line">    axs[<span class="number">0</span>, <span class="number">1</span>].legend()</span><br><span class="line"></span><br><span class="line">    <span class="comment">## åˆ†æ®µ</span></span><br><span class="line">    axs[<span class="number">1</span>, <span class="number">0</span>].scatter(control_points[:, <span class="number">0</span>], control_points[:, <span class="number">1</span>], color=<span class="string">&quot;C0&quot;</span>, facecolors=<span class="string">&quot;none&quot;</span>, label=<span class="string">&quot;control points&quot;</span>)</span><br><span class="line">    axs[<span class="number">1</span>, <span class="number">0</span>].plot(control_points[:, <span class="number">0</span>], control_points[:, <span class="number">1</span>], color=<span class="string">&quot;C0&quot;</span>, linewidth=<span class="number">0.2</span>)</span><br><span class="line">    axs[<span class="number">1</span>, <span class="number">0</span>].plot(P_piecewise[:, <span class="number">0</span>], P_piecewise[:, <span class="number">1</span>], color=<span class="string">&quot;C3&quot;</span>, label=<span class="string">&quot;piecewise&quot;</span>)</span><br><span class="line">    axs[<span class="number">1</span>, <span class="number">0</span>].legend()</span><br><span class="line">    </span><br><span class="line">    <span class="comment">## HJ éå‡åŒ€</span></span><br><span class="line">    axs[<span class="number">1</span>,<span class="number">1</span>].scatter(control_points[:, <span class="number">0</span>], control_points[:, <span class="number">1</span>], color=<span class="string">&quot;C0&quot;</span>, facecolors=<span class="string">&quot;none&quot;</span>, label=<span class="string">&quot;control points&quot;</span>)</span><br><span class="line">    axs[<span class="number">1</span>,<span class="number">1</span>].plot(control_points[:, <span class="number">0</span>], control_points[:, <span class="number">1</span>], color=<span class="string">&quot;C0&quot;</span>, linewidth=<span class="number">0.2</span>)</span><br><span class="line">    axs[<span class="number">1</span>,<span class="number">1</span>].plot(P_non[:, <span class="number">0</span>], P_non[:, <span class="number">1</span>], color=<span class="string">&quot;C3&quot;</span>, label=<span class="string">&quot;non uniform&quot;</span>)</span><br><span class="line">    axs[<span class="number">1</span>,<span class="number">1</span>].legend()</span><br><span class="line">    plt.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>æ•ˆæœï¼š<br />
<img src="BSpline.png" alt="BSpline" /></p>
<p>todoï¼š<br />
å¾ˆè¯¡å¼‚çš„ä¸€ç‚¹ï¼Œåœ¨ <code>cal_curve</code> å‡½æ•°ä¸­è®¡ç®— <span
class="math inline">\(k\)</span> çš„æ—¶å€™ï¼Œæ»¡è¶³ <span
class="math inline">\(k=m-n-1\)</span>
çš„æ—¶å€™ï¼Œåä¸‰ç§æ ·æ¡æ›²çº¿éƒ½ä¸ç»è¿‡é¦–å°¾æ§åˆ¶ç‚¹ï¼Œè¿™æ˜¯ä¸ç¬¦åˆé¢„æœŸçš„ï¼Œä½†æ˜¯ç”¨ <span
class="math inline">\(k = (m+1) - n - 1\)</span>
çš„æ—¶å€™ï¼Œå´å’Œæ­£å¸¸é¢„æœŸçš„ç»“æœä¸€æ ·ï¼Œä¸çŸ¥é“æ˜¯å“ªé‡Œå‡ºé—®é¢˜äº†ã€‚<br />
æœ‰ç©ºäº†å†æ¥å¡«è¡¥ç©ºç¼º</p>
<h2 id="å‚è€ƒ">6. å‚è€ƒ</h2>
<p><strong>[1]</strong> <a
href="https://b23.tv/e93CqZR">è®¡ç®—æœºå›¾å½¢å­¦-ä¸­å›½å†œå¤§-èµµæ˜-Bç«™
8.5.1~8.6.2</a><br />
<strong>[2]</strong> <a
href="https://blog.csdn.net/deepsprings/article/details/107828889?spm=1001.2014.3001.5506">è¯¦è§£æ ·æ¡æ›²çº¿-CSDN</a><br />
<strong>[3]</strong> <a
href="https://zhuanlan.zhihu.com/p/686518292">Bæ ·æ¡æ›²çº¿å’ŒNurbsæ›²çº¿
å›¾æ–‡å¹¶èŒ‚çš„ç†è§£èŠ‚ç‚¹å’ŒèŠ‚ç‚¹åŒºé—´-çŸ¥ä¹</a><br />
<strong>[4]</strong>ã€Šè®¡ç®—å‡ ä½•ç®—æ³•ä¸å®ç°ã€‹â€”â€” å­”ä»¤å¾·</p>
]]></content>
      <categories>
        <category>è®¡ç®—æœºå›¾å½¢å­¦</category>
        <category>Bæ ·æ¡</category>
      </categories>
      <tags>
        <tag>Bæ ·æ¡</tag>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo ä¸­çš„ markdown è¯­æ³•</title>
    <url>/2025/01/07/Hexo%E4%B8%AD%E7%9A%84md%E8%AF%AD%E6%B3%95/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><span id="more"></span>
<h2 id="é¡µå†…è·³è½¬">1. é¡µå†…è·³è½¬</h2>
<p>è·³è½¬åˆ°åœ°æ–¹åé¢åŠ ä¸Š
<code>&lt;span id="jump"&gt;&lt;/span&gt;</code><br />
éœ€è¦è·³è½¬çš„åœ°æ–¹ <code>[è·³è½¬åˆ°](#jump)</code><br />
æ³¨ï¼š<code>jump</code> å­—æ®µä¸èƒ½æœ‰ä¸­æ–‡ã€ç©ºæ ¼</p>
<h2 id="åšå®¢åµŒå…¥å›¾ç‰‡">2. åšå®¢åµŒå…¥å›¾ç‰‡</h2>
<p>åœ¨ Hexo çš„ <code>_config.yml</code> æ–‡ä»¶ä¸‹è®¾ç½®ï¼š</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">post_asset_folder:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">marked:</span></span><br><span class="line">  <span class="attr">prependRoot:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">postAsset:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p>æ­¤åå½“æ–°å»º <code>.md</code>
æ–‡ä»¶æ—¶ï¼Œä¼šåœ¨åŒçº§ç›®å½•ä¸‹è‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªåŒåæ–‡ä»¶å¤¹ï¼Œé‡Œé¢è¯¾ä»¥ç”¨äºå­˜æ”¾é™„ä»¶ï¼ˆå¦‚å›¾ç‰‡ç­‰ï¼‰ã€‚<br />
æ­¤æ—¶å›¾ç‰‡å¼•ç”¨è¯­æ³•ï¼š <code>![æ–‡æœ¬](å›¾ç‰‡åå­—)</code></p>
<h2 id="html-æ’å…¥å›¾ç‰‡">3. html æ’å…¥å›¾ç‰‡</h2>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">figure</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;å›¾ç‰‡è·¯å¾„&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;è¯´æ˜&quot;</span> <span class="attr">width</span>=<span class="string">&quot;åƒç´ æˆ–è€…ç™¾åˆ†æ¯”&quot;</span> <span class="attr">height</span>=<span class="string">&quot;åƒç´ æˆ–è€…ç™¾åˆ†æ¯”&quot;</span> <span class="attr">loading</span>=<span class="string">&quot;lazy&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">figcaption</span>&gt;</span>å›¾ä¾‹<span class="tag">&lt;/<span class="name">figcaption</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">figure</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="æ•°å­¦å…¬å¼ä»¥åŠç¼–å·é—®é¢˜">4. æ•°å­¦å…¬å¼ä»¥åŠç¼–å·é—®é¢˜</h2>
<p>æ¸²æŸ“å¼•æ“ï¼šMathJax<br />
æ’ä»¶ï¼šhexo-renderer-pandoc<br />
å‚æ•°ï¼ˆä½äº<code>_config.next.yml</code>ï¼‰ï¼š<code>mathjax.tags = all</code></p>
<p>å†™è¡Œé—´å…¬å¼çš„æ—¶å€™ï¼Œä¸¤ä¸ª <code>$$</code>
ä¸€å®šè¦åˆ†åˆ«ç´§é å¼€å¤´å’Œç»“å°¾ï¼Œå¹¶ä¸”ä¸­é—´ä¸èƒ½æœ‰ç©ºè¡Œï¼Œå¦åˆ™åœ¨ç½‘é¡µä¸Šä¼šçœ‹è§å¼€å¤´å’Œç»“å°¾çš„ä¸¤ä¸ª
<code>$$</code> ç¬¦å·ï¼ˆè™½ç„¶å…¬å¼å¯ä»¥æ­£å¸¸æ¸²æŸ“å‡ºæ¥ï¼‰ã€‚</p>
<p>åœ¨ä¸Šè¿°ç¯å¢ƒä¸‹ï¼Œhexo ä¼šè‡ªåŠ¨ç»™æ¯ä¸ªå…¬å¼è¿›è¡Œç¼–å·ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ç”¨
<code>\tag&#123;&#125;</code> è‡ªå·±è®¾ç½®ç¼–å·ã€‚å¦‚æœä½¿ç”¨ <code>\tag&#123;&#125;</code>
è‡ªå®šä¹‰ç¼–å·ï¼Œé‚£ä¹ˆ hexo
ä¾ç„¶ä¼šè·³è¿‡è¿™ä¸ªå…¬å¼å¹¶ä¸”å¯¹åé¢çš„å…¬å¼è¿›è¡Œè‡ªåŠ¨ç¼–å·ã€‚<br />
å½“å…¬å¼ä¸éœ€è¦ç¼–å·çš„æ—¶å€™ï¼Œå¯ä»¥ç”¨ <code>\nonumber</code> æˆ–
<code>\notag</code> æ¥æ ‡è®°ï¼›æ­¤å¤–ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ å¸¦ <code>*</code> çš„
<code>equation</code> ç¯å¢ƒæ¥å–æ¶ˆå¯¹å…¬å¼çš„ç¼–å·ã€‚</p>
<p>å¯¹äºå…¬å¼å¼•ç”¨ï¼ŒNext å®˜æ–¹æ–‡æ¡£ä¸­æåˆ°å¯ä»¥ç”¨ <code>\label&#123;&#125;</code>
å’Œå¯¹åº”çš„ <code>\eqref&#123;&#125;</code> æ¥è¿›è¡Œç›¸åº”çš„å…¬å¼å¼•ç”¨ã€‚</p>
<p>å‚è€ƒï¼š<br />
[1] <a
href="https://theme-next.js.org/docs/third-party-services/math-equations">Next
å®˜æ–¹æ–‡æ¡£</a><br />
[2] <a
href="https://docs.mathjax.org/en/latest/input/tex/eqnumbers.html">MathJax
å…¬å¼ç¼–å·è¯´æ˜</a></p>
<h2 id="å‚è€ƒæ–‡çŒ®ç¬¦å·é—®é¢˜">5. å‚è€ƒæ–‡çŒ®ç¬¦å·é—®é¢˜</h2>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="strong">**[1]**</span> å°æ˜è‘—.å°æ˜çš„ä¹¦[M]</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œçš„è‹±æ–‡å¥å·ä¼šè¢«æ¸²æŸ“ä¸ºä¸­æ–‡çš„åœ†åœˆå¥å·,æ”¹ç”¨
<code>&lt;span&gt;.&lt;/span&gt;</code> æ’å…¥<code>html</code>å³å¯</p>
]]></content>
      <tags>
        <tag>markdown</tag>
      </tags>
  </entry>
</search>
